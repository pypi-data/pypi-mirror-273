(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9060],{62709:function(e,n,t){"use strict";t.d(n,{r:function(){return l}});var r=t(77751),o=t(32393),i=t(14007),a=t(27378);function s(){return s=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},s.apply(this,arguments)}var c=["spacing","children"],l=(0,o.Gp)((function(e,n){var t=(0,o.jC)("Switch",e),l=(0,o.Lr)(e),u=l.spacing,d=void 0===u?"0.5rem":u,f=l.children,p=function(e,n){if(null==e)return{};var t,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}(l,c),h=(0,r.O)(p),g=h.state,m=h.getInputProps,v=h.getCheckboxProps,b=h.getRootProps,j=h.getLabelProps,x=a.useMemo((function(){return s({display:"inline-block",position:"relative",verticalAlign:"middle",lineHeight:0},t.container)}),[t.container]),O=a.useMemo((function(){return s({display:"inline-flex",flexShrink:0,justifyContent:"flex-start",boxSizing:"content-box",cursor:"pointer"},t.track)}),[t.track]),y=a.useMemo((function(){return s({userSelect:"none",marginStart:d},t.label)}),[d,t.label]);return a.createElement(o.m$.label,s({},b(),{className:(0,i.cx)("chakra-switch",e.className),__css:x}),a.createElement("input",s({className:"chakra-switch__input"},m({},n))),a.createElement(o.m$.span,s({},v(),{className:"chakra-switch__track",__css:O}),a.createElement(o.m$.span,{__css:t.thumb,className:"chakra-switch__thumb","data-checked":(0,i.PB)(g.isChecked),"data-hover":(0,i.PB)(g.isHovered)})),f&&a.createElement(o.m$.span,s({className:"chakra-switch__label"},j(),{__css:y}),f))}));i.Ts&&(l.displayName="Switch")},9992:function(e,n,t){"use strict";t.d(n,{u:function(){return x}});var r=t(21893),o=t(25175),i=t(32393),a=t(14007),s=t(30867),c=t(56116),l=t(27092),u=t(27378),d=t(21084),f=t(16962),p=t(49031);function h(){return h=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},h.apply(this,arguments)}function g(e,n){if(null==e)return{};var t,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}var m={exit:{scale:.85,opacity:0,transition:{opacity:{duration:.15,easings:"easeInOut"},scale:{duration:.2,easings:"easeInOut"}}},enter:{scale:1,opacity:1,transition:{opacity:{easings:"easeOut",duration:.2},scale:{duration:.2,ease:[.175,.885,.4,1.1]}}}},v=["openDelay","closeDelay","closeOnClick","closeOnMouseDown","closeOnEsc","onOpen","onClose","placement","id","isOpen","defaultIsOpen","arrowSize","arrowShadowColor","arrowPadding","modifiers","isDisabled","gutter","offset","direction"];var b=["children","label","shouldWrapChildren","aria-label","hasArrow","bg","portalProps","background","backgroundColor","bgColor"],j=(0,i.m$)(c.E.div),x=(0,i.Gp)((function(e,n){var t,c,x=(0,i.mq)("Tooltip",e),O=(0,i.Lr)(e),y=(0,i.Fg)(),w=O.children,C=O.label,k=O.shouldWrapChildren,P=O["aria-label"],_=O.hasArrow,E=O.bg,S=O.portalProps,T=O.background,Z=O.backgroundColor,D=O.bgColor,M=g(O,b),I=null!=(t=null!=(c=null!=T?T:Z)?c:E)?t:D;I&&(x.bg=I,x[r.j.arrowBg.var]=(0,a.K1)(y,"colors",I));var z,A=function(e){void 0===e&&(e={});var n=e,t=n.openDelay,o=void 0===t?0:t,i=n.closeDelay,s=void 0===i?0:i,c=n.closeOnClick,l=void 0===c||c,m=n.closeOnMouseDown,b=n.closeOnEsc,j=void 0===b||b,x=n.onOpen,O=n.onClose,y=n.placement,w=n.id,C=n.isOpen,k=n.defaultIsOpen,P=n.arrowSize,_=void 0===P?10:P,E=n.arrowShadowColor,S=n.arrowPadding,T=n.modifiers,Z=n.isDisabled,D=n.gutter,M=n.offset,I=n.direction,z=g(n,v),A=(0,d.qY)({isOpen:C,defaultIsOpen:k,onOpen:x,onClose:O}),N=A.isOpen,L=A.onOpen,$=A.onClose,F=(0,r.D)({enabled:N,placement:y,arrowPadding:S,modifiers:T,gutter:D,offset:M,direction:I}),R=F.referenceRef,B=F.getPopperProps,X=F.getArrowInnerProps,q=F.getArrowProps,W=(0,d.Me)(w,"tooltip"),Y=u.useRef(null),G=u.useRef(),H=u.useRef(),Q=u.useCallback((function(){Z||(G.current=window.setTimeout(L,o))}),[Z,L,o]),V=u.useCallback((function(){G.current&&clearTimeout(G.current),H.current=window.setTimeout($,s)}),[s,$]),K=u.useCallback((function(){l&&V()}),[l,V]),U=u.useCallback((function(){m&&V()}),[m,V]),J=u.useCallback((function(e){N&&"Escape"===e.key&&V()}),[N,V]);(0,f.b)("keydown",j?J:void 0),u.useEffect((function(){return function(){clearTimeout(G.current),clearTimeout(H.current)}}),[]),(0,f.b)("mouseleave",V,(function(){return Y.current}));var ee=u.useCallback((function(e,n){return void 0===e&&(e={}),void 0===n&&(n=null),h({},e,{ref:(0,p.lq)(Y,n,R),onMouseEnter:(0,a.v0)(e.onMouseEnter,Q),onClick:(0,a.v0)(e.onClick,K),onMouseDown:(0,a.v0)(e.onMouseDown,U),onFocus:(0,a.v0)(e.onFocus,Q),onBlur:(0,a.v0)(e.onBlur,V),"aria-describedby":N?W:void 0})}),[Q,V,U,N,W,K,R]),ne=u.useCallback((function(e,n){var t;return void 0===e&&(e={}),void 0===n&&(n=null),B(h({},e,{style:h({},e.style,(t={},t[r.j.arrowSize.var]=_?(0,a.px)(_):void 0,t[r.j.arrowShadowColor.var]=E,t))}),n)}),[B,_,E]),te=u.useCallback((function(e,n){return void 0===e&&(e={}),void 0===n&&(n=null),h({ref:n},z,e,{id:W,role:"tooltip",style:h({},e.style,{position:"relative",transformOrigin:r.j.transformOrigin.varRef})})}),[z,W]);return{isOpen:N,show:Q,hide:V,getTriggerProps:ee,getTooltipProps:te,getTooltipPositionerProps:ne,getArrowProps:q,getArrowInnerProps:X}}(h({},M,{direction:y.direction}));if((0,a.HD)(w)||k)z=u.createElement(i.m$.span,h({tabIndex:0},A.getTriggerProps()),w);else{var N=u.Children.only(w);z=u.cloneElement(N,A.getTriggerProps(N.props,N.ref))}var L=!!P,$=A.getTooltipProps({},n),F=L?(0,a.CE)($,["role","id"]):$,R=(0,a.ei)($,["role","id"]);return C?u.createElement(u.Fragment,null,z,u.createElement(l.M,null,A.isOpen&&u.createElement(o.h_,S,u.createElement(i.m$.div,h({},A.getTooltipPositionerProps(),{__css:{zIndex:x.zIndex,pointerEvents:"none"}}),u.createElement(j,h({variants:m},F,{initial:"exit",animate:"enter",exit:"exit",__css:x}),C,L&&u.createElement(s.TX,R,P),_&&u.createElement(i.m$.div,{"data-popper-arrow":!0,className:"chakra-tooltip__arrow-wrapper"},u.createElement(i.m$.div,{"data-popper-arrow-inner":!0,className:"chakra-tooltip__arrow",__css:{bg:x.bg}}))))))):u.createElement(u.Fragment,null,w)}));a.Ts&&(x.displayName="Tooltip")},38687:function(e,n,t){"use strict";var r=t(90849),o=t(31099),i=t(9992),a=t(5008),s=t(24246);function c(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?c(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):c(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}n.Z=function(e){var n=(0,o.Z)({},e);return(0,s.jsx)(i.u,l(l({placement:"right"},n),{},{children:(0,s.jsx)(a.UO,{color:"gray.400"})}))}},24263:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return W}});var r=t(34896),o=t(83125),i=t(6848),a=t(51471),s=t(55732),c=t(97865),l=t(34707),u=t.n(l),d=t(70409),f=t(21084),p=t(5008),h=t(29549),g=t(98784),m=t.n(g),v=t(86677),b=t(27378),j=t(78624),x=t(2458),O=t(44845),y=t(24753),w=t(33167),C=t(60709),k=t(27808),P=t(90849),_=t(73679),E=t(53333),S=t(62709),T=t(92975),Z=t(38687),D=t(24246),M=function(e){var n=e.id,t=e.isChecked,o=e.onChange;return(0,D.jsxs)(r.kC,{alignItems:"center",gap:"8px",children:[(0,D.jsx)(S.r,{isChecked:t,size:"sm",onChange:o,colorScheme:"complimentary",id:n,"data-testid":"regulated-toggle"}),(0,D.jsx)(T.lX,{fontSize:"sm",m:0,htmlFor:n,children:"Regulated"}),(0,D.jsx)(Z.Z,{label:"Toggle on to see only locations in this region with privacy regulations supported by Fides"})]})},I=t(60530),z=t(62332),A=t(77751),N=t(90131),L=t(93246),$=function(e){var n=e.groups,t=e.locations,o=e.isOpen,i=e.onClose,a=e.selected,s=e.onChange,l=(0,b.useState)(a),u=l[0],d=l[1],f=(0,b.useState)(!1),p=f[0],h=f[1],g=(0,b.useMemo)((function(){var e=p?t.filter((function(e){var n;return null===(n=e.regulation)||void 0===n?void 0:n.length})):t;return{locationsByGroup:(0,L.VT)(e),filteredLocations:e}}),[t,p]),m=g.filteredLocations,v=g.locationsByGroup,j=(0,E.QZ)({items:m,selected:u,onChange:d}),x=j.allSelected,O=j.handleToggleAll,y=j.handleToggleSelection,w=u.filter((function(e){return!Object.keys(v).includes(e)})).length,C=t[0].continent,k=Object.keys(v),P=!(1===k.length&&"Other"===k[0]);return(0,D.jsxs)(I.u_,{size:"2xl",isOpen:o,onClose:i,isCentered:!0,children:[(0,D.jsx)(I.ZA,{}),(0,D.jsxs)(I.hz,{"data-testid":"subgroup-modal",children:[(0,D.jsx)(N.h4,{title:"Select locations"}),(0,D.jsxs)(I.fe,{p:6,maxHeight:"70vh",overflowY:"auto",children:[(0,D.jsx)(N.x$,{title:C,allSelected:x,onToggleAll:O,numSelected:w,children:(0,D.jsx)(M,{id:"".concat(C,"-modal-regulated"),isChecked:p,onChange:function(){return h(!p)}})}),P?(0,D.jsx)(z.UQ,{allowToggle:!0,allowMultiple:!0,children:Object.entries(v).map((function(e){var t=(0,c.Z)(e,2),o=t[0],i=t[1],a=n.find((function(e){return o===e.id})),s=a?a.name:o;return(0,D.jsxs)(z.Qd,{"data-testid":"".concat(s,"-accordion"),children:[(0,D.jsx)("h2",{children:(0,D.jsxs)(z.KF,{children:[(0,D.jsx)(r.xu,{as:"span",flex:"1",textAlign:"left",fontWeight:"semibold",fontSize:"sm",children:s}),(0,D.jsx)(z.XE,{})]})}),(0,D.jsx)(z.Hk,{pb:4,children:(0,D.jsx)(r.MI,{columns:3,spacing:6,children:i.map((function(e){return(0,D.jsx)(A.XZ,{size:"sm",colorScheme:"complimentary",isChecked:u.includes(e.id),onChange:function(){return y(e.id)},"data-testid":"".concat(e.name,"-checkbox"),children:e.name},e.id)}))})})]},o)}))}):(0,D.jsx)(r.MI,{columns:3,spacing:6,paddingInline:4,children:m.map((function(e){return(0,D.jsx)(A.XZ,{size:"sm",colorScheme:"complimentary",isChecked:u.includes(e.id),onChange:function(){return y(e.id)},"data-testid":"".concat(e.name,"-checkbox"),children:e.name},e.id)}))})]}),(0,D.jsx)(N.$_,{onApply:function(){var e=new Set(u);Object.entries(v).forEach((function(n){var t=(0,c.Z)(n,2),r=t[0];t[1].every((function(e){return u.includes(e.id)}))?e.add(r):e.delete(r)})),s(Array.from(e)),i()},onClose:i})]})]})};function F(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function R(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?F(Object(t),!0).forEach((function(n){(0,P.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):F(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var B=function(e){var n=e.title,t=e.groups,r=e.locations,o=e.selected,i=e.onChange,a=e.search,s=(0,f.qY)(),c=(0,b.useState)(!1),l=c[0],u=c[1],d=!(null===a||void 0===a||!a.length),p=t.length>0,h=r;t.length&&(h=t),d&&(h=[].concat((0,_.Z)(r),(0,_.Z)(t)).sort((function(e,n){return e.name.localeCompare(n.name)})));var g=l?h.filter((function(e){return(0,L.$q)(e,r)})):h,m=a?g.filter((function(e){return function(e,n){var t;return null===(t=e.name)||void 0===t?void 0:t.toLocaleLowerCase().includes(n.toLocaleLowerCase())}(e,a)})):g,v=t.filter((function(e){return"checked"===(0,L.ji)({group:e,selected:o,locations:r})})).map((function(e){return e.id})),j=t.filter((function(e){return"indeterminate"===(0,L.ji)({group:e,selected:o,locations:r})})).map((function(e){return e.id})),x=p?[].concat((0,_.Z)(v),(0,_.Z)(o)):o,O=o.length,y=function(e){var n=r.map((function(n){return e.includes(n.id)?R(R({},n),{},{selected:!0}):R(R({},n),{},{selected:!1})}));i(n)};return 0===m.length&&a?null:(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(E.ZP,{title:n,items:m,selected:x,indeterminate:p?j:[],onChange:function(e){var n=new Set(e),o=new Set(x);e.forEach((function(e){o.has(e)||t.find((function(n){return n.id===e}))&&r.filter((function(n){var t;return null===(t=n.belongs_to)||void 0===t?void 0:t.includes(e)})).forEach((function(e){n.add(e.id)}))})),o.forEach((function(e){n.has(e)||t.find((function(n){return n.id===e}))&&r.filter((function(n){var t;return null===(t=n.belongs_to)||void 0===t?void 0:t.includes(e)})).forEach((function(e){n.delete(e.id)}))})),y(Array.from(n))},onViewMore:function(){s.onOpen()},numSelected:O,toggle:(0,D.jsx)(M,{id:"".concat(n,"-regulated"),isChecked:l,onChange:function(){return u(!l)}})}),(0,D.jsx)($,{groups:t,locations:r,isOpen:s.isOpen,onClose:s.onClose,selected:o,onChange:y},"subgroup-modal-selected-".concat(x.length))]})},X=t(17165),q=function(e){var n,t=e.data,o=(0,d.pm)(),i=(0,f.qY)(),a=(0,b.useState)(null!==(n=t.locations)&&void 0!==n?n:[]),l=a[0],g=a[1],P=(0,b.useState)(""),_=P[0],E=P[1],S=(0,X.WA)(),T=(0,c.Z)(S,2),Z=T[0],M=T[1].isLoading,I=(0,b.useMemo)((function(){return(0,L.Il)(t.locations||[],t.location_groups||[])}),[t]),z=!m().isEqual(l,t.locations),A=(0,v.useRouter)(),N=function(){A.push(C.vY).then((function(){o.closeAll()}))},$=function(){var e=(0,s.Z)(u().mark((function e(){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z({locations:l.map((function(e){return{id:e.id,selected:e.selected}})),regulations:[]});case 2:n=e.sent,(0,w.isErrorResult)(n)?o((0,y.Vo)((0,j.e$)(n.error))):o((0,y.t5)((0,D.jsxs)(r.xv,{display:"inline",children:["Fides has automatically associated the relevant regulations with your location choices."," ",(0,D.jsx)(k.Z,{onClick:N,children:"View regulations here."})]})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),F=function(e){var n=l.map((function(n){var t=e.find((function(e){return e.id===n.id}));return null!==t&&void 0!==t?t:n}));g(n)};return(0,D.jsxs)(r.gC,{alignItems:"start",spacing:4,children:[(0,D.jsx)(r.xu,{maxWidth:"510px",width:"100%",children:(0,D.jsx)(O.Z,{onChange:E,placeholder:"Search",search:_,onClear:function(){return E("")},"data-testid":"search-bar"})}),(0,D.jsx)(r.MI,{columns:{base:1,md:2,xl:3},spacing:6,width:"100%",children:Object.entries(I).map((function(e){var n=(0,c.Z)(e,2),t=n[0],r=n[1];return(0,D.jsx)(B,{title:t,groups:r.locationGroups,locations:r.locations,selected:l.filter((function(e){return r.locations.find((function(n){return n.id===e.id}))&&e.selected})).map((function(e){return e.id})),onChange:F,search:_},t)}))}),(0,D.jsx)(x.Z,{isOpen:i.isOpen,onClose:i.onClose,onConfirm:function(){$(),i.onClose()},title:"Regulation updates",message:"Modifications in your location settings may also affect your regulation settings to simplify management. You can override any Fides-initiated changes directly in the regulation settings.",isCentered:!0,icon:(0,D.jsx)(p.aN,{color:"orange"})}),z?(0,D.jsx)(h.zx,{colorScheme:"primary",size:"sm",onClick:i.onOpen,isLoading:M,"data-testid":"save-btn",children:"Save"}):null]})},W=function(){var e=(0,X.QM)().isLoading,n=(0,i.C)(X.P8);return(0,D.jsx)(a.Z,{title:"Locations",children:(0,D.jsxs)(r.xu,{"data-testid":"location-management",children:[(0,D.jsx)(r.X6,{marginBottom:2,fontSize:"2xl",children:"Locations"}),(0,D.jsxs)(r.xu,{children:[(0,D.jsx)(r.xv,{marginBottom:4,fontSize:"sm",maxWidth:"720px",children:"Select the locations that you operate in and Fides will make sure that you are automatically presented with the relevant regulatory guidelines and global frameworks for your locations."}),(0,D.jsx)(r.xu,{children:e?(0,D.jsx)(o.$,{}):(0,D.jsx)(q,{data:n})})]})]})})}},55478:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/management/locations",function(){return t(24263)}])}},function(e){e.O(0,[8033,7751,530,7227,9774,2888,179],(function(){return n=55478,e(e.s=n);var n}));var n=e.O();_N_E=n}]);