(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3709],{65535:function(e,n,t){"use strict";t.d(n,{ZS:function(){return a},a4:function(){return r}});var s=t(80406),i=t(28703).u.injectEndpoints({endpoints:function(e){return{getPurposes:e.query({query:function(){return"purposes"}})}}}),r=i.useGetPurposesQuery,o={purposes:{},special_purposes:{}},a=(0,s.P1)(i.endpoints.getPurposes.select(),(function(e){return e.data||o}))},56566:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return K}});var s=t(34896),i=t(27378),r=t(51471),o=t(90849),a=t(29549),u=t(92222),l=t(59003),c=t(90768),d=t(55162),p=t(86677),f=t(90089),h=t(77751),x=t(62332),g=t(60530),j=t(24246),C=["resetFilters","isOpen","onClose","children"];function b(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);n&&(s=s.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,s)}return t}function v(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?b(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):b(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var O=function(e,n){var t=e.filter((function(e){return e.isChecked}));return t.length>0?"".concat(n,"=").concat(t.map((function(e){return e.value})).join("&".concat(n,"="))):void 0},m=function(e){var n=e.value,t=e.displayText,i=e.isChecked,r=e.onCheckboxChange;return(0,j.jsx)(h.XZ,{value:n,height:"20px",mb:"25px",isChecked:i,onChange:function(e){var t=e.target;r(n,t.checked)},_focusWithin:{bg:"gray.100"},colorScheme:"complimentary",children:(0,j.jsx)(s.xv,{fontSize:"sm",lineHeight:5,textOverflow:"ellipsis",overflow:"hidden",children:t})},n)},y=function(e){var n=e.options,t=e.header,r=e.onCheckboxChange,o=e.columns,u=void 0===o?3:o,l=e.numDefaultOptions,c=void 0===l?15:l,d=(0,i.useState)(!1),p=d[0],f=d[1],h=p?n:n.slice(0,c),g=n.length>c;return(0,j.jsxs)(x.Qd,{border:"0px",padding:"12px 8px 8px 12px",children:[(0,j.jsx)(s.X6,{height:"56px",children:(0,j.jsxs)(x.KF,{height:"100%",children:[(0,j.jsx)(s.xu,{flex:"1",alignItems:"center",justifyContent:"center",textAlign:"left",fontWeight:600,children:t}),(0,j.jsx)(x.XE,{})]})}),(0,j.jsxs)(x.Hk,{id:"panel-".concat(t),children:[(0,j.jsx)(s.MI,{columns:u,children:h.map((function(e){return(0,j.jsx)(m,v(v({},e),{},{onCheckboxChange:r}),e.value)}))}),!p&&g?(0,j.jsx)(a.zx,{size:"sm",variant:"ghost",onClick:function(){f(!0)},children:"View more"}):null,p&&g?(0,j.jsx)(a.zx,{size:"sm",variant:"ghost",onClick:function(){f(!1)},children:"View less"}):null]})]})},k=function(e){var n=e.heading,t=e.children;return(0,j.jsxs)(s.xu,{padding:"12px 8px 8px 12px",maxHeight:600,children:[n?(0,j.jsx)(s.X6,{size:"md",lineHeight:6,fontWeight:"bold",mb:2,children:n}):null,t]})},P=function(e){var n=e.resetFilters,t=e.isOpen,i=e.onClose,r=e.children,o=(0,f.Z)(e,C);return(0,j.jsxs)(g.u_,v(v({isOpen:t,onClose:i,isCentered:!0,size:"2xl"},o),{},{children:[(0,j.jsx)(g.ZA,{}),(0,j.jsxs)(g.hz,{children:[(0,j.jsx)(g.xB,{children:"Filters"}),(0,j.jsx)(g.ol,{}),(0,j.jsx)(s.iz,{}),(0,j.jsx)(g.fe,{maxH:"85vh",padding:"0px",overflowX:"auto",style:{scrollbarGutter:"stable"},children:r}),(0,j.jsx)(g.mz,{children:(0,j.jsxs)(s.xu,{display:"flex",justifyContent:"space-between",width:"100%",children:[(0,j.jsx)(a.zx,{variant:"outline",size:"sm",mr:3,onClick:n,flexGrow:1,children:"Reset filters"}),(0,j.jsx)(a.zx,{colorScheme:"primary",size:"sm",onClick:i,flexGrow:1,children:"Done"})]})})]})]}))},w=t(60709),_=t(23571),z=t(73679),D=t(21084),S=t(6848),E=t(65535),F=t(75846);function T(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);n&&(s=s.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,s)}return t}function M(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?T(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):T(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var R=function(e){var n=e.isOpen,t=e.isTcfEnabled,s=e.onClose,i=e.resetFilters,r=e.purposeOptions,o=e.onPurposeChange,a=e.dataUseOptions,u=e.onDataUseChange,l=e.legalBasisOptions,c=e.onLegalBasisChange,d=e.consentCategoryOptions,p=e.onConsentCategoryChange;return(0,j.jsx)(P,{isOpen:n,onClose:s,resetFilters:i,children:(0,j.jsx)(x.UQ,{children:(0,j.jsxs)(k,{children:[t?(0,j.jsx)(y,{options:r,onCheckboxChange:o,header:"TCF purposes",columns:1,numDefaultOptions:5}):null,(0,j.jsx)(y,{options:a,onCheckboxChange:u,header:"Data uses"}),t?(0,j.jsx)(y,{options:l,onCheckboxChange:c,header:"Legal basis"}):null,t?null:(0,j.jsx)(y,{options:d,onCheckboxChange:p,header:"Consent categories"})]})})})},V=t(97865),Z=t(83125),U=t(34090),L=t(43139),A=t(44047),B=function(e){var n=e.isOpen,t=e.onClose,i=e.fidesKey,r=(0,A.ho)(i),o=r.data,u=r.isLoading;return(0,j.jsxs)(g.u_,{isOpen:n,onClose:t,size:"xxl",returnFocusOnClose:!1,isCentered:!0,children:[(0,j.jsx)(g.ZA,{}),(0,j.jsxs)(g.hz,{maxWidth:"800px",children:[(0,j.jsx)(g.xB,{children:"Vendor"}),(0,j.jsx)(g.fe,{children:u?(0,j.jsx)(s.kC,{width:"100%",height:"324px",alignItems:"center",justifyContent:"center",children:(0,j.jsx)(Z.$,{})}):(0,j.jsx)(U.J9,{initialValues:o,enableReinitialize:!0,onSubmit:function(){},children:function(e){var n=e.values;return(0,j.jsxs)(U.l0,{children:[(0,j.jsx)(s.xu,{mb:6,children:(0,j.jsx)(L.j0,{label:"Vendor Name",variant:"stacked",name:"name",disabled:!0})}),Object.entries((null===n||void 0===n?void 0:n.purposes)||{}).length>0?(0,j.jsx)(L.__,{children:" Purposes "}):null,(0,j.jsx)(U.F2,{name:"purposes",render:function(){return(0,j.jsx)(x.UQ,{allowMultiple:!0,children:Object.entries(n.purposes).map((function(e,n){var t=(0,V.Z)(e,1)[0];return(0,j.jsx)(x.Qd,{children:function(e){var n=e.isExpanded;return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(x.KF,{backgroundColor:n?"gray.50":"unset",children:[(0,j.jsx)(s.xu,{flex:"1",textAlign:"left",children:t}),(0,j.jsx)(x.XE,{})]}),(0,j.jsxs)(x.Hk,{backgroundColor:"gray.50",children:[(0,j.jsx)(s.xu,{my:4,children:(0,j.jsx)(L.VT,{label:"Data Uses",isMulti:!0,disableMenu:!0,isDisabled:!0,options:[],variant:"stacked",name:"purposes['".concat(t,"'].data_uses")})}),(0,j.jsx)(L.VT,{label:"Legal Basis",isMulti:!0,disableMenu:!0,isDisabled:!0,options:[],variant:"stacked",name:"purposes['".concat(t,"'].legal_bases")})]})]})}},n)}))})}}),(0,j.jsx)(s.xu,{my:4,children:(0,j.jsx)(L.VT,{label:"Features",isMulti:!0,options:[],disableMenu:!0,isDisabled:!0,variant:"stacked",name:"features"})}),(0,j.jsx)(L.VT,{label:"Data Categories",isMulti:!0,options:[],disableMenu:!0,isDisabled:!0,variant:"stacked",name:"data_categories"})]})}})}),(0,j.jsxs)(g.mz,{children:[(0,j.jsxs)(a.zx,{variant:"outline",size:"sm",onClick:t,children:["Close"," "]}),(0,j.jsx)(s.LZ,{})]})]})]})};function I(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);n&&(s=s.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,s)}return t}function N(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?I(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):I(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var X=(0,u.Cl)(),G={items:[],total:0,page:1,size:25,pages:1},H=function(){var e=(0,c.hz)(),n=e.tcf,t=e.dictionaryService,r=(0,A.x8)().isLoading,o=function(){var e=(0,D.qY)();return{isOpen:e.isOpen,onOpen:e.onOpen,onClose:e.onClose}}(),f=o.isOpen,h=o.onOpen,x=o.onClose,g=(0,p.useRouter)(),C=(0,i.useState)(),b=C[0],v=C[1],m=function(){var e=(0,D.qY)(),n=e.isOpen,t=e.onClose,s=e.onOpen;(0,F.fd)();var r=(0,S.C)(F.U3);(0,E.a4)();var o=(0,S.C)(E.ZS),a=(0,i.useState)([]),u=a[0],l=a[1],c=(0,i.useState)([]),d=c[0],p=c[1],f=(0,i.useState)([{displayText:"Consent",value:"Consent",isChecked:!1},{displayText:"Legitimate Interest",value:"Legitimate interests",isChecked:!1}]),h=f[0],x=f[1],g=(0,i.useState)([{displayText:"Advertising",value:"advertising",isChecked:!1},{displayText:"Analytics",value:"analytics",isChecked:!1},{displayText:"Functional",value:"functional",isChecked:!1},{displayText:"Essential",value:"essential",isChecked:!1}]),j=g[0],C=g[1];(0,i.useEffect)((function(){0===d.length&&p(r.map((function(e){return{value:e.fides_key,displayText:e.name||e.fides_key,isChecked:!1}})))}),[r,d,p]),(0,i.useEffect)((function(){0===u.length&&l([].concat((0,z.Z)(Object.entries(o.purposes).map((function(e){return{value:"normal.".concat(e[0]),displayText:e[1].name,isChecked:!1}}))),(0,z.Z)(Object.entries(o.special_purposes).map((function(e){return{value:"special.".concat(e[0]),displayText:e[1].name,isChecked:!1}})))))}),[o,u,p]);var b=function(e,n,t,s){s(t.map((function(t){return t.value===e?M(M({},t),{},{isChecked:n}):t})))};return{isOpen:n,onClose:t,onOpen:s,resetFilters:function(){p((function(e){return e.map((function(e){return M(M({},e),{},{isChecked:!1})}))})),x((function(e){return e.map((function(e){return M(M({},e),{},{isChecked:!1})}))})),l((function(e){return e.map((function(e){return M(M({},e),{},{isChecked:!1})}))})),C((function(e){return e.map((function(e){return M(M({},e),{},{isChecked:!1})}))}))},purposeOptions:u,onPurposeChange:function(e,n){b(e,n,u,l)},dataUseOptions:d,onDataUseChange:function(e,n){b(e,n,d,p)},legalBasisOptions:h,onLegalBasisChange:function(e,n){b(e,n,h,x)},consentCategoryOptions:j,onConsentCategoryChange:function(e,n){b(e,n,j,C)}}}(),y=m.isOpen,k=m.onOpen,P=m.onClose,T=m.resetFilters,V=m.purposeOptions,Z=m.onPurposeChange,U=m.dataUseOptions,L=m.onDataUseChange,I=m.legalBasisOptions,H=m.onLegalBasisChange,Q=m.consentCategoryOptions,K=m.onConsentCategoryChange,W=(0,i.useMemo)((function(){return O(U,"data_uses")}),[U]),q=(0,i.useMemo)((function(){return O(I,"legal_bases")}),[I]),Y=(0,i.useMemo)((function(){var e=V.filter((function(e){return e.value.includes("normal")})).map((function(e){return N(N({},e),{},{value:e.value.split(".")[1]})}));return O(e,"purposes")}),[V]),$=(0,i.useMemo)((function(){var e=V.filter((function(e){return e.value.includes("special")})).map((function(e){return N(N({},e),{},{value:e.value.split(".")[1]})}));return O(e,"special_purposes")}),[V]),J=(0,i.useMemo)((function(){return O(Q,"consent_category")}),[Q]),ee=(0,d.oi)(),ne=ee.PAGE_SIZES,te=ee.pageSize,se=ee.setPageSize,ie=ee.onPreviousPageClick,re=ee.isPreviousPageDisabled,oe=ee.onNextPageClick,ae=ee.isNextPageDisabled,ue=ee.startRange,le=ee.endRange,ce=ee.pageIndex,de=ee.setTotalPages,pe=ee.resetPageIndexToDefault,fe=(0,i.useState)(),he=fe[0],xe=fe[1],ge=(0,A.de)({pageIndex:ce,pageSize:te,dataUses:W,search:he,legalBasis:q,purposes:Y,specialPurposes:$,consentCategories:J}),je=ge.isFetching,Ce=ge.isLoading,be=ge.data,ve=(0,i.useMemo)((function(){return be||G}),[be]),Oe=ve.items,me=ve.total,ye=ve.pages;(0,i.useEffect)((function(){de(ye)}),[ye,de]);var ke=(0,i.useMemo)((function(){return[X.accessor((function(e){return e.name}),{id:"name",cell:function(e){return(0,j.jsx)(d.G3,{value:e.getValue()})},header:function(e){return(0,j.jsx)(d.Rr,N({value:"Vendor"},e))}}),X.accessor((function(e){return e.data_uses}),{id:"tcf_purpose",cell:function(e){return(0,j.jsx)(d.A4,{suffix:"purposes",value:e.getValue()})},header:function(e){return(0,j.jsx)(d.Rr,N({value:"TCF purpose"},e))}}),X.accessor((function(e){return e.data_uses}),{id:"data_uses",cell:function(e){return(0,j.jsx)(d.A4,{suffix:"data uses",value:e.getValue()})},header:function(e){return(0,j.jsx)(d.Rr,N({value:"Data use"},e))}}),X.accessor((function(e){return e.legal_bases}),{id:"legal_bases",cell:function(e){return(0,j.jsx)(d.A4,{suffix:"bases",value:e.getValue()})},header:function(e){return(0,j.jsx)(d.Rr,N({value:"Legal basis"},e))}}),X.accessor((function(e){return e.consent_categories}),{id:"consent_categories",cell:function(e){return(0,j.jsx)(d.A4,{suffix:"Categories",value:e.getValue()})},header:function(e){return(0,j.jsx)(d.Rr,N({value:"Categories"},e))}}),X.accessor((function(e){return e.cookies}),{id:"cookies",cell:function(e){return(0,j.jsx)(d.A4,{suffix:"Cookies",value:e.getValue()})},header:function(e){return(0,j.jsx)(d.Rr,N({value:"Cookies"},e))}})]}),[]),Pe=(0,l.b7)({columns:ke,data:Oe,state:{columnVisibility:{tcf_purpose:n,data_uses:n,legal_bases:n,consent_categories:!n,cookies:!n}},getCoreRowModel:(0,u.sC)(),columnResizeMode:"onChange",enableColumnResizing:!0});return Ce||r?(0,j.jsx)(d.I4,{rowHeight:36,numRows:15}):(0,j.jsxs)(s.kC,{flex:1,direction:"column",overflow:"auto",children:[f&&b?(0,j.jsx)(B,{isOpen:f,fidesKey:b,onClose:x}):null,(0,j.jsxs)(d.Q$,{children:[(0,j.jsx)(d.HO,{globalFilter:he,setGlobalFilter:function(e){pe(),xe(e)},placeholder:"Search"}),(0,j.jsx)(R,{isOpen:y,isTcfEnabled:n,onClose:P,resetFilters:T,purposeOptions:V,onPurposeChange:Z,dataUseOptions:U,onDataUseChange:L,legalBasisOptions:I,onLegalBasisChange:H,consentCategoryOptions:Q,onConsentCategoryChange:K}),(0,j.jsxs)(s.Ug,{alignItems:"center",spacing:4,children:[(0,j.jsx)(_.Z,{buttonLabel:"Add vendors",buttonVariant:"outline",onButtonClick:t?function(){g.push(w.Gg)}:void 0}),(0,j.jsx)(a.zx,{onClick:k,"data-testid":"filter-multiple-systems-btn",size:"xs",variant:"outline",children:"Filter"})]})]}),(0,j.jsx)(d.ZK,{tableInstance:Pe,onRowClick:function(e){v(e.fides_key),h()}}),(0,j.jsx)(d.s8,{totalRows:me,pageSizes:ne,setPageSize:se,onPreviousPageClick:ie,isPreviousPageDisabled:re||je,onNextPageClick:oe,isNextPageDisabled:ae||je,startRange:ue,endRange:le})]})},Q=function(e){var n=e.title,t=e.description;return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(s.xu,{mb:4,children:(0,j.jsx)(s.X6,{fontSize:"2xl",fontWeight:"semibold",mb:2,"data-testid":"header",children:n})}),(0,j.jsx)(s.kC,{children:(0,j.jsx)(s.xv,{fontSize:"sm",mb:8,width:{base:"100%",lg:"50%"},children:t})})]})},K=function(){return(0,j.jsxs)(r.Z,{title:"Configure consent",children:[(0,j.jsx)(Q,{title:"Manage your vendors",description:"Use the table below to manage your vendors. Modify the legal basis for a vendor if permitted and view and group your views by applying different filters"}),(0,j.jsx)(H,{})]})}},54727:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/consent/configure",function(){return t(56566)}])}},function(e){e.O(0,[7751,530,3452,6842,1081,4633,7140,2872,338,3702,5162,3571,9774,2888,179],(function(){return n=54727,e(e.s=n);var n}));var n=e.O();_N_E=n}]);