(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4917],{54827:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return F}});var i=t(34896),o=t(83125),r=t(79894),s=t.n(r),a=t(6848),l=t(51471),c=t(60709),u=t(17165),d=t(90849),h=t(55732),g=t(97865),f=t(34707),m=t.n(f),p=t(70409),x=t(21084),j=t(5008),v=t(29549),y=t(98784),C=t.n(y),O=t(86677),w=t(27378),b=t(78624),S=t(2458),_=t(44845),P=t(24753),Z=t(27808),k=t(33167),E=t(53333),z=t(60530),L=t(77751),A=t(90131),M=t(24246),N=function(e){var n=e.regulations,t=e.isOpen,o=e.onClose,r=e.selected,s=e.onChange,a=(0,w.useState)(r),l=a[0],c=a[1],u=(0,E.QZ)({items:n,selected:l,onChange:c}),d=u.allSelected,h=u.handleToggleAll,g=u.handleToggleSelection,f=l.length,m=n[0].continent;return(0,M.jsxs)(z.u_,{size:"2xl",isOpen:t,onClose:o,isCentered:!0,children:[(0,M.jsx)(z.ZA,{}),(0,M.jsxs)(z.hz,{"data-testid":"regulation-modal",children:[(0,M.jsx)(A.h4,{title:"Select regulations"}),(0,M.jsxs)(z.fe,{p:6,maxHeight:"70vh",overflowY:"auto",children:[(0,M.jsx)(A.x$,{title:m,allSelected:d,onToggleAll:h,numSelected:f}),(0,M.jsx)(i.MI,{columns:3,spacing:6,paddingInline:4,children:n.map((function(e){return(0,M.jsx)(L.XZ,{size:"sm",colorScheme:"complimentary",isChecked:l.includes(e.id),onChange:function(){return g(e.id)},"data-testid":"".concat(e.name,"-checkbox"),children:e.name},e.id)}))})]}),(0,M.jsx)(A.$_,{onApply:function(){s(l),o()},onClose:o})]})]})},T=function(e){var n=e.title,t=e.items,i=e.selected,o=e.onChange,r=(0,x.qY)();return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(E.ZP,{title:n,items:t,selected:i,onChange:o,numSelected:i.length,indeterminate:[],onViewMore:t.length>E.I_?r.onOpen:void 0}),(0,M.jsx)(N,{regulations:t,isOpen:r.isOpen,onClose:r.onClose,selected:i,onChange:o},"regulation-modal-selected-".concat(i.length))]})},I=t(93246);function Y(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function q(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Y(Object(t),!0).forEach((function(n){(0,d.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Y(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var D=function(e){var n,t=e.data,o=(0,p.pm)(),r=(0,x.qY)(),s=(0,w.useState)(null!==(n=t.regulations)&&void 0!==n?n:[]),a=s[0],l=s[1],d=(0,w.useState)(""),f=d[0],y=d[1],E=(0,u.WA)(),z=(0,g.Z)(E,2),L=z[0],A=z[1].isLoading,N=(0,w.useMemo)((function(){var e,n,i=null!==(e=null===(n=t.regulations)||void 0===n?void 0:n.filter((function(e){return function(e,n){var t;return null===(t=e.name)||void 0===t?void 0:t.toLocaleLowerCase().includes(n.toLocaleLowerCase())}(e,f)})))&&void 0!==e?e:[];return(0,I.F7)(i)}),[t.regulations,f]),Y=!C().isEqual(a,t.regulations),D=(0,O.useRouter)(),F=function(){D.push(c.r5).then((function(){o.closeAll()}))},R=function(){var e=(0,h.Z)(m().mark((function e(){var n;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L({regulations:a.map((function(e){return{id:e.id,selected:e.selected}})),locations:[]});case 2:n=e.sent,(0,k.isErrorResult)(n)?o((0,P.Vo)((0,b.e$)(n.error))):o((0,P.t5)((0,M.jsxs)(i.xv,{display:"inline",children:["Fides has automatically associated the relevant locations with your regulation choices.",(0,M.jsx)(Z.Z,{onClick:F,children:"View locations here."})]})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,M.jsxs)(i.gC,{alignItems:"start",spacing:4,children:[(0,M.jsx)(i.xu,{maxWidth:"510px",width:"100%",children:(0,M.jsx)(_.Z,{onChange:y,placeholder:"Search",search:f,onClear:function(){return y("")},"data-testid":"search-bar"})}),(0,M.jsx)(i.MI,{columns:{base:1,md:2,xl:3},spacing:6,width:"100%",children:Object.entries(N).map((function(e){var n=(0,g.Z)(e,2),t=n[0],i=n[1],o=a.filter((function(e){return i.find((function(n){return n.id===e.id}))&&e.selected})).map((function(e){return e.id}));return(0,M.jsx)(T,{title:t,items:i,selected:o,onChange:function(e){!function(e){var n=a.map((function(n){var t=e.find((function(e){return e.id===n.id}));return null!==t&&void 0!==t?t:n}));l(n)}(i.map((function(n){return e.includes(n.id)?q(q({},n),{},{selected:!0}):q(q({},n),{},{selected:!1})})))}},t)}))}),(0,M.jsx)(S.Z,{isOpen:r.isOpen,onClose:r.onClose,onConfirm:function(){R(),r.onClose()},title:"Location updates",message:"Modifications in your regulation settings may also affect your location settings to simplify management. You can override any Fides-initiated changes directly in the location settings.",isCentered:!0,icon:(0,M.jsx)(j.aN,{color:"orange"})}),Y?(0,M.jsx)(v.zx,{colorScheme:"primary",size:"sm",onClick:r.onOpen,isLoading:A,"data-testid":"save-btn",children:"Save"}):null]})},F=function(){var e=(0,u.QM)().isLoading,n=(0,a.C)(u.P8);return(0,M.jsx)(l.Z,{title:"Regulations",children:(0,M.jsxs)(i.xu,{"data-testid":"regulation-management",children:[(0,M.jsx)(i.X6,{marginBottom:2,fontSize:"2xl",children:"Regulations"}),(0,M.jsxs)(i.xu,{children:[(0,M.jsxs)(i.xv,{marginBottom:4,fontSize:"sm",maxWidth:"600px",children:["Select the regulations that apply to your organizations compliance requirements. The selections you make here will automatically update your location selections."," ",(0,M.jsx)(i.xv,{color:"complimentary.500",children:(0,M.jsx)(s(),{href:c.r5,passHref:!0,children:"You can view your location settings here."})})]}),(0,M.jsx)(i.xu,{children:e?(0,M.jsx)(o.$,{}):(0,M.jsx)(D,{data:n})})]})]})})}},180:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/management/regulations",function(){return t(54827)}])}},function(e){e.O(0,[8033,7751,530,7227,9774,2888,179],(function(){return n=180,e(e.s=n);var n}));var n=e.O();_N_E=n}]);