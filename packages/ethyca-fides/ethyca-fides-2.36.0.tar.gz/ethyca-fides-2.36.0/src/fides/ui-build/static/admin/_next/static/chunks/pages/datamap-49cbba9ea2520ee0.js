(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9738],{66521:function(e,t,n){"use strict";n.d(t,{Y:function(){return s}});var r=n(27378),i=n(24246),o=(0,r.createRef)(),s=(0,r.createContext)(o);t.Z=function(e){var t=e.children;return(0,i.jsx)(s.Provider,{value:o,children:t})}},76459:function(e,t,n){"use strict";n.d(t,{m:function(){return a}});var r=n(43350),i=n(80040),o=n(90849),s=n(27378),a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;(0,r.Z)(this,e),(0,o.Z)(this,"tableInstance",void 0),this.tableInstance=t,this.updateTableInstance=this.updateTableInstance.bind(this)}return(0,i.Z)(e,[{key:"updateTableInstance",value:function(e){this.tableInstance=e}}]),e}(),l=s.createContext(new a);t.Z=l},85249:function(e,t,n){"use strict";var r=n(34896),i=n(27378),o=n(60378),s=n(44845),a=n(24246);t.Z=function(e){var t=e.globalFilter,n=e.setGlobalFilter,l=e.placeholder,c=(0,i.useState)(t),u=c[0],d=c[1],p=(0,o.useAsyncDebounce)((function(e){n(e||void 0)}),200);return(0,a.jsx)(r.xu,{maxWidth:"510px",width:"100%",children:(0,a.jsx)(s.Z,{onChange:function(e){d(e),p(e)},onClear:function(){d(void 0),n(void 0)},search:u||"",placeholder:l})})}},13955:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Ot}});var r=n(27378),i=n(88486),o=n(51471),s=n(34896),a=n(83125),l=n(65218),c=n.n(l),u=n(6848),d=n(90849),p=n(90089),f=n(21295),h=n(29549),x=n(73452),m=n(89348),b=n(40397),g=n(73679),v=n(55732),y=n(97865),j=n(34707),O=n.n(j),w=n(70409),C=n(78624),S=n(24753),k=n(51860),P=n(33167),D=n(62332),_=n(34090),E=n(5008),I=n(14275),Z=n(14633),z=n(43139),F=n(288),V=n(24246),M=["customFieldValues"],T=["onSubmit","initialValues","onDelete"];function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var A=Z.Ry().shape({data_categories:Z.IX(Z.Z_()).min(1,"Must assign at least one data category").label("Data categories"),data_use:Z.Z_().required().label("Data use"),data_subjects:Z.IX(Z.Z_()).min(1,"Must assign at least one data subject").label("Data subjects")}),H={data_categories:[],data_subjects:[],data_use:"",dataset_references:[],customFieldValues:{},id:"",cookies:[]},B=function(e){e.customFieldValues;var t,n=(0,p.Z)(e,M);return W(W({},n),{},{name:null!==(t=e.name)&&void 0!==t?t:"",cookies:n.cookies.map((function(e){return{name:e,path:"/"}}))})},G=function(e){var t=e.allDataUses,n=e.allDataCategories,r=e.allDataSubjects,i=e.allDatasets,o=e.privacyDeclarationId,a=e.includeCookies,l=e.includeCustomFields,c=i?i.map((function(e){var t;return{label:null!==(t=e.name)&&void 0!==t?t:e.fides_key,value:e.fides_key}})):[];return(0,V.jsxs)(s.Kq,{spacing:4,children:[(0,V.jsx)(z.AP,{id:"data_use",label:"Data use",name:"data_use",options:t.map((function(e){return{value:e.fides_key,label:e.fides_key}})),tooltip:"What is the system using the data for. For example, is it for third party advertising or perhaps simply providing system operations.",variant:"stacked",singleValueBlock:!0,isDisabled:!!o}),(0,V.jsx)(z.j0,{id:"name",label:"Processing Activity",name:"name",variant:"stacked",tooltip:"The personal data processing activity or activities associated with this data use.",disabled:!!o}),(0,V.jsx)(z.AP,{name:"data_categories",label:"Data categories",options:n.map((function(e){return{value:e.fides_key,label:e.fides_key}})),tooltip:"What type of data is your system processing? This could be various types of user or system data.",isMulti:!0,variant:"stacked",isDisabled:!0}),(0,V.jsx)(z.AP,{name:"data_subjects",label:"Data subjects",options:r.map((function(e){return{value:e.fides_key,label:e.fides_key}})),tooltip:"Whose data are you processing? This could be customers, employees or any other type of user in your system.",isMulti:!0,variant:"stacked",isDisabled:!0}),a?(0,V.jsx)(z.VT,{name:"cookies",label:"Cookies",options:[],isMulti:!0,variant:"stacked",isClearable:!1}):null,i?(0,V.jsx)(z.AP,{name:"dataset_references",label:"Dataset references",options:c,tooltip:"Referenced Dataset fides keys used by the system.",isMulti:!0,variant:"stacked"}):null,l?(0,V.jsx)(I.uc,{resourceType:F.P6.PRIVACY_DECLARATION,resourceFidesKey:o}):null]})},L=function(e){var t=e.onSubmit,n=e.initialValues,i=e.allDataUses,o=e.privacyDeclarationId,a=(0,I.mZ)({resourceType:F.P6.PRIVACY_DECLARATION,resourceFidesKey:o}),l=a.customFieldValues,c=a.upsertCustomFields,u=(0,r.useMemo)((function(){return function(e,t){var n,r;return e?W(W({},e),{},{customFieldValues:t||{},cookies:null!==(n=null===(r=e.cookies)||void 0===r?void 0:r.map((function(e){return e.name})))&&void 0!==n?n:[]}):H}(n,l)}),[n,l]),d=(0,r.useState)(!1),p=d[0],f=d[1],h=(0,r.useMemo)((function(){var e=i.filter((function(e){return e.fides_key===u.data_use}))[0];if(e)return u.name?"".concat(e.name," - ").concat(u.name):e.name}),[i,u]),x=function(){var e=(0,v.Z)(O().mark((function e(n,r){var i,o,s,a;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.customFieldValues,o=B(n),e.next=4,t(o,r);case 4:if(!(s=e.sent)){e.next=12;break}if(!((a=s.filter((function(e){return e.data_use===n.data_use&&(!e.name||e.name===n.name)}))).length>0)){e.next=10;break}return e.next=10,c({customFieldValues:i,fides_key:a[0].id});case 10:r.resetForm({values:n}),f(!0);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return{handleSubmit:x,renderHeader:function(e){var t=e.dirty,n=e.boxProps,r=e.hideSaved;return(0,V.jsxs)(s.xu,W(W({display:"flex",alignItems:"center",justifyContent:"space-between"},n),{},{children:[h?(0,V.jsx)(s.X6,{as:"h4",size:"xs",fontWeight:"medium",mr:4,children:h}):null,!r&&p&&!t&&u.data_use?(0,V.jsxs)(s.xv,{fontSize:"sm","data-testid":"saved-indicator",children:[(0,V.jsx)(E.St,{})," Saved"]}):null]}))},initialValues:u}},U=function(e){var t=e.onSubmit,n=e.initialValues,r=e.onDelete,o=(0,p.Z)(e,T),a=L({onSubmit:t,initialValues:n,allDataUses:o.allDataUses,privacyDeclarationId:null===n||void 0===n?void 0:n.id}),l=a.handleSubmit,c=a.renderHeader,u=a.initialValues;return(0,V.jsx)(_.J9,{enableReinitialize:!0,initialValues:u,onSubmit:l,validationSchema:A,children:function(e){var t=e.dirty;return(0,V.jsxs)(_.l0,{children:[(0,V.jsx)(i.Gt,{id:"PrivacyDeclaration",name:"New Privacy Declaration"}),(0,V.jsxs)(s.Kq,{spacing:4,children:[(0,V.jsx)(s.xu,{"data-testid":"header",children:c({dirty:t})}),(0,V.jsx)(G,W({onDelete:r},o))]})]})}})},X=["privacyDeclaration","onEdit","onDelete","includeCustomFields","includeCookies"],q=["privacyDeclarations"];function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Y=function(e){var t=e.privacyDeclaration,n=e.onEdit,r=e.onDelete,o=e.includeCustomFields,a=e.includeCookies,l=(0,p.Z)(e,X),c=L(K({initialValues:t,onSubmit:function(e){return n(t,e)},privacyDeclarationId:t.id},l)),u=c.initialValues,d=c.renderHeader,f=c.handleSubmit;return(0,V.jsx)(D.Qd,{children:function(e){var n=e.isExpanded;return(0,V.jsx)(_.J9,{enableReinitialize:!0,initialValues:u,onSubmit:f,validationSchema:A,children:function(e){var c=e.dirty;return(0,V.jsxs)(_.l0,{"data-testid":"".concat(t.data_use,"-form"),children:[(0,V.jsx)(i.Gt,{id:"".concat(t.id,"-form"),name:t.id}),(0,V.jsxs)(D.KF,{py:4,borderBottomWidth:n?"0px":"1px",backgroundColor:n?"gray.50":void 0,"data-testid":"accordion-header-".concat(t.data_use),children:[d({dirty:c,boxProps:{flex:"1",textAlign:"left"},hideSaved:!n}),(0,V.jsx)(D.XE,{})]}),(0,V.jsx)(D.Hk,{backgroundColor:"gray.50",pt:0,children:(0,V.jsx)(s.Kq,{spacing:4,children:(0,V.jsx)(G,K({privacyDeclarationId:t.id,onDelete:r,includeCustomFields:o,includeCookies:a},l))})})]})}})}})},Q=function(e){var t=e.privacyDeclarations,n=(0,p.Z)(e,q);return(0,V.jsx)(D.UQ,{allowToggle:!0,border:"transparent","data-testid":"privacy-declaration-accordion",children:t.map((function(e){return(0,V.jsx)(Y,K({privacyDeclaration:e},n),e.id)}))})},$=["system","addButtonProps","includeCustomFields","includeCookies","onSave"];function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var te=function(e){var t=e.system,n=(e.addButtonProps,e.includeCustomFields),i=e.includeCookies,o=e.onSave,a=(0,p.Z)(e,$),l=(0,w.pm)(),c=(0,k.qQ)(),u=(0,y.Z)(c,1)[0],d=(0,r.useState)(!1),f=d[0],h=d[1],x=(0,r.useState)(void 0),m=x[0],b=x[1],j=(0,r.useMemo)((function(){return m?t.privacy_declarations.filter((function(e){return e.id!==m.id})):t.privacy_declarations}),[m,t]),D=function(e){return j.filter((function(t){return t.data_use===e.data_use&&t.name===e.name})).length>0&&(l((0,S.Vo)("A declaration already exists with that data use in this system. Please supply a different data use.")),!0)},_=function(){var e=(0,v.Z)(O().mark((function e(n,r){var i,s,a,c;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.map((function(e){var t;return ee(ee({},e),{},{name:null!==(t=e.name)&&void 0!==t?t:""})})),s=ee(ee({},t),{},{privacy_declarations:i}),a=function(e){if(!(0,P.isErrorResult)(e))return l.closeAll(),l((0,S.t5)(r?"Data use deleted":"Data use saved")),o&&o(e.data),e.data.privacy_declarations;var t=(0,C.e$)(e.error,"An unexpected error occurred while updating the system. Please try again.");l((0,S.Vo)(t))},e.next=5,u(s);case 5:return c=e.sent,e.abrupt("return",a(c));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),E=function(){var e=(0,v.Z)(O().mark((function e(n,r){var i;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.id===n.id||!D(r)){e.next=2;break}return e.abrupt("return",void 0);case 2:return i=t.privacy_declarations.map((function(e){return e.id===n.id?r:e})),e.abrupt("return",_(i));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),I=function(){var e=(0,v.Z)(O().mark((function e(t){var n,r,i;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!D(t)){e.next=2;break}return e.abrupt("return",void 0);case 2:return l.closeAll(),n=[].concat((0,g.Z)(j),[t]),e.next=6,_(n);case 6:return(r=e.sent)&&(i=r.filter((function(e){return(!e.name||e.name===t.name)&&e.data_use===t.data_use}))[0],b(i)),e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=function(){var e=(0,v.Z)(O().mark((function e(n){var r;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.privacy_declarations.filter((function(e){return e.id!==n.id})),e.abrupt("return",_(r,!0));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=(0,v.Z)(O().mark((function e(t){var n;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z(t);case 2:return(n=e.sent)&&(h(!1),b(void 0)),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,r.useEffect)((function(){h(!1)}),[t.fides_key]),(0,V.jsxs)(s.Kq,{spacing:3,children:[(0,V.jsx)(Q,ee({privacyDeclarations:j,onEdit:E,onDelete:Z,includeCustomFields:n,includeCookies:i},a)),f?(0,V.jsx)(s.xu,{backgroundColor:"gray.50",p:4,"data-testid":"new-declaration-form",children:(0,V.jsx)(U,ee({initialValues:m,onSubmit:I,onDelete:z,includeCustomFields:n,includeCookies:i},a))}):null,0===t.privacy_declarations.length?(0,V.jsx)(s.xv,{fontSize:"sm",lineHeight:5,fontWeight:"medium",pl:2,children:"No data uses"}):null]})},ne=n(9198),re=n(60041);function ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ie(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var se={name:"",description:""},ae=function(e){var t,n=e.system,r="/systems/configure/".concat(n.fides_key),o=function(e){var t=(0,k.dB)(),n=(0,y.Z)(t,1)[0],r=(0,w.pm)(),i=function(){var t=(0,v.Z)(O().mark((function t(i,o){var s,a;return O().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=[oe(oe({},e),{},{name:i.name,description:i.description})],t.next=3,n(s);case 3:a=t.sent,(0,re.D4)(a)?r((0,S.Vo)((0,C.e$)(a.error))):(r((0,S.t5)("Successfully saved system info")),o.resetForm({values:i}));case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();return{handleUpsertSystem:i,validationSchema:Z.Ry().shape({name:Z.Z_().required().label("Name"),description:Z.Z_().required().label("Description")})}}(n),a=o.handleUpsertSystem,l=o.validationSchema;return(0,V.jsxs)(s.xu,{children:[(0,V.jsxs)(s.kC,{alignItems:"center",children:[(0,V.jsx)(s.xv,{color:"gray.600",size:"md",lineHeight:6,fontWeight:"semibold",marginBottom:2,children:"System details"}),(0,V.jsx)(s.LZ,{}),(0,V.jsxs)(ne._p,{color:"complimentary.500",href:r,children:["View more",(0,V.jsx)(x.h0,{ml:2})]})]}),(0,V.jsx)(s.xu,{width:"100%",padding:4,borderTop:"1px solid",borderColor:"gray.200",children:(0,V.jsx)(_.J9,{enableReinitialize:!0,initialValues:null!==(t=n)&&void 0!==t?t:se,validationSchema:l,onSubmit:a,children:function(e){var t=e.isSubmitting,n=e.dirty,r=e.isValid;return(0,V.jsxs)(_.l0,{children:[(0,V.jsx)(i.Gt,{id:"SystemInfoDrawer",name:"System Info"}),(0,V.jsx)(s.xu,{marginTop:3,children:(0,V.jsx)(z.j0,{label:"System name",name:"name",variant:"stacked"})}),(0,V.jsx)(s.xu,{marginTop:3,children:(0,V.jsx)(z.Ks,{label:"System Description",name:"description",variant:"stacked"})}),(0,V.jsx)(s.kC,{marginTop:6,justifyContent:"flex-end",children:(0,V.jsx)(h.zx,{textAlign:"right",type:"submit",disabled:!n||!r,colorScheme:"primary",isLoading:t,size:"sm",children:"Save"})})]})}})})]})},le=["isLoading"];function ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var de=function(e){var t,n=e.selectedSystemId,i=e.resetSelectedSystemId,o=(0,r.useMemo)((function(){return Boolean(n)}),[n]),a=(0,b.f)({includeDatasets:!1,includeDisabled:!1}),l=(a.isLoading,(0,p.Z)(a,le)),c=(0,k.rn)(n,{skip:!n}).data;return(0,V.jsx)(s.xu,{position:"absolute",pointerEvents:"none",top:0,left:0,right:0,bottom:0,overflow:"hidden",children:(0,V.jsx)(f.Mi,{transition:{enter:{ease:"easeInOut",duration:.5},exit:{ease:"easeInOut",duration:.5}},direction:"right",in:o,unmountOnExit:!0,style:{zIndex:11,pointerEvents:"none",position:"absolute"},children:(0,V.jsxs)(s.xu,{position:"absolute",right:"0px",height:"100%",width:"100%",maxWidth:"480px",pointerEvents:"auto",borderWidth:0,boxShadow:"0px 20px 25px -5px rgba(0, 0, 0, 0.1), 0px 10px 10px -5px rgba(0, 0, 0, 0.04)",display:n?"unset":"none",backgroundColor:"white",children:[(0,V.jsx)(s.xu,{id:"drawer-header",borderBottomWidth:1,paddingX:6,paddingY:3,children:(0,V.jsxs)(s.kC,{children:[(0,V.jsx)(s.kC,{justifyContent:"space-between",alignItems:"center",height:"40px",children:(0,V.jsx)(s.xv,{fontWeight:"semibold",fontSize:"lg",lineHeight:"7",color:"gray.900",children:null!==(t=null===c||void 0===c?void 0:c.name)&&void 0!==t?t:"System Information"})}),(0,V.jsx)(s.LZ,{}),(0,V.jsx)(s.kC,{alignItems:"center",children:(0,V.jsx)(h.hU,{icon:(0,V.jsx)(x.Tw,{}),"aria-label":"Close error message",size:"sm",style:{height:"24px",width:"24px",minWidth:"14px",backgroundColor:"#00000000"},onClick:i})})]})}),(0,V.jsx)(s.xu,{id:"drawer-body",height:"calc(100% - 46px)",overflowY:"auto",padding:6,style:{scrollbarGutter:"stable"},children:c?(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(ae,{system:c}),(0,V.jsx)(s.xv,{size:"md",color:"gray.600",lineHeight:6,fontWeight:"semibold",mt:"10px",mb:2,children:"Data uses"}),(0,V.jsx)(s.xu,{borderTop:"1px solid",borderColor:"gray.200",children:(0,V.jsx)(s.xu,{pb:3,children:(0,V.jsx)(te,ue({system:c,addButtonProps:{ml:4}},l))})}),(0,V.jsx)(s.xv,{size:"md",color:"gray.600",lineHeight:6,fontWeight:"semibold",mt:"10px",mb:2,paddingBottom:2,children:"Data flow"}),(0,V.jsx)(m.q,{system:c})]}):null})]})})})},pe=n(66521),fe=n(60378),he=n(47134),xe=n(75846),me=n(63138),be=n(14221),ge=n(75523),ve=function(e){var t=e.column,n=e.value,i=function(){var e=r.useState(!1),t=(0,y.Z)(e,2),n=t[0],i=t[1],o=r.useState(!1),s=(0,y.Z)(o,2),a=s[0],l=s[1];return{mouseOver:a,isCellExpanded:n,handleToggleExpanded:function(){return i(!n)},handleMouseEnter:function(){l(!0)},handleMouseLeave:function(){l(!1)}}}(),o=i.isCellExpanded,a=i.handleMouseEnter,l=i.handleMouseLeave,c=i.handleToggleExpanded,d=i.mouseOver,p=function(e){var t,n,r,i,o=e.column,s=e.value,a=(0,u.C)(ge.L5),l=(0,u.C)(xe.C3),c=(0,u.C)(he.FG);if(o.id===be.Ux)return{label:(s.split(", ").length?s.split(", ").map((function(e){var t,n;return null!==(t=null===(n=a.get(e))||void 0===n?void 0:n.name)&&void 0!==t?t:e})).join(", "):void 0)||(null!==(t=null===(n=a.get(s))||void 0===n?void 0:n.name)&&void 0!==t?t:s),expanded:s};if(o.id===be.vy)return{label:s,expanded:null!==(r=null===(i=l.get(s))||void 0===i?void 0:i.fides_key)&&void 0!==r?r:s};if(o.id===be.OL){var d,p,f=s.split(", ").length?s.split(", ").map((function(e){var t,n;return null!==(t=null===(n=c.get(e))||void 0===n?void 0:n.fides_key)&&void 0!==t?t:e})).join(", "):void 0;return{label:s,expanded:f||(null!==(d=null===(p=c.get(s))||void 0===p?void 0:p.fides_key)&&void 0!==d?d:s)}}return{label:s}}({column:t,value:n});return(0,V.jsx)(s.xu,{position:"relative",onMouseEnter:a,onMouseLeave:l,height:"100%",children:(0,V.jsxs)(s.xu,{display:"flex",justifyContent:"space-between",alignItems:"center",height:"100%",children:[(0,V.jsxs)(s.xu,{overflow:"hidden",flex:1,p:2,children:[(0,V.jsx)(s.xv,{fontSize:"xs",lineHeight:4,fontWeight:"medium",color:"gray.600",isTruncated:!o,children:p.label}),o&&p.expanded!==p.label?(0,V.jsx)(s.xu,{fontStyle:"italic",mt:2,children:(0,V.jsx)(s.xv,{fontSize:"xs",lineHeight:4,fontWeight:"medium",color:"gray.600",children:p.expanded})}):null]}),(d||o)&&p.expanded&&""!==p.expanded?(0,V.jsx)("button",{type:"button",style:{position:"relative",right:"10px"},onClick:function(e){e.stopPropagation(),c()},children:o?(0,V.jsx)(E.O1,{width:"18px",height:"18px",my:"-4px"}):(0,V.jsx)(E.mC,{width:"18px",height:"18px",my:"-4px"})}):null]})})},ye=n(76459),je=n(77751);function Oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function we(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Oe(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ce=function(e){var t,n,r,i=e.option,o=e.columnId,a=e.filterValue,l=e.toggleFilterOption,c=(0,u.C)(ge.L5),d=o===be.Ux&&null!==(t=null===(n=c.get(i))||void 0===n?void 0:n.name)&&void 0!==t?t:i;return(0,V.jsx)(je.XZ,{value:i,width:"193px",height:"20px",mb:"25px",isChecked:null!==(r=a[i])&&void 0!==r&&r,onChange:function(e){var t=e.target;l(i,t.checked)},_focusWithin:{bg:"gray.100"},colorScheme:"complimentary",children:(0,V.jsx)(s.xv,{fontSize:"sm",lineHeight:5,height:"20px",width:"170px",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",children:d})},i)};function Se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Se(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Pe={minWidth:30,width:150,maxWidth:300,Cell:ve,Filter:function(e){var t=e.column,n=function(e){var t,n=(0,r.useContext)(ye.Z).tableInstance,i=r.useMemo((function(){var t=new Set;return e.preFilteredRows.forEach((function(n){t.add(n.values[e.id])})),Array.from(t)}),[e.id,e.preFilteredRows]),o=r.useMemo((function(){var e={};return i.forEach((function(t){e[t]=!1})),e}),[i]);return{filterValue:null!==(t=e.filterValue)&&void 0!==t?t:o,clearFilterOptions:function(){var t={};i.forEach((function(e){t[e]=!1})),e.setFilter(t)},toggleFilterOption:function(t,r){var i,s=we(we({},null!==(i=e.filterValue)&&void 0!==i?i:o),{},(0,d.Z)({},t,r));Object.values(s).every((function(e){return!e}))?null===n||void 0===n||n.setAllFilters(null===n||void 0===n?void 0:n.state.filters.filter((function(t){return t.id!==e.id}))):e.setFilter(s)},options:i,header:e.Header}}(t),i=n.filterValue,o=n.toggleFilterOption,a=n.options,l=(0,r.useState)(!1),c=l[0],u=l[1],p=c?a:a.slice(0,15),f=a.length>15;return(0,V.jsx)(D.UQ,{width:"100%",allowToggle:!0,children:(0,V.jsxs)(D.Qd,{border:"0px",children:[(0,V.jsx)(s.X6,{height:"56px",children:(0,V.jsxs)(D.KF,{height:"100%",children:[(0,V.jsx)(s.xu,{flex:"1",alignItems:"center",justifyContent:"center",textAlign:"left",children:t.Header}),(0,V.jsx)(D.XE,{})]})}),(0,V.jsxs)(D.Hk,{children:[(0,V.jsx)(s.MI,{columns:3,children:p.map((function(e){return(0,V.jsx)(Ce,{columnId:t.id,option:e,filterValue:i,toggleFilterOption:o},e)}))}),!c&&f?(0,V.jsx)(h.zx,{size:"sm",variant:"ghost",onClick:function(){u(!0)},children:"View more"}):null,c&&f?(0,V.jsx)(h.zx,{size:"sm",variant:"ghost",onClick:function(){u(!1)},children:"View less"}):null]})]})},t.id)},filter:"multifield"},De={multifield:function(e,t,n){var r=t[0];return e.filter((function(e){var t=e.values[r];return n[t]}))}},_e=n(21084),Ee=n(30794),Ie=n(29470),Ze=n(60245),ze=n(90768),Fe=n(91728),Ve=n(38687),Me=n(61561),Te=n(85249),Re=n(60530),We=n(68972),Ae=n(2926),He=n(34522),Be=function(e){var t=e.isOpen,n=e.onClose,i=(0,r.useRef)(null),o=(0,r.useContext)(ye.Z).tableInstance;if(!o)return null;var a=function(e,t){if(!e||!e.columns||!e.rows)return"";var n=e.columns,r=e.rows;if("csv"===t)return(0,We.P)([n].concat((0,g.Z)(r)));var i=He.P6.aoa_to_sheet([n].concat((0,g.Z)(r))),o=He.P6.book_new();return He.P6.book_append_sheet(o,i,"Datamap"),o},l=function(e,t){var n=(new Date).toISOString(),r="report_".concat(n,".").concat(t);if("string"===typeof e){if("csv"===t){var i=new Blob([e],{type:"text/csv;charset=utf-8"});(0,Ae.saveAs)(i,r)}}else(0,He.Fv)(e,r)},c=function(){var e=(0,v.Z)(O().mark((function e(t){var r,i;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n(),o){e.next=3;break}return e.abrupt("return");case 3:r={columns:o.columns.filter((function(e){return e.isVisible})).map((function(e){return e.Header})),rows:o.rows.map((function(e){return e.subRows})).flatMap((function(e){return e})).map((function(e){return e.cells.map((function(e){return e.value}))}))},i=a(r,t),l(i,t);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,V.jsxs)(Re.u_,{initialFocusRef:i,isCentered:!0,isOpen:t,onClose:n,size:"lg",children:[(0,V.jsx)(Re.ZA,{}),(0,V.jsxs)(Re.hz,{minWidth:"605px",children:[(0,V.jsx)(Re.xB,{children:(0,V.jsxs)(s.kC,{flexDir:"column",gap:"16px",children:[(0,V.jsx)(s.xv,{children:"Export"}),(0,V.jsx)(s.iz,{color:"gray.200"})]})}),(0,V.jsx)(Re.ol,{}),(0,V.jsx)(Re.fe,{pb:"8px",pt:"8px",children:(0,V.jsx)(s.kC,{justifyContent:"center",width:"100%",children:(0,V.jsx)(s.xv,{fontSize:"sm",lineHeight:"20px",children:"To export the current view of the Data Map table, please select the appropriate format below. Your export will contain only the visible columns and rows."})})}),(0,V.jsx)(Re.mz,{children:(0,V.jsxs)(s.kC,{borderTop:"1px solid",borderTopColor:"gray.200",justifyContent:"space-between",pt:"24px",width:"100%",children:[(0,V.jsx)(h.zx,{colorScheme:"primary",size:"sm",mr:3,flexGrow:1,onClick:function(){return c("xlsx")},children:"Export Excel (.xls)"}),(0,V.jsx)(h.zx,{colorScheme:"primary",size:"sm",flexGrow:1,onClick:function(){return c("csv")},children:"Export CSV (.csv)"})]})})]})]})},Ge=function(e){var t=e.heading,n=e.children;return(0,V.jsxs)(s.xu,{padding:"24px 8px 8px 24px",children:[(0,V.jsx)(s.X6,{size:"md",lineHeight:6,fontWeight:"bold",mb:2,children:t}),n]})},Le=function(e){var t=e.isOpen,n=e.onClose,i=(0,r.useContext)(ye.Z).tableInstance,o=(0,r.useMemo)((function(){return i||{headerGroups:[]}}),[i]).headerGroups,a=function(e,t){return e.filter((function(e){return e.id===t})).map((function(e){return e.render("Filter",{key:e.id})}))},l=(0,r.useMemo)((function(){return o.length>0?o[0].headers.map((function(e){return e})):[]}),[o]);return(0,V.jsxs)(Re.u_,{isOpen:t,onClose:n,isCentered:!0,size:"2xl",children:[(0,V.jsx)(Re.ZA,{}),(0,V.jsxs)(Re.hz,{children:[(0,V.jsx)(Re.xB,{children:"Filters"}),(0,V.jsx)(Re.ol,{}),(0,V.jsx)(s.iz,{}),(0,V.jsx)(Re.fe,{maxH:"85vh",padding:"0px",overflowX:"auto",children:function(e,t){return e.some((function(e){return t.indexOf(e.id)>-1}))}(l,[be.vy,be.Ux,be.OL])?(0,V.jsxs)(Ge,{heading:"Privacy attributes",children:[a(l,be.vy),a(l,be.Ux),a(l,be.OL)]}):null}),(0,V.jsx)(Re.mz,{children:(0,V.jsxs)(s.xu,{display:"flex",justifyContent:"space-between",width:"100%",children:[(0,V.jsx)(h.zx,{variant:"outline",size:"sm",mr:3,onClick:function(){null===i||void 0===i||i.setAllFilters([])},flexGrow:1,children:"Reset Filters"}),(0,V.jsx)(h.zx,{colorScheme:"primary",size:"sm",onClick:n,flexGrow:1,children:"Done"})]})})]})]})},Ue=n(92975),Xe=n(62709),qe=n(20294),Ne=n(65201),Ke=n(36737),Ye=n(22348);function Qe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var $e=function(e){var t=e.id,n=e.index,i=e.isVisible,o=e.moveColumn,a=e.setColumnVisible,l=e.text,c=function(e){var t=e.id,n=e.index,i=e.moveColumn,o=e.setColumnVisible,s=(0,r.useRef)(null),a=(0,Ke.L)({accept:be._Q.DraggableColumnListItem,collect:function(e){return{handlerId:e.getHandlerId()}},hover:function(e,t){var r;if(s.current){var o=e.index,a=n;if(o!==a){var l=null===(r=s.current)||void 0===r?void 0:r.getBoundingClientRect(),c=(l.bottom-l.top)/2,u=t.getClientOffset().y-l.top;o<a&&u<c||o>a&&u>c||(i(o,a),Object.assign(e,{index:a}))}}}}),l=(0,y.Z)(a,2),c=l[0].handlerId,u=l[1],d=(0,Ye.c)({type:be._Q.DraggableColumnListItem,item:function(){return{id:t,index:n}},collect:function(e){return{isDragging:!!e.isDragging()}}}),p=(0,y.Z)(d,3),f=p[0].isDragging,h=p[1],x=p[2];return h(u(s)),{isDragging:f,ref:s,handlerId:c,preview:x,handleColumnVisibleToggle:function(e){o(n,e.target.checked)}}}({index:n,id:t,moveColumn:o,setColumnVisible:a}),u=c.ref,d=c.isDragging,p=c.handlerId,f=c.preview,h=c.handleColumnVisibleToggle;return(0,V.jsxs)(s.HC,{alignItems:"center",display:"flex",minWidth:0,ref:f,"data-handler-id":p,opacity:d?.2:1,children:[(0,V.jsx)(s.xu,{ref:u,cursor:d?"grabbing":"grab",children:(0,V.jsx)(s.DE,{as:E.zG,color:"gray.300",flexShrink:0,height:"20px",width:"20px",_hover:{color:"gray.700"}})}),(0,V.jsxs)(Ue.NI,{alignItems:"center",display:"flex",minWidth:0,title:l,children:[(0,V.jsx)(Ue.lX,{color:"gray.700",fontSize:"normal",fontWeight:400,htmlFor:"".concat(t),mb:"0",minWidth:0,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",flexGrow:1,children:l}),(0,V.jsx)(Xe.r,{colorScheme:"complimentary",id:"".concat(t),mr:2,isChecked:i,onChange:h})]})]})},Je=function(e){var t=e.columns,n=(0,r.useState)(null!==t&&void 0!==t?t:[]),i=n[0],o=n[1];return(0,r.useEffect)((function(){o((null===t||void 0===t?void 0:t.map((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qe(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e)})))||[])}),[t]),{columns:i,moveColumn:(0,r.useCallback)((function(e,t){o((function(n){return(0,Ne.ZP)(n,(function(n){var r=n[e];n.splice(e,1),n.splice(t,0,r)}))}))}),[]),setColumnVisible:(0,r.useCallback)((function(e,t){o((function(n){return(0,Ne.ZP)(n,(function(n){n[e]&&(n[e].isVisible=t)}))}))}),[])}},et=function(e){var t=e.isOpen,n=e.onClose,i=(0,Ze.I0)(),o=(0,u.C)(Me.eo),a=Je({columns:o}),l=(0,r.useCallback)((function(){i((0,Me.Bx)(a.columns)),n()}),[n,i,a.columns]);return(0,V.jsxs)(Re.u_,{isOpen:t,onClose:n,isCentered:!0,size:"2xl",children:[(0,V.jsx)(Re.ZA,{}),(0,V.jsxs)(Re.hz,{children:[(0,V.jsx)(Re.xB,{pb:0,children:"Data map settings"}),(0,V.jsx)(Re.ol,{}),(0,V.jsxs)(Re.fe,{children:[(0,V.jsx)(s.xv,{fontSize:"sm",color:"gray.500",mb:2,children:"You can toggle columns on and off to hide or show them in the table. Additionally, you can drag columns up or down to change the order"}),(0,V.jsxs)(qe.mQ,{colorScheme:"complimentary",children:[(0,V.jsx)(qe.td,{children:(0,V.jsx)(qe.OK,{color:"complimentary.500",children:"Columns"})}),(0,V.jsx)(qe.nP,{children:(0,V.jsx)(qe.x4,{p:0,pt:4,maxHeight:"270px",overflowY:"scroll",children:(0,V.jsx)(s.aV,{spacing:4,children:a.columns.filter((function(e){return e.value!==be.Br})).map((function(e,t){return(0,V.jsx)($e,{id:e.id,index:t+1,isVisible:e.isVisible,moveColumn:a.moveColumn,setColumnVisible:a.setColumnVisible,text:e.text},e.id)}))})})})]})]}),(0,V.jsx)(Re.mz,{children:(0,V.jsxs)(s.xu,{display:"flex",justifyContent:"space-between",width:"100%",children:[(0,V.jsx)(h.zx,{variant:"outline",size:"sm",mr:3,onClick:n,flexGrow:1,children:"Cancel"}),(0,V.jsx)(h.zx,{colorScheme:"primary",size:"sm",onClick:l,flexGrow:1,children:"Save"})]})})]})]})},tt=function(){var e,t=(0,Ze.I0)(),n=function(){var e=(0,u.C)(Me.hd),t=(0,_e.qY)(),n=t.isOpen,r=t.onOpen,i=t.onClose,o=(0,_e.qY)(),s=o.isOpen,a=o.onOpen,l=o.onClose,c=(0,_e.qY)();return{isExportModalOpen:n,isMapOpen:e,isSettingsModalOpen:s,isFilterModalOpen:c.isOpen,onSettingsModalOpen:a,onSettingsModalClose:l,onFilterModalOpen:c.onOpen,onFilterModalClose:c.onClose,onExportClick:function(){r()},onExportModalClose:i,onExportModalOpen:r}}(),i=n.isExportModalOpen,o=n.isFilterModalOpen,a=n.isSettingsModalOpen,l=n.onSettingsModalOpen,c=n.onSettingsModalClose,d=n.onFilterModalOpen,p=n.onFilterModalClose,f=n.onExportClick,x=n.onExportModalClose,m=n.isMapOpen,b=(0,r.useContext)(ye.Z).tableInstance,g=(0,ze.hz)(),v=g.systemsCount,y=g.dictionaryService;if(!b)return null;var j=(null===(e=b.rows)||void 0===e?void 0:e.length)||0,O=null===b||void 0===b?void 0:b.state.filters.map((function(e){return Object.values(e.value)})).flatMap((function(e){return e})).filter((function(e){return!0===e})).length;return(0,V.jsxs)(V.Fragment,{children:[(0,V.jsxs)(s.kC,{justifyContent:"flex-end",flexDirection:"row",alignItems:"center",flexWrap:"wrap",rowGap:4,columnGap:4,children:[(0,V.jsx)(s.kC,{flexGrow:1,children:(0,V.jsx)(Te.Z,{globalFilter:b.state.globalFilter,setGlobalFilter:b.setGlobalFilter})}),(0,V.jsxs)(s.kC,{children:[v>0?(0,V.jsxs)(s.kC,{alignItems:"center",borderRadius:"md",gap:1,marginRight:4,children:[(0,V.jsxs)(s.xv,{fontSize:"xs",children:[j," of ",v," systems displayed"]}),y?(0,V.jsx)(Ve.Z,{label:"Note that Global Vendor List (GVL) and Additional Consent (AC) systems are not currently included in these reports"}):null]}):null,(0,V.jsxs)(h.zx,{"aria-label":"Open Filter Settings",variant:"solid",backgroundColor:"#824EF2",color:"white",size:"sm",marginRight:4,onClick:d,_hover:{opacity:.8},_active:{opacity:.8},rightIcon:(0,V.jsx)(E.r1,{}),children:["Filter",O>0?(0,V.jsx)(Ee.Vp,{ml:2,backgroundColor:"complimentary.800",borderRadius:"full",color:"white",children:O}):null]}),(0,V.jsxs)(h.hE,{isAttached:!0,size:"sm",marginRight:4,children:[(0,V.jsx)(h.zx,{colorScheme:m?"primary":void 0,onClick:function(){t((0,Me.kE)("map"))},"data-testid":"map-btn",children:"Map"}),(0,V.jsx)(h.zx,{colorScheme:m?void 0:"primary",onClick:function(){t((0,Me.kE)("table"))},"data-testid":"table-btn",children:"Table"})]}),(0,V.jsx)(h.hU,{"aria-label":"Open Column Settings",variant:"ghost",size:"sm",marginRight:1,onClick:l,icon:(0,V.jsx)(Fe.A5,{})}),(0,V.jsx)(Ie.v2,{children:(0,V.jsx)(Ie.j2,{as:h.hU,"aria-label":"Export data",icon:(0,V.jsx)(Fe.nM,{}),onClick:f,size:"sm",variant:"ghost"})})]})]}),(0,V.jsx)(Le,{isOpen:o,onClose:p}),(0,V.jsx)(Be,{isOpen:i,onClose:x}),(0,V.jsx)(et,{isOpen:a,onClose:c})]})},nt=n(40240),rt="#F7F7F7",it=["key"],ot=["key"];function st(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function at(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?st(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):st(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var lt=function(e){var t=e.rowHeading,n=e.renderRowSubheading,i=e.renderOverflowMenu,o=e.rows,a=e.prepareRow,l=e.getTableBodyProps,c=e.onSubrowClick;return(0,V.jsx)(nt.p3,at(at({backgroundColor:rt},l()),{},{children:o.map((function(e){return a(e),[(0,r.createElement)(nt.Tr,at(at({},e.getRowProps()),{},{borderTopLeftRadius:"6px",borderTopRightRadius:"6px",backgroundColor:"gray.50",borderWidth:"1px",borderBottom:"none",mt:4,ml:4,mr:4,key:e.groupByVal,"data-testid":"grouped-row-".concat(e.groupByVal)}),(0,V.jsxs)(nt.Td,at(at({display:"flex",justifyContent:"space-between",colSpan:e.cells.length},e.cells[0].getCellProps()),{},{width:"auto",paddingX:2,children:[(0,V.jsxs)(s.Kq,{children:[t?(0,V.jsx)(s.xv,{fontSize:"xs",lineHeight:4,fontWeight:"500",color:"gray.600",textTransform:"uppercase",pb:2,pt:1,children:t}):null,(0,V.jsx)(s.xv,{fontSize:"sm",lineHeight:5,fontWeight:"bold",color:"gray.600",mb:1,children:n(e)})]}),i?i(e):null]}))),e.subRows.map((function(t,n){a(t);var r=t.getRowProps(),i=r.key,o=(0,p.Z)(r,it);return(0,V.jsx)(nt.Tr,at(at({minHeight:9,borderWidth:"1px",borderColor:"gray.200",borderTop:"none",borderBottomLeftRadius:n===e.subRows.length-1?"6px":"",borderBottomRightRadius:n===e.subRows.length-1?"6px":""},o),{},{_hover:{bg:"gray.50"},cursor:c?"pointer":void 0,backgroundColor:"white",onClick:c?function(){return c(t)}:void 0,ml:4,mr:4,_last:{mb:4},children:t.cells.map((function(e,n){var r=e.getCellProps(),i=r.key,o=(0,p.Z)(r,ot);return(0,V.jsx)(nt.Td,at(at({},o),{},{borderRightWidth:n===t.cells.length-1?"":"1px",borderBottom:"none",borderColor:"gray.200",padding:0,"data-testid":"subrow-".concat(i),children:e.render("Cell")}),i)}))}),i)}))]}))}))},ct=["key"],ut=["key"];function dt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dt(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ft=function(){return(0,V.jsx)(nt.Th,{padding:0,margin:0,width:4,borderBottomColor:"gray.200",boxSizing:"border-box"})},ht=function(e){var t=e.headerGroups;return(0,V.jsx)(nt.hr,{position:"sticky",top:"0px",height:"36px",zIndex:10,backgroundColor:rt,children:t.map((function(e){var t=e.getHeaderGroupProps(),n=t.key,r=(0,p.Z)(t,ct);return(0,V.jsxs)(nt.Tr,pt(pt({},r),{},{height:"inherit",children:[(0,V.jsx)(ft,{}),e.headers.map((function(e,t){var n=e.getHeaderProps(),r=n.key,i=(0,p.Z)(n,ut);return(0,V.jsxs)(nt.Th,pt(pt({},i),{},{title:"".concat(e.Header),textTransform:"none",px:2,display:"flex",alignItems:"center",borderLeftWidth:0===t?"1px":"",borderRightWidth:"1px",borderColor:"gray.200",children:[(0,V.jsx)(s.xv,{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",mr:1,children:e.render("Header")}),e.canResize&&(0,V.jsx)(s.xu,pt(pt({},e.getResizerProps()),{},{position:"absolute",top:0,right:0,width:2,height:"100%",css:{touchAction:":none"}}))]}),r)})),(0,V.jsx)(ft,{})]}),n)}))})};function xt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xt(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var bt=function(e){var t=e.setSelectedSystemId,n=(0,r.useContext)(ye.Z).tableInstance;if(!n)return null;var i=n.getTableProps,o=n.getTableBodyProps,a=n.headerGroups,l=n.prepareRow,c=n.rows;return(0,V.jsx)(s.xu,{boxSize:"100%",overflow:"auto",children:(0,V.jsxs)(nt.iA,mt(mt({},i()),{},{size:"sm","data-testid":"datamap-table",children:[(0,V.jsx)(ht,{headerGroups:a}),(0,V.jsx)(lt,{rowHeading:"System Name",renderRowSubheading:function(e){return e.groupByVal},onSubrowClick:function(e){e.values[be.sD]&&t(e.values[be.sD])},getTableBodyProps:o,prepareRow:l,rows:c})]}))})},gt=n(60709),vt=function(){return(0,V.jsx)(s.M5,{flex:1,"data-testid":"get-started-modal",backgroundColor:"gray.100",children:(0,V.jsx)(s.xu,{backgroundColor:"white",p:10,borderRadius:"6px",boxShadow:"0px 1px 3px rgba(0, 0, 0, 0.1), 0px 1px 2px rgba(0, 0, 0, 0.06)",maxWidth:{base:"80%",lg:"60%",xl:"50%"},maxHeight:"90%",textAlign:"center",children:(0,V.jsxs)(s.Kq,{spacing:4,children:[(0,V.jsx)(s.xv,{color:"gray.700",fontWeight:"600",children:"Privacy engineering can seem like an endlessly complex confluence of legal and data engineering terminology\u2014fear not\u2014Fides is here to simplify this."}),(0,V.jsx)(s.xv,{children:"Start by scanning your infrastructure. The scanner will connect to your infrastructure to automatically scan and create a list of all systems available and then classify each system containing PII."}),(0,V.jsx)(s.xv,{children:"Let's get started!"}),(0,V.jsx)(s.xu,{children:(0,V.jsx)(h.zx,{as:"a",href:gt.xo,width:"fit-content",colorScheme:"primary","data-testid":"add-systems-btn",children:"Add Systems"})})]})})})},yt=c()((function(){return Promise.all([n.e(4804),n.e(7670),n.e(6412)]).then(n.bind(n,53027))}),{ssr:!1,loadableGenerated:{webpack:function(){return[53027]}}}),jt=function(){var e=function(){var e=(0,u.C)(Me.hd),t=(0,u.C)(Me.Xt),n=(0,r.useContext)(pe.Y),o=(0,i.oI)().attemptAction,s=(0,r.useState)(),a=s[0],l=s[1],c=(0,r.useCallback)((function(e){o().then((function(t){t&&l(e)}))}),[o,l]),d=(0,r.useCallback)((function(){o().then((function(e){var t;e&&a&&(n.current&&(null===(t=n.current)||void 0===t||t.$id(a).unselect()),l(void 0))}))}),[o,n,a]);return{isMapOpen:e,isGettingStarted:t,selectedSystemId:a,setSelectedSystemId:c,resetSelectedSystemId:d}}(),t=e.isMapOpen,n=e.isGettingStarted,o=e.setSelectedSystemId,l=e.selectedSystemId,c=e.resetSelectedSystemId,d=function(){var e=(0,u.T)(),t=(0,r.useContext)(ye.Z).updateTableInstance,n=(0,u.C)(me.eo),i=(0,me.Ex)({organizationName:"default_organization"}),o=i.data,s=i.isLoading;(0,ge.MO)(),(0,xe.fd)(),(0,he.te)();var a=(0,r.useRef)(!1);(0,r.useEffect)((function(){if(o){var t=o.columns,n=o.rows;e((0,me.dd)(t)),a.current||(a.current=!0,0===n.length?e((0,me.ym)(!0)):e((0,me.ym)(!1)))}}),[o,e]);var l=(0,r.useMemo)((function(){return o?o.rows:[]}),[o]),c=(0,r.useMemo)((function(){return(n||[]).map((function(e){var t=e.text,n=e.value,r=e.isVisible;return{id:n,accessor:function(e){return e[n]},Header:t,isVisible:r,aggregate:function(e,t){var n=new Set(t);return e.forEach((function(e){n.has(e)||n.add(e)})),Array.from(n.values()).join(", ")}}}))}),[n]),d=(0,fe.useTable)({columns:c,data:l,defaultColumn:Pe,filterTypes:De,initialState:{groupBy:[be.Br,be.vy]}},fe.useFilters,fe.useGlobalFilter,fe.useFlexLayout,fe.useResizeColumns,fe.useGroupBy,fe.useExpanded);return(0,r.useEffect)((function(){return t(d)}),[d,t]),(0,r.useEffect)((function(){d.setHiddenColumns((null===n||void 0===n?void 0:n.filter((function(e){return!e.isVisible})).map((function(e){return e.value})))||[])}),[n,d]),ke(ke({},d),{},{isLoading:s})}();return d.isLoading?(0,V.jsx)(s.M5,{width:"100%",flex:"1",children:(0,V.jsx)(a.$,{})}):n?(0,V.jsx)(vt,{}):(0,V.jsxs)(s.kC,{direction:"column",height:"100%",children:[(0,V.jsx)(s.xu,{marginBottom:3,marginRight:10,children:(0,V.jsx)(tt,{})}),(0,V.jsxs)(s.kC,{position:"relative",flex:1,direction:"row",overflow:"auto",borderWidth:"1px",borderStyle:"solid",borderColor:"gray.200",children:[t?(0,V.jsx)(s.xu,{flex:1,minWidth:"50%",maxWidth:"100%",children:(0,V.jsx)(yt,{setSelectedSystemId:o})}):null,t?null:(0,V.jsx)(s.xu,{flex:1,minWidth:"50%",maxWidth:"100%",children:(0,V.jsx)(bt,{setSelectedSystemId:o})}),(0,V.jsx)(de,{selectedSystemId:l,resetSelectedSystemId:c})]})]})},Ot=function(){var e=(0,r.useMemo)((function(){return new ye.m}),[]);return(0,V.jsx)(o.Z,{title:"View Map",mainProps:{padding:"40px 0 0 40px"},children:(0,V.jsx)(ye.Z.Provider,{value:e,children:(0,V.jsxs)(pe.Z,{children:[(0,V.jsx)(jt,{}),(0,V.jsx)(i.eB,{})]})})})}},53910:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/datamap",function(){return n(13955)}])},36786:function(){},43197:function(){}},function(e){e.O(0,[9556,7751,530,3452,6842,1081,4633,7140,6155,9198,378,2959,338,3702,3119,7697,9774,2888,179],(function(){return t=53910,e(e.s=t);var t}));var t=e.O();_N_E=t}]);