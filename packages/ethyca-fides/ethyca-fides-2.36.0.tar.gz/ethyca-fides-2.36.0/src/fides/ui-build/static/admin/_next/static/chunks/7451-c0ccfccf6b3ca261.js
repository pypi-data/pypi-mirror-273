"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7451],{64860:function(e,r,n){var t=n(30794),i=(n(27378),n(74011)),o=n(24246);r.Z=function(e){var r=e.daysLeft,n=e.includeText,s=e.status;if(!r||s===i.q.COMPLETE||s===i.q.CANCELED||s===i.q.DENIED||s===i.q.IDENTITY_UNVERIFIED)return null;var a="";switch(!0){case r>=10:a="green.500";break;case r<10&&r>4:a="orange.500";break;case r<5:a="red.400"}var c=n?"".concat(r," days left"):r;return(0,o.jsx)(t.Vp,{backgroundColor:a,color:"white",fontWeight:"medium",fontSize:"sm",children:c})}},13807:function(e,r,n){var t=n(24246);r.Z=function(e){var r=e.data,n=e.revealPII?r:String(r).replace(/./g,"*");return(0,t.jsx)(t.Fragment,{children:n})}},95946:function(e,r,n){var t=n(62709),i=(n(27378),n(24246));r.Z=function(e){var r=e.revealPII,n=e.onChange;return(0,i.jsx)(t.r,{"data-testid":"pii-toggle",colorScheme:"secondary",isChecked:r,onChange:function(e){return n(e.target.checked)}})}},19099:function(e,r,n){var t=n(34896),i=n(24246),o={approved:{bg:"yellow.500",label:"Approved"},complete:{bg:"green.500",label:"Completed"},awaiting_email_send:{bg:"gray.400",label:"Awaiting Email Send"},denied:{bg:"red.500",label:"Denied"},canceled:{bg:"red.600",label:"Canceled"},error:{bg:"red.800",label:"Error"},in_processing:{bg:"orange.500",label:"In Progress"},paused:{bg:"gray.400",label:"Paused"},pending:{bg:"blue.400",label:"New"},identity_unverified:{bg:"red.400",label:"Unverified"},requires_input:{bg:"yellow.400",label:"Requires Input"}};r.Z=function(e){var r=e.status;return(0,i.jsx)(t.Ct,{color:"white",bg:o[r].bg,width:"100%",minWidth:"120px",lineHeight:"18px",textAlign:"center","data-testid":"request-status-badge",children:o[r].label})}},1540:function(e,r,n){n.d(r,{E:function(){return c}});var t=n(30794),i=n(34896),o=n(9481),s=(n(27378),n(1326)),a=n(24246),c=function(e){return Array.from(new Set(e.filter((function(e){return Object.values(o.U).includes(e.action_type)})).map((function(e){return e.action_type}))))};r.Z=function(e){var r=e.rules,n=c(r).map((function(e){return(0,s.kC)(e)})).map((function(e){return(0,a.jsx)(t.Vp,{color:"white",bg:"primary.400",fontWeight:"medium",fontSize:"sm",children:e},e)}));return(0,a.jsx)(i.xu,{children:n})}},9408:function(e,r,n){n.d(r,{HK:function(){return o},VY:function(){return t.V},O3:function(){return a}});var t=n(36653),i=n(78624),o=function(){var e=(0,t.V)().errorAlert;return{handleError:function(r){var n="An unexpected error occurred. Please try again.";(0,i.Ot)(r)?n=r.data.detail:(0,i.tB)(r)&&(n=r.data.detail[0].msg),e(n)}}},s=n(27378),a=function(e){var r=(0,s.useRef)(void 0);return(0,s.useEffect)((function(){var n=function(n){var t;null!==(t=r.current)&&void 0!==t&&t.contains(n.target)||e()};return document.addEventListener("mousedown",n),function(){document.removeEventListener("mousedown",n)}}),[r,e]),{ref:r}}},36653:function(e,r,n){n.d(r,{V:function(){return d}});var t=n(90849),i=n(70409),o=n(23286),s=n(34896),a=n(93235),c=n(24246);function u(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function l(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?u(Object(n),!0).forEach((function(r){(0,t.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}var d=function(){var e=(0,i.pm)();return{errorAlert:function(r,n,t){var i=l(l({},t),{},{position:(null===t||void 0===t?void 0:t.position)||"top",render:function(e){var t=e.onClose;return(0,c.jsxs)(o.bZ,{alignItems:"normal",status:"error",children:[(0,c.jsx)(o.zM,{}),(0,c.jsxs)(s.xu,{children:[n&&(0,c.jsx)(o.Cd,{children:n}),(0,c.jsx)(o.X,{children:r})]}),(0,c.jsx)(a.P,{onClick:t,position:"relative",right:0,size:"sm",top:-1})]})}});null!==t&&void 0!==t&&t.id&&e.isActive(t.id)?e.update(t.id,i):e(i)},successAlert:function(r,n,t){var i=l(l({},t),{},{position:(null===t||void 0===t?void 0:t.position)||"top",render:function(e){var t=e.onClose;return(0,c.jsxs)(o.bZ,{alignItems:"normal",status:"success",variant:"subtle",children:[(0,c.jsx)(o.zM,{}),(0,c.jsxs)(s.xu,{children:[n&&(0,c.jsx)(o.Cd,{children:n}),(0,c.jsx)(o.X,{children:r})]}),(0,c.jsx)(a.P,{onClick:t,position:"relative",right:0,size:"sm",top:-1})]})}});null!==t&&void 0!==t&&t.id&&e.isActive(t.id)?e.update(t.id,i):e(i)}}}},40377:function(e,r,n){n.d(r,{Z:function(){return g}});var t=n(90849),i=n(32393),o=n(21084),s=n(97865),a=n(60530),c=n(34896),u=n(29549),l=n(27378),d=n(24246),f=function(e){var r=e.isOpen,n=e.onClose,t=e.onApproveRequest,i=e.isLoading,o=e.subjectRequest,f=o.identity,p=o.identity_verified_at,b=o.custom_privacy_request_fields,v=(0,l.useCallback)((function(){t().then((function(){n()}))}),[t,n]);return(0,d.jsxs)(a.u_,{isOpen:r,onClose:n,size:"lg",isCentered:!0,children:[(0,d.jsx)(a.ZA,{}),(0,d.jsxs)(a.hz,{children:[(0,d.jsx)(a.xB,{children:"Privacy request approval"}),(0,d.jsxs)(a.fe,{paddingTop:0,paddingBottom:0,children:[(0,d.jsx)(c.xv,{color:"gray.500",fontSize:"14px",marginBottom:4,children:"Are you sure you want to approve this privacy request?"}),(0,d.jsxs)(c.QI,{children:[Object.entries(f).filter((function(e){return null!==(0,s.Z)(e,2)[1].value})).map((function(e){var r=(0,s.Z)(e,2),n=r[0],t=r[1],i=t.value,o=t.label;return(0,d.jsx)(c.HC,{children:(0,d.jsxs)(c.kC,{alignItems:"flex-start",children:[(0,d.jsxs)(c.xv,{mr:2,fontSize:"sm",color:"gray.900",fontWeight:"500",children:[o,":"]}),(0,d.jsx)(c.xv,{color:"gray.600",fontWeight:"500",fontSize:"sm",mr:2,children:i}),"(",p?"Verified":"Unverified",")"]},n)},n)})),b&&Object.entries(b).filter((function(e){return(0,s.Z)(e,2)[1].value})).map((function(e){var r=(0,s.Z)(e,2),n=r[0],t=r[1];return(0,d.jsx)(c.HC,{children:(0,d.jsxs)(c.kC,{alignItems:"flex-start",children:[(0,d.jsxs)(c.xv,{mr:2,fontSize:"sm",color:"gray.900",fontWeight:"500",children:[t.label,":"]}),(0,d.jsxs)(c.xv,{color:"gray.600",fontWeight:"500",fontSize:"sm",mr:2,children:[Array.isArray(t.value)?t.value.join(", "):t.value," "]}),"(Unverified)"]},n)},n)}))]})]}),(0,d.jsx)(a.mz,{children:(0,d.jsxs)(c.MI,{columns:2,width:"100%",children:[(0,d.jsx)(u.zx,{variant:"outline",size:"sm",mr:3,"data-testid":"cancel-btn",onClick:n,children:"Cancel"}),(0,d.jsx)(u.zx,{colorScheme:"primary",variant:"solid",size:"sm","data-testid":"continue-btn",onClick:v,isLoading:i,children:"Confirm"})]})})]})]})},p=n(759),b=n(34333);function v(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function h(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?v(Object(n),!0).forEach((function(r){(0,t.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}var g=(0,i.Gp)((function(e,r){var n=e.buttonProps,t=e.children,i=e.onClose,s=e.subjectRequest,a=(0,p.Z)({subjectRequest:s}),c=a.handleApproveRequest,u=a.isLoading,l=(0,o.qY)();return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(b.S,h(h({ref:r,onClick:l.onOpen,isLoading:u,isDisabled:u},n),{},{"data-testid":"privacy-request-approve-btn",children:t})),(0,d.jsx)(f,{isOpen:l.isOpen,isLoading:u,onClose:function(){l.onClose(),null===i||void 0===i||i()},onApproveRequest:c,subjectRequest:s})]})}))},20970:function(e,r,n){n.d(r,{Z:function(){return y}});var t=n(90849),i=n(32393),o=n(21084),s=n(60530),a=n(29549),c=n(43139),u=n(34090),l=n(27378),d=n(14633),f=n(24246),p={denialReason:""},b=function(e){var r=e.isOpen,n=e.onClose,t=e.onDenyRequest,i=(0,l.useCallback)((function(e,r){var i=r.setSubmitting;t(e.denialReason).then((function(){i(!1),n()}))}),[t,n]);return(0,f.jsxs)(s.u_,{isOpen:r,onClose:n,isCentered:!0,returnFocusOnClose:!1,children:[(0,f.jsx)(s.ZA,{}),(0,f.jsx)(s.hz,{width:"100%",maxWidth:"456px","data-testid":"deny-privacy-request-modal",children:(0,f.jsx)(u.J9,{initialValues:p,validationSchema:d.Ry({denialReason:d.Z_().required().label("Reason for denial")}),onSubmit:i,children:function(e){var r=e.isSubmitting,t=e.dirty,i=e.isValid;return(0,f.jsxs)(u.l0,{children:[(0,f.jsx)(s.xB,{children:"Privacy request denial"}),(0,f.jsx)(s.fe,{color:"gray.500",fontSize:"14px",children:"Please enter a reason for denying this privacy request. Please note: this can be seen by the user in their notification email."}),(0,f.jsx)(s.fe,{children:(0,f.jsx)(c.Ks,{name:"denialReason",textAreaProps:{focusBorderColor:"primary.600",resize:"none"}})}),(0,f.jsxs)(s.mz,{children:[(0,f.jsx)(a.zx,{variant:"outline",size:"sm",width:"100%",maxWidth:"198px",mr:3,disabled:r,onClick:n,children:"Cancel"}),(0,f.jsx)(a.zx,{type:"submit",size:"sm",width:"100%",maxWidth:"198px",colorScheme:"primary",variant:"solid",disabled:!t||!i,isLoading:r,"data-testid":"deny-privacy-request-modal-btn",children:"Confirm"})]})]})}})})]})},v=n(759),h=n(34333);function g(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function j(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?g(Object(n),!0).forEach((function(r){(0,t.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}var y=(0,i.Gp)((function(e,r){var n=e.buttonProps,t=e.children,i=e.onClose,s=e.subjectRequest,a=(0,v.Z)({subjectRequest:s}),c=a.handleDenyRequest,u=a.isLoading,l=(0,o.qY)();return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(h.S,j(j({ref:r,onClick:l.onOpen,isLoading:u,isDisabled:u},n),{},{"data-testid":"privacy-request-deny-btn",children:t})),(0,f.jsx)(b,{isOpen:l.isOpen,onClose:function(){l.onClose(),null===i||void 0===i||i()},onDenyRequest:c})]})}))},30199:function(e,r,n){var t=n(90849),i=n(55732),o=n(97865),s=n(34707),a=n.n(s),c=n(32393),u=n(34896),l=n(29549),d=n(27378),f=n(6848),p=n(78624),b=n(9408),v=n(51365),h=n(24246);function g(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function j(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?g(Object(n),!0).forEach((function(r){(0,t.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}var y=(0,c.Gp)((function(e,r){var n=e.buttonProps,t=e.handleBlur,s=e.subjectRequest,c=(0,f.T)(),g=(0,d.useState)(!1),y=g[0],O=g[1],x=(0,b.VY)(),m=x.errorAlert,P=x.successAlert,w=(0,f.C)(v.fe).errorRequests,C=(0,v.JD)(),R=(0,o.Z)(C,1)[0],q=(0,v.Fq)(),S=(0,o.Z)(q,1)[0],D=function(){var e=(0,i.Z)(a().mark((function e(){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(!0),e.next=3,R(w);case 3:"error"in(r=e.sent)?(c((0,v.uT)({checkAll:!1,errorRequests:[]})),m((0,p.e$)(r.error),"DSR batch automation has failed due to the following:",{duration:null})):(r.data.failed.length>0&&m((0,h.jsxs)(u.xu,{children:["DSR automation has failed for"," ",(0,h.jsx)(u.xv,{as:"span",fontWeight:"semibold",children:r.data.failed.length})," ","privacy request(s). Please review the event log for further details."]}),void 0,{containerStyle:{maxWidth:"max-content"},duration:null}),r.data.succeeded.length>0&&P("Privacy request(s) are now being reprocessed.")),O(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=(0,i.Z)(a().mark((function e(){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s){e.next=2;break}return e.abrupt("return");case 2:return O(!0),e.next=5,S(s);case 5:"error"in(n=e.sent)?m((0,p.e$)(n.error),"DSR automation has failed for this privacy request due to the following:",{duration:null}):P("Privacy request is now being reprocessed."),O(!1),t&&t(r);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,h.jsx)(l.zx,j(j({},n),{},{isDisabled:y,isLoading:y,loadingText:"Reprocessing",onClick:s?E:D,ref:r,spinnerPlacement:"end",variant:"outline",_hover:{bg:"gray.100"},_loading:{opacity:1,div:{opacity:.4}},children:"Reprocess"}))}));r.Z=y},34333:function(e,r,n){n.d(r,{S:function(){return c}});var t=n(90849),i=n(32393),o=n(29549),s=n(24246);function a(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}var c=(0,i.Gp)((function(e,r){return(0,s.jsx)(o.zx,function(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?a(Object(n),!0).forEach((function(r){(0,t.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}({ref:r,size:"xs",bg:"white",_loading:{opacity:1,div:{opacity:.4}},_hover:{bg:"gray.100"}},e))}))},759:function(e,r,n){n.d(r,{Z:function(){return o}});var t=n(97865),i=n(51365),o=function(e){var r=e.subjectRequest,n=(0,i.RW)({fixedCacheKey:r.id}),o=(0,t.Z)(n,2),s=o[0],a=o[1],c=(0,i.F1)({fixedCacheKey:r.id}),u=(0,t.Z)(c,2),l=u[0],d=u[1],f=d.isLoading||a.isLoading;return{approveRequest:s,approveRequestResult:a,denyRequest:l,denyRequestResult:d,handleApproveRequest:function(){return s(r)},handleDenyRequest:function(e){return l({id:r.id,reason:e})},isLoading:f}}},9481:function(e,r,n){var t,i;n.d(r,{U:function(){return t},n:function(){return i}}),function(e){e.ACCESS="access",e.ERASURE="erasure",e.CONSENT="consent",e.UPDATE="update"}(t||(t={})),function(e){e.IN_PROCESSING="in_processing",e.PENDING="pending",e.COMPLETE="complete",e.ERROR="error",e.PAUSED="paused",e.RETRYING="retrying",e.SKIPPED="skipped"}(i||(i={}))}}]);