"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3571],{29073:function(e,n,t){var i=t(34896),r=t(73452),a=t(24246);n.Z=function(e){var n=e.title,t=e.description,s=e.button;return(0,a.jsxs)(i.Ug,{backgroundColor:"gray.50",border:"1px solid",borderColor:"blue.400",borderRadius:"md",justifyContent:"space-between",py:4,px:6,"data-testid":"empty-state",children:[(0,a.jsx)(r.ii,{alignSelf:"start",color:"blue.400",mt:.5}),(0,a.jsxs)(i.xu,{flexGrow:1,children:[(0,a.jsx)(i.xv,{fontWeight:"bold",fontSize:"sm",mb:1,children:n}),(0,a.jsx)(i.xv,{fontSize:"sm",color:"gray.600",lineHeight:"5",children:t})]}),s]})}},23571:function(e,n,t){t.d(n,{Z:function(){return q}});var i=t(90849),r=t(90089),a=t(55732),s=t(97865),o=t(34707),l=t.n(o),c=t(70409),d=t(21084),u=t(29549),p=t(34896),f=t(34090),m=t(27378),v=t(14633),h=t(6848),g=t(90768),b=t(43139),x=t(37761),y=t(44047),_=t(48466),j=t(51745),C=t(1504),k=t(88491),O=t(78624),w=t(24753),S=t(60530),z=t(24246),V=function(e){var n=e.title,t=e.children,i=e.isOpen,r=e.onClose;return(0,z.jsxs)(S.u_,{isOpen:i,onClose:r,isCentered:!0,scrollBehavior:"inside",size:"xl",children:[(0,z.jsx)(S.ZA,{}),(0,z.jsxs)(S.hz,{textAlign:"left",p:0,children:[(0,z.jsx)(S.xB,{p:0,children:(0,z.jsx)(p.xu,{backgroundColor:"gray.50",px:6,py:4,border:"1px",borderColor:"gray.200",borderTopRadius:6,display:"flex",justifyContent:"space-between",alignItems:"center",children:(0,z.jsx)(p.X6,{as:"h3",size:"sm",children:n})})}),(0,z.jsx)(S.fe,{pb:4,overflow:"scroll",children:t})]})]})},P={name:"",consent_use:"",data_use:"",data_categories:["user"],cookieNames:[],cookies:[]},L=[{label:"Analytics",value:"analytics",description:"Provides analytics for activities such as system and advertising performance reporting, insights and fraud detection."},{label:"Essential",value:"essential",description:"Operates the service or product, including legal obligations, support and basic system operations."},{label:"Functional",value:"functional",description:"Used for specific, necessary, and legitimate purposes."},{label:"Marketing",value:"marketing",description:"Enables marketing, promotion, advertising and sales activities for the product, service, application or system."}],E=t(83125),Z=t(75846),D=t(16446),F=function(e){var n=e.index,t=e.isSuggestion,i=e.disabled;(0,Z.fd)();var r=(0,h.C)(Z.oW),a=t?"complimentary.500":"gray.800",s=(0,f.u6)().values,o=r.filter((function(e){return e.value.split(".")[0]===s.privacy_declarations[n].consent_use}));return(0,z.jsxs)(p.gC,{width:"100%",borderRadius:"4px",border:"1px solid",borderColor:"gray.200",spacing:4,p:4,children:[(0,z.jsx)(b.AP,{label:"Consent category",tooltip:"What is the system using the data for. For example, is it for third party advertising or perhaps simply providing system operations.",name:"privacy_declarations.".concat(n,".consent_use"),options:L,variant:"stacked",isRequired:!0,isCustomOption:!0,singleValueBlock:!0,textColor:a,isDisabled:i}),(0,z.jsx)(b.AP,{label:"Detailed consent category (optional)",tooltip:"Select a more specific consent category",name:"privacy_declarations.".concat(n,".data_use"),options:o,variant:"stacked",isCustomOption:!0,singleValueBlock:!0,textColor:a,isDisabled:!s.privacy_declarations[n].consent_use||i}),(0,z.jsx)(b.VT,{label:"Cookie names",name:"privacy_declarations.".concat(n,".cookieNames"),options:[],variant:"stacked",isMulti:!0,textColor:a,isDisabled:i})]})},R=function(e){var n,t,i=e.showSuggestions,r=e.isCreate,a=e.disabled,s=(0,f.u6)(),o=s.values,l=s.setFieldValue,c=o.vendor_id,d=(0,y.Wp)({vendor_id:c},{skip:!i||null==c}).isLoading,p=(0,h.C)((0,y.cL)(c||""));(0,m.useEffect)((function(){if(i&&o.vendor_id&&null!==p&&void 0!==p&&p.length){var e=p.filter((function(e){return n=e.data_use,L.some((function(e){return e.value===n.split(".")[0]}));var n})).map((function(e){return(0,D.U)(e)})).map((function(e){var n,t,i;return{name:null!==(n=e.name)&&void 0!==n?n:"",consent_use:e.data_use.split(".")[0],data_use:e.data_use,data_categories:e.data_categories,cookieNames:(null===(t=e.cookies)||void 0===t?void 0:t.map((function(e){return e.name})))||[],cookies:null!==(i=e.cookies)&&void 0!==i?i:[]}}));l("privacy_declarations",e)}else r&&l("privacy_declarations",[P])}),[i,r,o.vendor_id,p,l]);var v=(null===(n=o.privacy_declarations[o.privacy_declarations.length-1])||void 0===n?void 0:n.data_use)===P.data_use&&(null===(t=o.privacy_declarations[o.privacy_declarations.length-1])||void 0===t?void 0:t.consent_use)===P.consent_use;return d?(0,z.jsx)(E.$,{size:"sm",alignSelf:"center"}):(0,z.jsx)(f.F2,{name:"privacy_declarations",render:function(e){return(0,z.jsxs)(z.Fragment,{children:[o.privacy_declarations.map((function(e,n){return(0,z.jsx)(F,{index:n,disabled:a,isSuggestion:i},e.data_use||n)})),(0,z.jsx)(u.zx,{size:"xs",variant:"ghost",colorScheme:"complimentary",onClick:function(){e.push(P)},disabled:v||a,"data-testid":"add-data-use-btn",children:"Add data use +"})]})}})},N=["cookieNames","consent_use"];function I(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function G(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?I(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):I(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var U={name:"",vendor_id:void 0,privacy_declarations:[P]},q=function(e){var n=e.buttonLabel,t=e.buttonVariant,i=void 0===t?"primary":t,o=e.onButtonClick,S=(0,c.pm)(),L=(0,d.qY)(),E=L.isOpen,Z=L.onOpen,D=L.onClose,F=(0,h.T)(),I=(0,h.C)(_.cS),q=(0,m.useMemo)((function(){return v.Ry().shape({name:v.Z_().required().label("Vendor name").test("is-unique","",(function(e,n){return!I.map((function(e){return e.name})).some((function(n){return n===e}))||n.createError({message:'You already have a vendor called "'.concat(e,'". Please specify a unique name for this vendor.')})}))})}),[I]),A=(0,g.hz)(),B=A.tcf,W=A.dictionaryService,M=(0,y.Rd)(void 0,{skip:!W}).isLoading,T=(0,h.C)(y.o),H=(0,h.C)(j.gU),Q=(0,_.f7)(),$=(0,s.Z)(Q,1)[0],Y=(0,h.C)(j.bN),J=function(){D(),F((0,j.b3)("initial")),F((0,j.gQ)(!1))},K=(0,m.useRef)(null),X=K.current?K.current.values.vendor_id:void 0,ee=(0,h.C)((0,y.$e)(X||"")),ne=function(){var e=(0,a.Z)(l().mark((function e(n,t){var i,a,s;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.privacy_declarations.filter((function(e){return e.consent_use!==P.consent_use})).flatMap((function(e){var n=e.cookieNames.map((function(n){var t=e.cookies.find((function(e){return e.name===n}));return null!==t&&void 0!==t?t:{name:n,path:"/"}})),t=(e.cookieNames,e.consent_use,(0,r.Z)(e,N));return"marketing"!==e.consent_use||e.data_use?G(G({},t),{},{data_use:e.data_use?e.data_use:e.consent_use,cookies:n}):["marketing.advertising.first_party.targeted","marketing.advertising.third_party.targeted"].map((function(e){return G(G({},t),{},{data_use:e,cookies:n})}))})),a=G(G(G({},ee),n),{},{fides_key:(0,x.E)(n.name),system_type:"",privacy_declarations:i}),e.next=4,$(a);case 4:if(s=e.sent,!(0,O.D4)(s)){e.next=8;break}return S((0,w.Vo)((0,O.e$)(s.error))),e.abrupt("return");case 8:S((0,w.t5)("Vendor successfully created!")),t.resetForm(),J();case 11:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),te=function(e){if(W){if(!e)return F((0,j.b3)("hiding")),void F((0,j.gQ)(!1));F((0,j.b3)("showing")),B&&(0,O.cj)(e)===O.c6.GVL?F((0,j.gQ)(!0)):F((0,j.gQ)(!1))}},ie="primary"===i?{size:"sm",colorScheme:"primary"}:{size:"xs",variant:"outline"};return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(u.zx,G(G({onClick:function(){o?o():Z()},"data-testid":"add-vendor-btn"},ie),{},{children:n})),(0,z.jsx)(f.J9,{initialValues:U,enableReinitialize:!0,onSubmit:ne,validationSchema:q,innerRef:K,children:function(e){var n=e.dirty,t=e.isValid,i=e.resetForm;return(0,z.jsx)(V,{isOpen:E,onClose:J,title:"Add a vendor",children:(0,z.jsxs)(p.xu,{"data-testid":"add-vendor-modal-content",my:4,children:[H?(0,z.jsx)(C.Z,{}):null,(0,z.jsx)(f.l0,{children:(0,z.jsxs)(p.gC,{alignItems:"start",spacing:6,children:[W?(0,z.jsx)(k.Z,{label:"Vendor name",options:T,onVendorSelected:te,isCreate:!0,lockedForGVL:H}):(0,z.jsx)(b.j0,{id:"name",name:"name",isRequired:!0,label:"Vendor name",tooltip:"Give the system a unique, and relevant name for reporting purposes. e.g. \u201cEmail Data Warehouse\u201d",variant:"stacked"}),(0,z.jsx)(R,{showSuggestions:"showing"===Y,isCreate:!0,disabled:H}),(0,z.jsxs)(u.hE,{size:"sm",width:"100%",justifyContent:"space-between",children:[(0,z.jsx)(u.zx,{variant:"outline",onClick:function(){J(),i()},children:"Cancel"}),(0,z.jsx)(u.zx,{type:"submit",variant:"primary",isDisabled:M||!n||!t,isLoading:M,"data-testid":"save-btn",children:"Save vendor"})]})]})})]})})}})]})}},37761:function(e,n,t){t.d(n,{E:function(){return i}});var i=function(e){return e.toLowerCase().replace(/ /g,"_").replace(/[^a-zA-Z0-9._<>-]/g,"")}},1504:function(e,n,t){var i=t(34896),r=t(29073),a=t(24246);n.Z=function(){return(0,a.jsx)(i.xu,{mb:"6",maxW:"720px","data-testid":"locked-for-GVL-notice",children:(0,a.jsx)(r.Z,{title:"This system is part of the TCF Global Vendor List (GVL)",description:(0,a.jsxs)(a.Fragment,{children:["As a result, the system fields are not editable as they come directly from Fides Compass and the Global Vendor List (GVL). In some cases where the legal basis has been declared to be flexible, you may update the legal basis for particular data uses."," ",(0,a.jsx)(i.rU,{href:"https://fid.es/tcf_gvl",isExternal:!0,color:"complimentary.500",children:"For more information on the Global Vendor List, click here."})]})})})}},88491:function(e,n,t){t.d(n,{Z:function(){return S}});var i=t(97865),r=t(90089),a=t(90849),s=t(34896),o=t(29470),l=t(29549),c=t(92975),d=t(93235),u=t(89543),p=t(6719),f=t(34090),m=t(27378),v=t(6848),h=t(43139),g=t(13018),b=t(24246),x=(0,g.IU)({displayName:"CompassIcon",viewBox:"0 0 512 512",path:(0,b.jsx)("path",{fill:"currentColor",d:"M464 256A208 208 0 1 0 48 256a208 208 0 1 0 416 0zM0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256zm306.7 69.1L162.4 380.6c-19.4 7.5-38.5-11.6-31-31l55.5-144.3c3.3-8.5 9.9-15.1 18.4-18.4l144.3-55.5c19.4-7.5 38.5 11.6 31 31L325.1 306.7c-3.2 8.5-9.9 15.1-18.4 18.4zM288 256a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"})}),y=t(38687),_=t(51745),j=["children"];function C(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function k(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?C(Object(t),!0).forEach((function(n){(0,a.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):C(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var O=function(e){var n=e.active,t=e.disabled,i=e.onRefreshSuggestions,r={bg:n?"complimentary.500":"gray.100"};return(0,b.jsxs)(s.gC,{children:[(0,b.jsx)(s.LZ,{minHeight:"18px"}),(0,b.jsxs)(o.v2,{children:[(0,b.jsx)(o.j2,k({as:l.hU,size:"sm",isDisabled:t,icon:(0,b.jsx)(x,{color:n?"white":"gray.700",boxSize:4}),"aria-label":"Update information from Compass","data-testid":"refresh-suggestions-btn",_hover:{_disabled:r}},r)),(0,b.jsx)(o.qy,{children:(0,b.jsx)(o.sN,{onClick:i,children:(0,b.jsx)(s.xv,{fontSize:"xs",lineHeight:4,children:"Reset to Compass defaults"})})})]})]})},w=function(e){e.children;var n=(0,r.Z)(e,j);return(0,b.jsx)(u.Z.Option,k(k({},n),{},{type:"option",children:(0,b.jsxs)(s.kC,{flexDirection:"column",padding:2,children:[(0,b.jsx)(s.xv,{color:"gray.700",fontSize:"14px",lineHeight:5,fontWeight:"medium",children:n.data.label}),n.data.description?(0,b.jsx)(s.xv,{color:"gray.500",fontSize:"12px",lineHeight:4,fontWeight:"normal",children:n.data.description}):null]})}))},S=function(e){var n,t,r=e.label,a=e.isCreate,o=e.lockedForGVL,l=e.options,u=e.onVendorSelected,g=(0,v.C)(_.bN),x=(0,f.U$)({name:"name"}),j=(0,i.Z)(x,3),C=j[0],S=j[1],z=j[2].setValue,V=!(!S.touched||!S.error),P=k(k({},C),{},{value:null!==(n=C.value)&&void 0!==n?n:""}),L=(0,f.u6)(),E=L.touched,Z=L.values,D=L.setTouched,F=L.setFieldValue,R=L.validateForm,N=null!==(t=l.find((function(e){return e.value===P.value})))&&void 0!==t?t:{label:P.value,value:P.value,description:""},I=(0,m.useState)(""),G=I[0],U=I[1],q=l.filter((function(e){return e.label.toLowerCase().startsWith(G.toLowerCase())})),A=!P.value&&!Z.vendor_id,B=!!G&&q.length>0,W=o&&!a;(0,m.useEffect)((function(){R()}),[A,R]);var M=function(){z(""),U(""),F("vendor_id",void 0),u(void 0)},T=(0,b.jsx)(c.NI,{isInvalid:V,isRequired:!0,width:"100%",children:(0,b.jsxs)(s.gC,{alignItems:"start",position:"relative",width:"100%",children:[(0,b.jsxs)(s.Ug,{spacing:1,children:[(0,b.jsx)(h.__,{htmlFor:"name",fontSize:"xs",my:0,mr:1,children:r}),(0,b.jsx)(y.Z,{label:"Enter the system name"})]}),(0,b.jsx)(s.xu,{width:"100%","data-testid":"input-name",children:(0,b.jsx)(p.Z,{name:"name",id:"name",options:q,isRequired:!0,value:N,onBlur:function(e){P.onBlur(e),G&&z(G),D(k(k({},E),{},{name:!0}),!G)},onChange:function(e,n){return function(e,n){if("clear"!==n.action){if(z(e?e.label:""),D(k(k({},E),{},{vendor_id:!0,name:!0}),"create-option"!==n.action),e){var t=l.some((function(n){return n.value===e.value}))?e.value:void 0;F("vendor_id",t),u(t)}}else M()}(e,n)},onInputChange:function(e){return U(e)},inputValue:G,size:"sm",onKeyDown:function(e){"Tab"===e.key&&G&&q.length>0&&G!==q[0].label&&(U(q[0].label),z(q[0].value))},tabSelectsValue:B,classNamePrefix:"custom-select",placeholder:"Enter system name...",instanceId:"select-name",isDisabled:W,menuPosition:"absolute",isSearchable:!0,isClearable:!!G,focusBorderColor:"primary.600",formatCreateLabel:function(e){return'Create new system "'.concat(e,'"...')},chakraStyles:{container:function(e){return k(k({},e),{},{flexGrow:1,backgroundColor:"white"})},option:function(e,n){return k(k({},e),{},{background:n.isSelected||n.isFocused?"gray.50":"unset"})},dropdownIndicator:function(e){return k(k({},e),{},{display:"none"})},indicatorSeparator:function(e){return k(k({},e),{},{display:"none"})}},components:{Option:w}})}),(0,b.jsx)(h.Bc,{isInvalid:V,message:S.error,fieldName:"name"}),(0,b.jsxs)(s.xv,{"aria-hidden":!0,position:"absolute",backgroundColor:"transparent",style:{marginTop:"31.52px",marginLeft:"13px"},pointerEvents:"none",zIndex:1,fontSize:"sm",children:[(0,b.jsx)(s.xv,{as:"span",color:"transparent",children:G}),G&&q.length>0?(0,b.jsx)(s.xv,{as:"span",color:"complimentary.500",children:q[0].label.substring(G.length)}):null]})]})});return(0,b.jsxs)(s.Ug,{alignItems:"flex-start",width:"full",children:[A?T:(0,b.jsx)(h.j0,{id:"name",name:"name",label:"System name",tooltip:"Enter the system name",variant:"stacked",disabled:W,isRequired:!0,inputRightElement:W?null:(0,b.jsx)(d.P,{onClick:M,size:"sm","data-testid":"clear-btn"})}),(0,b.jsx)(O,{active:!!Z.vendor_id||B,disabled:!Z.vendor_id||"showing"===g,onRefreshSuggestions:function(){return u(Z.vendor_id)}})]})}},16446:function(e,n,t){t.d(n,{U:function(){return i}});var i=function(e){var n,t=e.data_categories.flatMap((function(e){return e.split(",")}));return{data_use:e.data_use,data_categories:t,features:e.features,legal_basis_for_processing:e.legal_basis_for_processing,flexible_legal_basis_for_processing:e.flexible_legal_basis_for_processing,retention_period:e.retention_period?e.retention_period:"",cookies:null===(n=e.cookies)||void 0===n?void 0:n.map((function(e){return{name:e.name,domain:e.domain,path:e.path}}))}}}}]);