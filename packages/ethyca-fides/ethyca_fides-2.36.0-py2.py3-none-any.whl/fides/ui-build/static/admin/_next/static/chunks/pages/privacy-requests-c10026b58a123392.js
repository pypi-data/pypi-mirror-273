(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2369],{10685:function(e,t,r){"use strict";var n=r(34896),i=r(73452),s=r(24246);t.Z=function(e){var t=e.title,r=e.text;return(0,s.jsxs)(n.Ug,{backgroundColor:"gray.50",border:"1px solid",borderColor:"blue.400",borderRadius:"md",justifyContent:"space-between",py:4,px:6,"data-testid":"empty-state",children:[(0,s.jsx)(i.ii,{alignSelf:"start",color:"blue.400",mt:.5}),(0,s.jsxs)(n.kC,{direction:"column",gap:2,children:[(0,s.jsx)(n.X6,{fontSize:"md",children:t}),(0,s.jsx)(n.xv,{fontSize:"sm",color:"gray.600",lineHeight:"5",children:r})]})]})}},99967:function(e,t,r){"use strict";var n=r(34896),i=r(29549),s=r(24246);t.Z=function(e){var t=e.page,r=e.size,o=e.total,a=e.handleNextPage,c=e.handlePreviousPage,u=(t-1)*r+1,l=Math.min(o,t*r);return(0,s.jsxs)(n.kC,{justifyContent:"space-between",mt:6,children:[(0,s.jsx)(n.xv,{fontSize:"xs",color:"gray.600",children:o>0?(0,s.jsxs)(s.Fragment,{children:["Showing ",Number.isNaN(u)?0:u," to"," ",Number.isNaN(l)?0:l," of"," ",Number.isNaN(o)?0:o," results"]}):"0 results"}),(0,s.jsxs)("div",{children:[(0,s.jsx)(i.zx,{disabled:t<=1,onClick:c,mr:2,size:"sm",children:"Previous"}),(0,s.jsx)(i.zx,{disabled:t*r>=o,onClick:a,size:"sm",children:"Next"})]})]})}},63238:function(e,t,r){"use strict";r.d(t,{Tg:function(){return o}});var n=r(6848),i=r(67788),s=r(24246),o=function(e){return(0,n.C)(i.uu).filter((function(t){return e.includes(t)})).length>0};t.ZP=function(e){var t=e.scopes,r=e.children;return o(t)?(0,s.jsx)(s.Fragment,{children:r}):null}},77778:function(e,t,r){"use strict";r.d(t,{Z:function(){return p}});var n=r(97865),i=r(73679),s=r(34896),o=r(29470),a=r(9992),c=r(29549),u=r(5008),l=r(27378),d=r(77751),h=r(24246),f=function(e){var t=e.defaultValues,r=e.items,a=e.onSelection,u=(0,l.useState)(r),f=u[0],p=u[1];return(0,h.jsxs)(o.qy,{lineHeight:"1rem",p:"0",children:[(0,h.jsxs)(s.kC,{borderBottom:"1px",borderColor:"gray.200",cursor:"auto",p:"8px",children:[(0,h.jsx)(c.zx,{onClick:function(){p(r),a(new Map)},size:"xs",variant:"outline",children:"Clear"}),(0,h.jsx)(s.LZ,{}),(0,h.jsx)(c.zx,{backgroundColor:"primary.800",color:"white",onClick:function(){a(f)},size:"xs",_hover:{bg:"primary.400"},_active:{bg:"primary.500"},children:"Done"})]}),(0,h.jsx)(s.xu,{maxH:"360px",overflow:"auto",children:(0,h.jsx)(d.cO,{colorScheme:"purple",defaultValue:t,onChange:function(e){var t=new Map(f);t.forEach((function(e,r){t.set(r,!1)})),e.forEach((function(e){t.set(e,!0)})),p(t)},children:(0,i.Z)(r).sort().map((function(e){var t=(0,n.Z)(e,1)[0];return(0,h.jsx)(o.sN,{paddingTop:"10px",paddingRight:"8.5px",paddingBottom:"10px",paddingLeft:"8.5px",_focus:{bg:"gray.100"},children:(0,h.jsx)(d.XZ,{"aria-label":t,isChecked:r.get(t),spacing:".5rem",value:t,width:"100%",children:(0,h.jsx)(s.xv,{fontSize:"0.75rem",children:t})})},t)}))})})]})},p=function(e){var t=e.closeOnSelect,r=void 0!==t&&t,d=e.list,p=e.onChange,v=e.selectedList,x=e.label,j=e.tooltipDisabled,m=void 0!==j&&j,b=e.tooltipPlacement,y=void 0===b?"auto":b,g=e.width,C=new Map(d),O=(0,l.useState)(!1),_=O[0],S=O[1],w=function(){S(!1)},P=function(){return m?x:v.size>0?(0,i.Z)(v.keys()).sort().join(", "):x};return(0,h.jsx)(s.xu,{children:(0,h.jsxs)(o.v2,{closeOnSelect:r,isLazy:!0,onClose:w,onOpen:function(){S(!0)},strategy:"fixed",children:[(0,h.jsx)(a.u,{fontSize:".75rem",hasArrow:!0,"aria-label":"",label:P(),lineHeight:"1.25rem",isDisabled:m||!(v.size>0),placement:y,children:(0,h.jsxs)(o.j2,{"aria-label":P(),as:c.zx,fontWeight:"normal",rightIcon:(0,h.jsx)(u.mC,{}),size:"sm",variant:"outline",_active:{bg:"none"},_hover:{bg:"none"},children:[!m&&(0,h.jsx)(s.xv,{display:"inline-block",isTruncated:!0,width:g,children:P()}),m&&(0,h.jsxs)(s.Ug,{children:[(0,h.jsx)(s.xv,{children:P()}),v.size>0&&(0,h.jsx)(s.xv,{color:"complimentary.500",children:v.size})]})]})}),_?(0,h.jsx)(f,{defaultValues:(0,i.Z)(v.keys()),items:C,onSelection:function(e){var t=new Map((0,i.Z)(e).filter((function(e){return!0===(0,n.Z)(e,2)[1]})));p((0,i.Z)(t.keys())),w()}}):null]})})}},24753:function(e,t,r){"use strict";r.d(t,{MA:function(){return l},Vo:function(){return h},t5:function(){return d}});var n=r(90849),i=r(34896),s=r(24246);function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var c=function(e){var t=e.children;return(0,s.jsxs)(i.xv,{"data-testid":"toast-success-msg",children:[(0,s.jsx)("strong",{children:"Success:"})," ",t]})},u=function(e){var t=e.children;return(0,s.jsxs)(i.xv,{"data-testid":"toast-error-msg",children:[(0,s.jsx)("strong",{children:"Error:"})," ",t]})},l={variant:"subtle",position:"top",description:"",duration:5e3,status:"success",isClosable:!0},d=function(e){var t=(0,s.jsx)(c,{children:e});return a(a({},l),{description:t})},h=function(e){var t=(0,s.jsx)(u,{children:e});return a(a({},l),{description:t,status:"error"})}},24330:function(e,t,r){"use strict";r.d(t,{DE:function(){return s},MP:function(){return n},qX:function(){return i}});var n=new Map([["Approved","approved"],["Canceled","canceled"],["Completed","complete"],["Denied","denied"],["Error","error"],["In Progress","in_processing"],["New","pending"],["Paused","paused"],["Unverified","identity_unverified"],["Requires input","requires_input"]]),i={mailgun:"mailgun",twilio_email:"twilio_email",twilio_text:"twilio_text"},s={local:"local",s3:"s3"}},19153:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return _e}});var n=r(51471),i=r(34896),s=r(65218),o=r.n(s),a=r(27378),c=r(90768),u=r(63238),l=r(90849),d=r(90089),h=r(55732),f=r(97865),p=r(34707),v=r.n(p),x=r(70409),j=r(60530),m=r(21084),b=r(29549),y=r(78624),g=r(10685),C=r(24753),O=r(51365),_=r(34090),S=r(14633),w=r(43139);function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach((function(t){(0,l.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var E=function(e,t){return null===t||void 0===t?void 0:t.find((function(t){return t.policy_key===e}))},q=r(288),Z=r(24246);function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function R(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach((function(t){(0,l.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var D={is_verified:!1,policy_key:"",identity:{}},z=function(e){var t=e.identityInputs;return t?(0,Z.jsxs)(Z.Fragment,{children:[t.email?(0,Z.jsx)(w.j0,{name:"identity.email",label:"User email address",isRequired:t.email===q.R9.email.REQUIRED,variant:"stacked"}):null,t.phone?(0,Z.jsx)(w.j0,{name:"identity.phone_number",label:"User phone number",isRequired:t.phone===q.R9.phone.REQUIRED,variant:"stacked"}):null]}):null},T=function(e){var t=e.customFieldInputs;if(!t)return null;var r=Object.entries(t);return(0,Z.jsx)(Z.Fragment,{children:r.map((function(e){var t=(0,f.Z)(e,2),r=t[0],n=t[1];return n.hidden?null:(0,Z.jsx)(w.j0,{name:"custom_privacy_request_fields.".concat(r,".value"),label:n.label,isRequired:n.required,variant:"stacked"},r)}))})},L=function(e){var t=e.onSubmit,r=e.onCancel,n=(0,O.xv)().data;return(0,Z.jsx)(_.J9,{initialValues:D,onSubmit:t,validationSchema:function(){return(0,S.Vo)((function(e){return function(e){var t,r;if(!e)return S.Ry().shape({policy_key:S.Z_().required().label("Request type")});var n=e.custom_privacy_request_fields?Object.entries(e.custom_privacy_request_fields).map((function(e){var t=(0,f.Z)(e,2),r=t[0],n=t[1];return(0,l.Z)({},r,S.Ry().shape({value:n.required&&!n.hidden?S.Z_().required().label(n.label):S.Z_().nullable()}))})).reduce((function(e,t){return k(k({},e),t)}),{}):{};return S.Ry().shape({policy_key:S.Z_().required().label("Request type"),identity:S.Ry().shape({email:"required"===(null===(t=e.identity_inputs)||void 0===t?void 0:t.email)?S.Z_().email().required().label("Email address"):S.Z_().nullable(),phone_number:"required"===(null===(r=e.identity_inputs)||void 0===r?void 0:r.phone)?S.Z_().matches(/^\+?[1-9]\d{1,14}$/,"Phone number must be formatted correctly (e.g. 15555555555)").required().label("Phone number"):S.Z_().matches(/^\+?[1-9]\d{1,14}$/,"Phone number must be formatted correctly (e.g. 15555555555)").nullable()}),custom_privacy_request_fields:S.Ry().shape(n)})}(E(e.policy_key,null===n||void 0===n?void 0:n.actions))}))},children:function(e){var t,s=e.values,o=e.dirty,a=e.isValid,c=e.isSubmitting,u=e.setFieldValue,d=E(s.policy_key,null===n||void 0===n?void 0:n.actions);return(0,Z.jsx)(_.l0,{children:(0,Z.jsxs)(i.Kq,{spacing:6,mb:2,children:[(0,Z.jsx)(w.AP,{name:"policy_key",label:"Request type",options:null!==(t=null===n||void 0===n?void 0:n.actions.map((function(e){return{label:e.title,value:e.policy_key}})))&&void 0!==t?t:[],onChange:function(e){return function(e){var t=E(e.value,null===n||void 0===n?void 0:n.actions);if(null!==t&&void 0!==t&&t.custom_privacy_request_fields){var r=Object.entries(t.custom_privacy_request_fields).map((function(e){var t=(0,f.Z)(e,2),r=t[0],n=t[1];return(0,l.Z)({},r,{label:n.label,value:n.default_value})})).reduce((function(e,t){return R(R({},e),t)}),{});u("custom_privacy_request_fields",r)}else u("custom_privacy_request_fields",void 0)}(e)},variant:"stacked",isRequired:!0}),(0,Z.jsx)(z,{identityInputs:null===d||void 0===d?void 0:d.identity_inputs}),(0,Z.jsx)(T,{customFieldInputs:null===d||void 0===d?void 0:d.custom_privacy_request_fields}),(0,Z.jsx)(w.Xl,{name:"is_verified",label:"I confirm that I have verified this user information"}),(0,Z.jsxs)(b.hE,{alignSelf:"end",spacing:0,children:[(0,Z.jsx)(b.zx,{variant:"outline",size:"sm",onClick:r,mr:4,children:"Cancel"}),(0,Z.jsx)(b.zx,{type:"submit",colorScheme:"primary",size:"sm",isDisabled:!s.is_verified||!o||!a,isLoading:c,"data-testid":"submit-btn",children:"Submit"})]})]})})}})},A=r(33167),F=["is_verified"];function M(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function N(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?M(Object(r),!0).forEach((function(t){(0,l.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var U=function(e){var t=e.isOpen,r=e.onClose,n=(0,O.M6)(),s=(0,f.Z)(n,1)[0],o=(0,x.pm)(),a=function(){var e=(0,h.Z)(v().mark((function e(t){var n,i,a,c;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.is_verified,n=(0,d.Z)(t,F),i=n.custom_privacy_request_fields?Object.entries(n.custom_privacy_request_fields).map((function(e){var t=(0,f.Z)(e,2),r=t[0],n=t[1];return n.value?(0,l.Z)({},r,n):{}})).reduce((function(e,t){return N(N({},e),t)}),{}):void 0,a=N(N({},n),{},{custom_privacy_request_fields:i}),e.next=5,s([a]);case 5:c=e.sent,(0,A.isErrorResult)(c)?o((0,C.Vo)((0,y.e$)(c.error,"An error occurred while creating this privacy request. Please try again"))):o((0,C.t5)("Privacy request created")),r();case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,Z.jsxs)(j.u_,{isOpen:t,onClose:r,size:"2xl",isCentered:!0,children:[(0,Z.jsx)(j.ZA,{}),(0,Z.jsxs)(j.hz,{"data-testid":"submit-request-modal",children:[(0,Z.jsx)(j.xB,{children:"Submit privacy request"}),(0,Z.jsx)(j.fe,{children:(0,Z.jsxs)(i.Kq,{spacing:4,children:[(0,Z.jsx)(g.Z,{title:"Warning: You are bypassing identity verification",text:"You are bypassing Fides' built-in identity verification step. Please ensure that you are only entering information on behalf of a verified and approved user's privacy request."}),(0,Z.jsx)(L,{onSubmit:a,onCancel:function(){return r()}})]})})]})]})},B=function(){var e=(0,m.qY)(),t=e.onOpen,r=e.isOpen,n=e.onClose;return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(U,{isOpen:r,onClose:n}),(0,Z.jsx)(b.zx,{colorScheme:"primary",size:"sm",onClick:t,"data-testid":"submit-request-btn",children:"Submit request"})]})},V=r(9408),X=r(73679),H=r(32751),W=r(5008),K=r(77778),Y=r(95946),Q=r(60245),$=r(45802),J=r(24330);function G(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ee(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?G(Object(r),!0).forEach((function(t){(0,l.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):G(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var te,re=function(e){var t=e.revealPII,r=e.setRevealPII,n=function(e){var t=(0,Q.v9)(O.dp),r=(0,Q.v9)($.rK),n=(0,Q.I0)(),i=(0,x.pm)(),s=(0,a.useCallback)((function(e){var t=[];e.forEach((function(e){J.MP.forEach((function(r,n){n===e&&t.push(r)}))})),n((0,O.CI)(t))}),[n]),o=function(){var e=(0,h.Z)(v().mark((function e(){var n;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,O.py)(ee(ee({},t),{},{token:r}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),n=e.t0 instanceof Error?e.t0.message:"Unknown error occurred";case 8:n&&i({description:"".concat(n),duration:5e3,status:"error"});case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}(),c=function(e){var t=new Map;return J.MP.forEach((function(r,n){var i=!1;e.includes(r)&&(i=!0),t.set(n,i)})),t},u=(0,a.useMemo)((function(){return c(t.status||[])}),[t.status]),l=new Map((0,X.Z)(u).filter((function(e){return!0===(0,f.Z)(e,2)[1]})));return ee(ee({handleSearchChange:function(e){return n((0,O.Nl)(e.target.value))},handleStatusChange:s,handleFromChange:function(e){return n((0,O.su)(null===e||void 0===e?void 0:e.target.value))},handleToChange:function(e){return n((0,O.Ue)(null===e||void 0===e?void 0:e.target.value))},handleClearAllFilters:function(){e(!1),n((0,O.Mk)())},handleDownloadClick:o,loadStatusList:c},t),{},{selectedStatusList:l,statusList:u})}(r),s=n.handleSearchChange,o=n.handleStatusChange,c=n.handleFromChange,u=n.handleToChange,l=n.handleClearAllFilters,d=n.handleDownloadClick,p=n.id,j=n.from,m=n.selectedStatusList,y=n.statusList,g=n.to;return(0,Z.jsxs)(i.Kq,{direction:"row",mb:6,flexWrap:"wrap",gap:2,children:[(0,Z.jsx)(K.Z,{label:"Select Status",list:y,selectedList:m,width:"144px",onChange:o,tooltipPlacement:"top"}),(0,Z.jsxs)(H.BZ,{size:"sm",flex:1,marginStart:"0px !important",children:[(0,Z.jsx)(H.Z8,{pointerEvents:"none",children:(0,Z.jsx)(W.PT,{color:"gray.300",w:"17px",h:"17px"})}),(0,Z.jsx)(H.II,{autoComplete:"off",autoFocus:!0,type:"search",minWidth:200,placeholder:"Search Request ID",spellCheck:!1,size:"sm",borderRadius:"md",value:p,name:"search",onChange:s})]}),(0,Z.jsxs)(H.BZ,{size:"sm",flex:1,marginStart:"0px !important",children:[(0,Z.jsx)(H.Ui,{borderRadius:"md",children:"From"}),(0,Z.jsx)(H.II,{type:"date",name:"From",value:j,max:g||void 0,onChange:c,borderRadius:"md"})]}),(0,Z.jsxs)(H.BZ,{size:"sm",flex:1,marginStart:"0px !important",children:[(0,Z.jsx)(H.Ui,{borderRadius:"md",children:"To"}),(0,Z.jsx)(H.II,{type:"date",borderRadius:"md",name:"To",value:g,min:j||void 0,onChange:u})]}),(0,Z.jsxs)(i.kC,{flexShrink:0,alignItems:"center",children:[(0,Z.jsx)(i.xv,{fontSize:"xs",mr:2,size:"sm",children:"Reveal PII"}),(0,Z.jsx)(Y.Z,{revealPII:t,onChange:r})]}),(0,Z.jsx)(b.zx,{variant:"ghost",flexShrink:0,rightIcon:(0,Z.jsx)(W.$I,{}),size:"sm",onClick:d,children:"Download"}),(0,Z.jsx)(b.zx,{variant:"ghost",flexShrink:0,rightIcon:(0,Z.jsx)(W.LG,{width:"17px"}),size:"sm",onClick:l,children:"Clear all filters"})]})},ne=r(40240),ie=r(77751),se=r(6848),oe=r(99967),ae=r(23286),ce=r(29470),ue=r(25175),le=r(86677),de=r(64860),he=r(13807),fe=r(19099),pe=r(1540),ve=r(1326),xe=r(40377),je=r(20970),me=r(30199),be=function(e){var t=e.isChecked,r=e.onCheckChange,n=e.request,s=e.revealPII,o=function(e){var t=(0,x.pm)(),r=(0,a.useRef)(null),n=(0,a.useState)(!1),i=n[0],s=n[1],o=(0,a.useState)(!1),c=o[0],u=o[1],l=(0,a.useState)(!1),d=l[0],h=l[1],f=(0,m.VP)(e.id).onCopy,p=(0,le.useRouter)();return{hovered:i,focused:c,menuOpen:d,resetSharedModalStates:function(){u(!1),s(!1),h(!1)},handleMenuClose:function(){return h(!1)},handleMenuOpen:function(){return h(!0)},handleMouseEnter:function(){return s(!0)},handleMouseLeave:function(){return s(!1)},handleFocus:function(){return u(!0)},handleBlur:function(){return u(!1)},handleIdCopy:function(){f(),t({title:"Request ID copied",duration:5e3,render:function(){return(0,Z.jsx)(ae.bZ,{bg:"gray.600",borderRadius:"6px",display:"flex",children:(0,Z.jsx)(ae.Cd,{color:"white",children:"Request ID copied"})})},containerStyle:{minWidth:"0px"}})},hoverButtonRef:r,shiftFocusToHoverMenu:function(){r.current&&r.current.focus()},handleViewDetails:function(){var t="/privacy-requests/".concat(e.id);p.push(t)}}}(n),c=o.hovered,u=o.handleMenuOpen,l=o.handleMenuClose,d=o.handleMouseEnter,h=o.handleMouseLeave,f=o.handleIdCopy,p=o.menuOpen,v=o.hoverButtonRef,j=o.shiftFocusToHoverMenu,y=o.handleFocus,g=o.handleBlur,C=o.resetSharedModalStates,O=o.focused,_=o.handleViewDetails,S=c||p||O;return(0,Z.jsxs)(ne.Tr,{_hover:{bg:"gray.50"},bg:S?"gray.50":"white",onMouseEnter:d,onMouseLeave:h,height:"36px","data-testid":"privacy-request-row-".concat(n.status),children:[(0,Z.jsx)(ne.Td,{px:2,children:(0,Z.jsx)(ie.XZ,{"aria-label":"Select request",isChecked:!!t,isDisabled:"error"!==n.status,onChange:function(e){return r(n.id,e.target.checked)}})}),(0,Z.jsx)(ne.Td,{pl:0,py:1,children:(0,Z.jsx)(fe.Z,{status:n.status})}),(0,Z.jsx)(ne.Td,{py:1,children:(0,Z.jsx)(de.Z,{daysLeft:n.days_left,includeText:!1,status:n.status})}),(0,Z.jsx)(ne.Td,{py:1,children:(0,Z.jsx)(pe.Z,{rules:n.policy.rules})}),(0,Z.jsx)(ne.Td,{py:1,children:(0,Z.jsx)(i.xv,{fontSize:"xs",children:(0,Z.jsx)(he.Z,{data:n.identity&&(n.identity.email.value||n.identity.phone_number.value)||"",revealPII:s})})}),(0,Z.jsx)(ne.Td,{py:1,children:(0,Z.jsx)(i.xv,{fontSize:"xs",children:(0,ve.p6)(n.created_at)})}),(0,Z.jsx)(ne.Td,{py:1,children:(0,Z.jsx)(i.xv,{fontSize:"xs",children:(0,Z.jsx)(he.Z,{data:n.reviewer?n.reviewer.username:"",revealPII:s})})}),(0,Z.jsx)(ne.Td,{py:1,children:(0,Z.jsx)(i.xv,{isTruncated:!0,fontSize:"xs",maxWidth:"87px",children:n.id})}),(0,Z.jsxs)(ne.Td,{pr:0,py:1,textAlign:"end",position:"relative",children:[(0,Z.jsx)(b.zx,{size:"xs",variant:"ghost",mr:2.5,onFocus:j,tabIndex:S?-1:0,"data-testid":"privacy-request-more-btn",children:(0,Z.jsx)(W.nX,{color:"gray.700",w:18,h:18})}),(0,Z.jsxs)(b.hE,{isAttached:!0,variant:"outline",position:"absolute",right:2.5,top:"50%",transform:"translate(1px, -50%)",opacity:S?1:0,pointerEvents:S?"auto":"none",onFocus:y,onBlur:g,shadow:"base",borderRadius:"md",backgroundColor:"white",children:["error"===n.status&&(0,Z.jsx)(me.Z,{buttonProps:{mr:"-px",size:"xs"},handleBlur:g,subjectRequest:n}),"pending"===n.status&&(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(xe.Z,{subjectRequest:n,onClose:C,ref:v,children:"Approve"}),(0,Z.jsx)(je.Z,{subjectRequest:n,onClose:C,children:"Deny"})]}),(0,Z.jsxs)(ce.v2,{onOpen:u,onClose:l,children:[(0,Z.jsx)(ce.j2,{as:b.zx,size:"xs",bg:"white",ref:"pending"!==n.status?v:null,children:(0,Z.jsx)(W.nX,{color:"gray.700",w:18,h:18})}),(0,Z.jsx)(ue.h_,{children:(0,Z.jsxs)(ce.qy,{shadow:"xl","data-testid":"privacy-request-more-menu",children:[(0,Z.jsx)(ce.sN,{_focus:{color:"complimentary.500",bg:"gray.100"},onClick:f,children:(0,Z.jsx)(i.xv,{fontSize:"sm",children:"Copy Request ID"})}),(0,Z.jsx)(ce.sN,{_focus:{color:"complimentary.500",bg:"gray.100"},onClick:_,children:(0,Z.jsx)(i.xv,{fontSize:"sm",children:"View Details"})})]})})]})]})]})]},n.id)};!function(e){e.ASC="asc",e.DESC="desc",e.UNSELECTED="unselected"}(te||(te={}));var ye=function(e){var t=e.sortField,r=e.isLoading,n=function(e){var t=e.sortField,r=e.isLoading,n=(0,Q.v9)(O.dp),i=(0,Q.I0)(),s=(0,a.useState)(te.UNSELECTED),o=s[0],c=s[1],u=(0,a.useState)(!1),l=u[0],d=u[1];return(0,a.useEffect)((function(){r||d(!1)}),[r]),(0,a.useEffect)((function(){void 0===n.sort_direction&&c(te.UNSELECTED)}),[n]),{handleButtonClick:(0,a.useCallback)((function(){switch(d(!0),i((0,O.PU)(t)),o){case te.UNSELECTED:i((0,O.iX)(te.ASC)),c(te.ASC);break;case te.ASC:i((0,O.iX)(te.DESC)),c(te.DESC);break;case te.DESC:i((0,O.p2)()),c(te.UNSELECTED)}}),[o,c,i,t]),buttonState:o,wasButtonJustClicked:l}}({sortField:t,isLoading:r}),s=n.buttonState,o=n.handleButtonClick,c=n.wasButtonJustClicked,u=null;switch(s){case te.ASC:u=(0,Z.jsx)(W.HK,{up:!0});break;case te.DESC:u=(0,Z.jsx)(W.HK,{up:!1});break;case te.UNSELECTED:default:u=(0,Z.jsx)(W.HK,{})}return(0,Z.jsx)(i.kC,{paddingLeft:"3px",children:(0,Z.jsx)(b.hU,{variant:"ghost","aria-label":"Sort requests",icon:u,isLoading:r&&c,onClick:o})})},ge=function(e){var t=e.revealPII,r=(0,se.T)(),n=(0,se.C)(O.dp),s=(0,se.C)(O.fe),o=s.checkAll,c=s.errorRequests,u=(0,O.QA)(n),l=u.data,d=u.isFetching,h=l||{items:[],total:0},f=h.items,p=h.total,v=(0,a.useCallback)((function(){return f.filter((function(e){return"error"===e.status})).map((function(e){return e.id}))}),[f]),x=function(e,t){var n;n=t?[].concat((0,X.Z)(c),[e]):c.filter((function(t){return t!==e})),r((0,O.uT)({checkAll:t&&o,errorRequests:n}))};return(0,a.useEffect)((function(){var e;d&&null!==(e=n.status)&&void 0!==e&&e.includes("error")&&r((0,O.uT)({checkAll:!1,errorRequests:[]}))}),[r,n.status,d]),(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsxs)(ne.iA,{size:"sm","data-testid":"privacy-request-table",children:[(0,Z.jsx)(ne.hr,{children:(0,Z.jsxs)(ne.Tr,{children:[(0,Z.jsx)(ne.Th,{px:2,children:(0,Z.jsx)(ie.XZ,{"aria-label":"Select all",isChecked:o,isDisabled:!f.some((function(e){return"error"===e.status})),onChange:function(){var e=!o;r((0,O.uT)({checkAll:e,errorRequests:e?v():[]}))}})}),(0,Z.jsx)(ne.Th,{pl:0,children:"Status"}),(0,Z.jsx)(ne.Th,{children:(0,Z.jsxs)(i.kC,{alignItems:"center",children:["Days Left"," ",(0,Z.jsx)(ye,{sortField:"due_date",isLoading:d})]})}),(0,Z.jsx)(ne.Th,{children:"Request Type"}),(0,Z.jsx)(ne.Th,{children:"Subject Identity"}),(0,Z.jsx)(ne.Th,{children:"Time Received"}),(0,Z.jsx)(ne.Th,{children:"Reviewed By"}),(0,Z.jsx)(ne.Th,{children:"Request ID"}),(0,Z.jsx)(ne.Th,{})]})}),(0,Z.jsx)(ne.p3,{children:f.map((function(e){return(0,Z.jsx)(be,{isChecked:c.includes(e.id),onCheckChange:x,request:e,revealPII:t},e.id)}))})]}),(0,Z.jsx)(oe.Z,{page:n.page,size:n.size,total:p,handleNextPage:function(){r((0,O.YA)(n.page+1))},handlePreviousPage:function(){r((0,O.YA)(n.page-1))}})]})},Ce=o()((function(){return Promise.all([r.e(6155),r.e(8678)]).then(r.bind(r,58678))}),{loading:function(){return(0,Z.jsx)("div",{children:"Loading..."})},loadableGenerated:{webpack:function(){return[58678]}}}),Oe=function(){var e=function(){var e=(0,V.VY)().errorAlert,t=(0,a.useState)(!1),r=t[0],n=t[1],s=(0,a.useState)({count:0,total:0}),o=s[0],c=s[1],u=(0,a.useState)(!0),l=u[0],d=u[1],h=(0,O.tE)().data,f=(0,O.QA)({status:["error"]},{pollingInterval:15e3,skip:l}).data;return(0,a.useEffect)((function(){d(!(h&&h.notify_after_failures>0))}),[h]),(0,a.useEffect)((function(){var e=(null===f||void 0===f?void 0:f.total)||0;e>=((null===h||void 0===h?void 0:h.notify_after_failures)||0)&&e>o.total?(c({count:e-o.total,total:e}),n(!0)):n(!1)}),[null===f||void 0===f?void 0:f.total,null===h||void 0===h?void 0:h.notify_after_failures,o.total]),{processing:function(){r&&e((0,Z.jsxs)(i.xu,{children:["DSR automation has failed for"," ",(0,Z.jsx)(i.xv,{as:"span",fontWeight:"semibold",children:o.count})," ","privacy request(s). Please review the event log for further details."]}),void 0,{containerStyle:{maxWidth:"max-content"},duration:null,id:"dsrErrorAlert"})}}}(),t=e.processing,r=(0,a.useState)(!1),n=r[0],s=r[1],o=(0,c.hz)().plus;return(0,a.useEffect)((function(){t()}),[t]),(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsxs)(i.kC,{"data-testid":"privacy-requests",gap:4,children:[(0,Z.jsx)(i.X6,{mb:8,fontSize:"2xl",fontWeight:"semibold",children:"Privacy Requests"}),(0,Z.jsx)(i.LZ,{}),o?(0,Z.jsx)(u.ZP,{scopes:[q.Sh.PRIVACY_REQUEST_CREATE],children:(0,Z.jsx)(B,{})}):null,(0,Z.jsx)(Ce,{})]}),(0,Z.jsx)(re,{revealPII:n,setRevealPII:s}),(0,Z.jsx)(ge,{revealPII:n})]})},_e=function(){return(0,Z.jsx)(n.Z,{title:"Privacy Requests",children:(0,Z.jsx)(Oe,{})})}},33167:function(e,t,r){"use strict";r.d(t,{isAPIError:function(){return n.Bw},isErrorResult:function(){return n.D4}});var n=r(60041)},1565:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/privacy-requests",function(){return r(19153)}])}},function(e){e.O(0,[7751,530,3452,6842,1081,4633,9923,338,3702,7451,9774,2888,179],(function(){return t=1565,e(e.s=t);var t}));var t=e.O();_N_E=t}]);