(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[693],{40240:function(e,r,t){"use strict";t.d(r,{$R:function(){return v},Td:function(){return y},Th:function(){return x},Tr:function(){return g},hr:function(){return b},iA:function(){return f},p3:function(){return j},xJ:function(){return h}});var n=t(32393),i=t(14007),s=t(27378);function o(){return o=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},o.apply(this,arguments)}function a(e,r){if(null==e)return{};var t,n,i={},s=Object.keys(e);for(n=0;n<s.length;n++)t=s[n],r.indexOf(t)>=0||(i[t]=e[t]);return i}var c=["overflow","overflowX","className"],l=["className"],u=["placement"],d=["isNumeric"],p=["isNumeric"],h=(0,n.Gp)((function(e,r){var t,l=e.overflow,u=e.overflowX,d=e.className,p=a(e,c);return s.createElement(n.m$.div,o({ref:r,className:(0,i.cx)("chakra-table__container",d)},p,{__css:{display:"block",whiteSpace:"nowrap",WebkitOverflowScrolling:"touch",overflowX:null!=(t=null!=l?l:u)?t:"auto",overflowY:"hidden",maxWidth:"100%"}}))})),f=(0,n.Gp)((function(e,r){var t=(0,n.jC)("Table",e),c=(0,n.Lr)(e),u=c.className,d=a(c,l);return s.createElement(n.Fo,{value:t},s.createElement(n.m$.table,o({role:"table",ref:r,__css:t.table,className:(0,i.cx)("chakra-table",u)},d)))}));i.Ts&&(f.displayName="Table");var m=(0,n.Gp)((function(e,r){var t=e.placement,i=void 0===t?"bottom":t,c=a(e,u),l=(0,n.yK)();return s.createElement(n.m$.caption,o({},c,{ref:r,__css:o({},l.caption,{captionSide:i})}))}));i.Ts&&(m.displayName="TableCaption");var b=(0,n.Gp)((function(e,r){var t=(0,n.yK)();return s.createElement(n.m$.thead,o({},e,{ref:r,__css:t.thead}))})),j=(0,n.Gp)((function(e,r){var t=(0,n.yK)();return s.createElement(n.m$.tbody,o({},e,{ref:r,__css:t.tbody}))})),v=(0,n.Gp)((function(e,r){var t=(0,n.yK)();return s.createElement(n.m$.tfoot,o({},e,{ref:r,__css:t.tfoot}))})),x=(0,n.Gp)((function(e,r){var t=e.isNumeric,i=a(e,d),c=(0,n.yK)();return s.createElement(n.m$.th,o({},i,{ref:r,__css:c.th,"data-is-numeric":t}))})),g=(0,n.Gp)((function(e,r){var t=(0,n.yK)();return s.createElement(n.m$.tr,o({role:"row"},e,{ref:r,__css:t.tr}))})),y=(0,n.Gp)((function(e,r){var t=e.isNumeric,i=a(e,p),c=(0,n.yK)();return s.createElement(n.m$.td,o({role:"gridcell"},i,{ref:r,__css:c.td,"data-is-numeric":t}))}))},96156:function(e,r,t){"use strict";t.d(r,{l:function(){return s}});var n=t(13018),i=t(24246),s=(0,n.IU)({displayName:"TrashCanSolidIcon",viewBox:"0 0 12 15",path:(0,i.jsx)("path",{d:"M8.37857 1.18083C8.23393 0.892838 7.93661 0.710938 7.6125 0.710938H4.3875C4.06339 0.710938 3.76607 0.892838 3.62143 1.18083L3.42857 1.56094H0.857143C0.383036 1.56094 -1.19209e-07 1.94158 -1.19209e-07 2.41094C-1.19209e-07 2.8803 0.383036 3.26094 0.857143 3.26094H11.1429C11.6162 3.26094 12 2.8803 12 2.41094C12 1.94158 11.6162 1.56094 11.1429 1.56094H8.57143L8.37857 1.18083ZM11.167 4.11094H0.857143V12.6109C0.857143 13.5486 1.62589 14.3109 2.57143 14.3109H9.45268C10.3754 14.3109 11.167 13.5486 11.167 12.6109V4.11094ZM9.02411 6.23594V12.1859C9.02411 12.4197 8.80714 12.6109 8.59554 12.6109C8.33571 12.6109 8.16696 12.4197 8.16696 12.1859V6.23594C8.16696 6.00219 8.33571 5.81094 8.59554 5.81094C8.80714 5.81094 9.02411 6.00219 9.02411 6.23594ZM6.45268 6.23594V12.1859C6.45268 12.4197 6.23571 12.6109 6.02411 12.6109C5.76429 12.6109 5.57143 12.4197 5.57143 12.1859V6.23594C5.57143 6.00219 5.76429 5.81094 6.02411 5.81094C6.23571 5.81094 6.45268 6.00219 6.45268 6.23594ZM3.85714 6.23594V12.1859C3.85714 12.4197 3.66429 12.6109 3.42857 12.6109C3.19286 12.6109 3 12.4197 3 12.1859V6.23594C3 6.00219 3.19286 5.81094 3.42857 5.81094C3.66429 5.81094 3.85714 6.00219 3.85714 6.23594Z",fill:"currentColor"})})},63238:function(e,r,t){"use strict";t.d(r,{Tg:function(){return o}});var n=t(6848),i=t(67788),s=t(24246),o=function(e){return(0,n.C)(i.uu).filter((function(r){return e.includes(r)})).length>0};r.ZP=function(e){var r=e.scopes,t=e.children;return o(r)?(0,s.jsx)(s.Fragment,{children:t}):null}},44845:function(e,r,t){"use strict";var n=t(90849),i=t(90089),s=t(32751),o=t(5008),a=t(29549),c=t(24246),l=["search","onChange","withIcon","onClear","placeholder"];function u(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function d(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?u(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):u(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}r.Z=function(e){var r=e.search,t=e.onChange,n=e.withIcon,u=e.onClear,p=e.placeholder,h=(0,i.Z)(e,l);return(0,c.jsxs)(s.BZ,{size:"sm",minWidth:"308px",children:[n?(0,c.jsx)(s.Z8,{pointerEvents:"none",children:(0,c.jsx)(o.PT,{color:"gray.300",w:"17px",h:"17px"})}):null,(0,c.jsx)(s.II,d({autoComplete:"off",type:"search",minWidth:200,size:"sm",borderRadius:"md",value:r,name:"search",onChange:function(e){return t(e.target.value)},placeholder:p||""},h)),u?(0,c.jsx)(s.xH,{children:(0,c.jsx)(a.zx,{borderLeftRadius:0,height:"95%",right:"14px",flexShrink:0,fontWeight:"light",size:"sm",onClick:u,children:"Clear"})}):null]})}},24753:function(e,r,t){"use strict";t.d(r,{MA:function(){return u},Vo:function(){return p},t5:function(){return d}});var n=t(90849),i=t(34896),s=t(24246);function o(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function a(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?o(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var c=function(e){var r=e.children;return(0,s.jsxs)(i.xv,{"data-testid":"toast-success-msg",children:[(0,s.jsx)("strong",{children:"Success:"})," ",r]})},l=function(e){var r=e.children;return(0,s.jsxs)(i.xv,{"data-testid":"toast-error-msg",children:[(0,s.jsx)("strong",{children:"Error:"})," ",r]})},u={variant:"subtle",position:"top",description:"",duration:5e3,status:"success",isClosable:!0},d=function(e){var r=(0,s.jsx)(c,{children:e});return a(a({},u),{description:r})},p=function(e){var r=(0,s.jsx)(l,{children:e});return a(a({},u),{description:r,status:"error"})}},78098:function(e,r,t){"use strict";var n=t(90089),i=t(55732),s=t(97865),o=t(34707),a=t.n(o),c=t(70409),l=t(60530),u=t(23286),d=t(34896),p=t(29549),h=t(34090),f=t(86677),m=(t(27378),t(14633)),b=t(6848),j=t(43139),v=t(78624),x=t(60709),g=t(24753),y=t(30002),O=t(24246),w=["user"],C={username:"",usernameConfirmation:""};r.Z=function(e){var r=e.user,t=(0,n.Z)(e,w),o=t.isOpen,P=t.onClose,_=function(e){var r=e.id,t=e.username,n=e.onClose,o=(0,c.pm)(),l=(0,f.useRouter)(),u=(0,b.T)(),d=(0,y.I1)(),p=(0,s.Z)(d,1)[0],h=function(){var e=(0,i.Z)(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p(r);case 2:t=e.sent,(0,v.D4)(t)?o((0,g.Vo)((0,v.e$)(t.error))):(o((0,g.t5)("Successfully deleted user")),n()),u((0,y.Vv)(void 0)),l.push(x.e3);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{handleDeleteUser:h,validationSchema:m.Ry().shape({usernameConfirmation:m.Z_().required().oneOf([t],"Confirmation input must match the username").label("Username confirmation")})}}({id:r.id,username:r.username,onClose:P}),E=_.handleDeleteUser,T=_.validationSchema;return(0,O.jsxs)(l.u_,{isCentered:!0,isOpen:o,onClose:P,children:[(0,O.jsx)(l.ZA,{}),(0,O.jsx)(l.hz,{"data-testid":"delete-user-modal",children:(0,O.jsx)(h.J9,{initialValues:C,validationSchema:T,onSubmit:E,children:function(e){var t=e.isSubmitting,n=e.dirty,i=e.isValid;return(0,O.jsxs)(h.l0,{children:[(0,O.jsx)(l.xB,{children:"Delete User"}),(0,O.jsx)(l.ol,{}),(0,O.jsxs)(l.fe,{children:[(0,O.jsxs)(u.bZ,{status:"warning",overflow:"visible",children:[(0,O.jsx)(u.zM,{}),(0,O.jsxs)(u.X,{children:[(0,O.jsx)(d.xv,{as:"span",mb:2,children:"You are about to delete the user\xa0"}),(0,O.jsxs)(d.xv,{as:"span",mb:2,fontStyle:"italic",fontWeight:"semibold",children:[r.username,"."]}),(0,O.jsx)(d.xv,{mb:2,children:"This action cannot be undone. To confirm, please enter the user\u2019s username below."})]})]}),(0,O.jsx)(d.Kq,{direction:"column",spacing:4,children:(0,O.jsx)(j.j0,{name:"usernameConfirmation",label:"Confirm username",placeholder:"Type the username to delete"})})]}),(0,O.jsx)(l.mz,{children:(0,O.jsxs)(p.hE,{size:"sm",spacing:"2",width:"100%",children:[(0,O.jsx)(p.zx,{onClick:P,variant:"outline",width:"50%",children:"Cancel"}),(0,O.jsx)(p.zx,{colorScheme:"primary",disabled:!n||!i,isLoading:t,type:"submit",width:"50%","data-testid":"submit-btn",children:"Delete User"})]})})]})}})})]})}},75834:function(e,r,t){"use strict";t.d(r,{K:function(){return i}});var n=t(288),i=[{label:"Owner",permissions_label:"Owner",roleKey:n.A7.OWNER,description:"Owners have view and edit access to the whole organization and can create new users"},{label:"Contributor",permissions_label:"Contributor",roleKey:n.A7.CONTRIBUTOR,description:"Contributors can create new users and have view and edit access to the whole organization apart from configuring storage and messaging"},{label:"Viewer",permissions_label:"Viewer",roleKey:n.A7.VIEWER,description:"Viewers have view access to the Data Map and all systems"},{label:"Viewer & Approver",permissions_label:"Viewer & Approver",roleKey:n.A7.VIEWER_AND_APPROVER,description:"Viewer & Approvers have view access to the Data Map but can also manage Privacy Requests"},{label:"Approver",permissions_label:"Approver",roleKey:n.A7.APPROVER,description:"Approvers can only access the Privacy Requests portal to manage requests"}]},99089:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return R}});var n=t(34896),i=t(27378),s=t(90849),o=t(40240),a=t(29549),c=t(60245),l=t(6848),u=t(30002),d=t(21084),p=t(96156),h=t(86677),f=t(45802),m=t(60709),b=t(63238),j=t(75834),v=t(288),x=t(78098),g=t(24246);function y(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function O(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?y(Object(t),!0).forEach((function(r){(0,s.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):y(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var w=function(e){var r,t,i=e.user,s=(0,h.useRouter)(),c=(0,d.qY)(),y=(0,l.C)(f.dy),w=!!y&&y.id===i.id,C=(0,b.Tg)([v.Sh.USER_UPDATE])||w,P=function(){C&&s.push("".concat(m.e3,"/profile/").concat(i.id))},_=(0,u.gU)(null!==(r=i.id)&&void 0!==r?r:"",{skip:!i.id}).data,E=(0,u.d6)(null!==(t=i.id)&&void 0!==t?t:"",{skip:!i.id}).data,T=[];return _&&_.roles&&_.roles.forEach((function(e){var r=j.K.find((function(r){return r.roleKey===e}));r&&T.push(r.permissions_label)})),(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)(o.Tr,{_hover:{bg:"gray.50",cursor:C?"pointer":void 0},height:"36px","data-testid":"row-".concat(i.id),children:[(0,g.jsx)(o.Td,{pl:0,py:1,onClick:P,children:i.username}),(0,g.jsx)(o.Td,{pl:0,py:1,onClick:P,children:i.first_name}),(0,g.jsx)(o.Td,{pl:0,py:1,onClick:P,children:i.last_name}),(0,g.jsx)(o.Td,{pl:0,py:1,onClick:P,children:T.map((function(e){return(0,g.jsx)(n.Ct,{bg:"gray.500",color:"white",paddingLeft:"2",textTransform:"none",paddingRight:"8px",height:"18px",lineHeight:"18px",borderRadius:"6px",fontWeight:"500",textAlign:"center","data-testid":"user-permissions-badge",children:e},e)}))}),(0,g.jsx)(o.Td,{pl:0,py:1,onClick:P,children:(0,g.jsx)(n.Ct,{bg:"gray.500",color:"white",paddingLeft:"2",textTransform:"none",paddingRight:"8px",height:"18px",lineHeight:"18px",borderRadius:"6px",fontWeight:"500",textAlign:"center","data-testid":"user-systems-badge",children:E?E.length:0})}),(0,g.jsx)(o.Td,{pl:0,py:1,onClick:P,children:i.created_at?new Date(i.created_at).toUTCString():null}),(0,g.jsx)(b.ZP,{scopes:[v.Sh.USER_DELETE],children:(0,g.jsx)(o.Td,{pr:0,py:1,textAlign:"end",position:"relative",children:(0,g.jsx)(a.hE,{children:(0,g.jsx)(a.hU,{"aria-label":"delete",icon:(0,g.jsx)(p.l,{}),variant:"outline",size:"sm",onClick:c.onOpen,"data-testid":"delete-user-btn"})})})})]},i.id),(0,g.jsx)(x.Z,O({user:i},c))]})};function C(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function P(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?C(Object(t),!0).forEach((function(r){(0,s.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):C(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var _=function(){var e=function(){var e=(0,c.I0)(),r=(0,c.v9)(u.lq),t=(0,u.wv)(r),n=t.data,i=t.isLoading,s=n||{users:[],total:0},o=s.items,a=s.total;return P(P({},r),{},{isLoading:i,users:o,total:a,handleNextPage:function(){e((0,u.YA)(r.page+1))},handlePreviousPage:function(){e((0,u.YA)(r.page-1))}})}(),r=e.users,t=e.total,s=e.page,d=e.size,p=e.handleNextPage,h=e.handlePreviousPage,f=(s-1)*d+1,m=Math.min(t,s*d),b=(0,l.T)();return(0,i.useEffect)((function(){b((0,u.Vv)(void 0))}),[b]),(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)(o.iA,{size:"sm","data-testid":"user-management-table",children:[(0,g.jsx)(o.hr,{children:(0,g.jsxs)(o.Tr,{children:[(0,g.jsx)(o.Th,{pl:0,children:"Username"}),(0,g.jsx)(o.Th,{pl:0,children:"First Name"}),(0,g.jsx)(o.Th,{pl:0,children:"Last Name"}),(0,g.jsx)(o.Th,{pl:0,children:"Permissions"}),(0,g.jsx)(o.Th,{pl:0,children:"Assigned Systems"}),(0,g.jsx)(o.Th,{pl:0,children:"Created At"})]})}),(0,g.jsx)(o.p3,{children:null===r||void 0===r?void 0:r.map((function(e){return(0,g.jsx)(w,{user:e},e.id)}))})]}),(0,g.jsxs)(n.kC,{justifyContent:"space-between",mt:6,children:[(0,g.jsx)(n.xv,{fontSize:"xs",color:"gray.600",children:t>0?(0,g.jsxs)(g.Fragment,{children:["Showing ",Number.isNaN(f)?0:f," to"," ",Number.isNaN(m)?0:m," of"," ",Number.isNaN(t)?0:t," results"]}):"0 results"}),(0,g.jsxs)("div",{children:[(0,g.jsx)(a.zx,{disabled:s<=1,onClick:h,mr:2,size:"sm",children:"Previous"}),(0,g.jsx)(a.zx,{disabled:s*d>=t,onClick:p,size:"sm",children:"Next"})]})]})]})};_.defaultProps={users:[]};var E=_,T=t(79894),S=t.n(T),N=t(44845);function k(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}var D=function(){var e=(0,c.v9)(u.lq),r=(0,c.I0)();return function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?k(Object(t),!0).forEach((function(r){(0,s.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):k(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({handleSearchChange:function(e){r((0,u.SY)(e))}},e)},A=function(){var e=D(),r=e.handleSearchChange,t=e.username;return(0,g.jsxs)(n.Kq,{direction:"row",spacing:4,mb:6,children:[(0,g.jsx)(N.Z,{search:t,onChange:r,placeholder:"Search by Username"}),(0,g.jsx)(b.ZP,{scopes:[v.Sh.USER_CREATE],children:(0,g.jsx)(S(),{href:"".concat(m.e3,"/new"),passHref:!0,children:(0,g.jsx)(a.zx,{colorScheme:"primary",flexShrink:0,size:"sm","data-testid":"add-new-user-btn",children:"Add New User"})})})]})},Z=t(51471),R=function(){return(0,g.jsxs)(Z.Z,{title:"User Management",children:[(0,g.jsx)(n.X6,{fontSize:"2xl",fontWeight:"semibold",mb:4,children:"User Management"}),(0,g.jsx)(A,{}),(0,g.jsx)(E,{})]})}},7873:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/user-management",function(){return t(99089)}])}},function(e){e.O(0,[7751,530,6842,1081,4633,338,3702,9774,2888,179],(function(){return r=7873,e(e.s=r);var r}));var r=e.O();_N_E=r}]);