"use strict";(self.webpackChunk_osscar_appmode_jupyterlab=self.webpackChunk_osscar_appmode_jupyterlab||[]).push([[266],{266:(e,c,t)=>{t.r(c),t.d(c,{CommandIDs:()=>g,default:()=>y});var n=t(626),a=t(923),o=t(825),r=t(702),s=t(366),i=t(291),d=t(774),l=t(262),p=t(602),u=t(345);const m=new l.Token("@jupyter-appmode/jupyterlab-preview:IAppmodePreviewTracker"),f="jp-MaterialIcon jp-AppmodeIcon";class h extends d.DocumentWidget{constructor(e){super({...e,content:new a.IFrame({sandbox:["allow-same-origin","allow-scripts"]})}),window.onmessage=e=>{var c,t,n,a,o;switch(null===(c=e.data)||void 0===c?void 0:c.level){case"debug":console.debug(...null===(t=e.data)||void 0===t?void 0:t.msg);break;case"info":console.info(...null===(n=e.data)||void 0===n?void 0:n.msg);break;case"warn":console.warn(...null===(a=e.data)||void 0===a?void 0:a.msg);break;case"error":console.error(...null===(o=e.data)||void 0===o?void 0:o.msg);break;default:console.log(e)}};const{getAppmodeUrl:c,context:t,renderOnSave:n}=e;this.content.url=c(t.path),this.content.title.iconClass=f,this.renderOnSave=n,t.pathChanged.connect((()=>{this.content.url=c(t.path)}));const o=new a.ToolbarButton({iconClass:"jp-RefreshIcon",tooltip:"Reload Preview",onClick:()=>{this.reload()}}),r=a.ReactWidget.create(u.createElement("label",{className:"jp-AppmodePreview-renderOnSave"},u.createElement("input",{style:{verticalAlign:"middle"},name:"renderOnSave",type:"checkbox",defaultChecked:n,onChange:e=>{this._renderOnSave=e.target.checked}}),"Render on Save"));this.toolbar.addItem("reload",o),t&&(this.toolbar.addItem("renderOnSave",r),t.ready.then((()=>{t.fileChanged.connect((()=>{this.renderOnSave&&this.reload()}))})))}dispose(){this.isDisposed||(super.dispose(),p.Signal.clearData(this))}reload(){const e=this.content.node.querySelector("iframe");e.contentWindow&&e.contentWindow.location.reload()}get renderOnSave(){return this._renderOnSave}set renderOnSave(e){this._renderOnSave=e}}class v extends d.ABCWidgetFactory{constructor(e,c){super(c),this.getAppmodeUrl=e,this.defaultRenderOnSave=!1}createNewWidget(e){return new h({context:e,getAppmodeUrl:this.getAppmodeUrl,renderOnSave:this.defaultRenderOnSave})}}var g;t(665),function(e){e.appmodeRender="notebook:render-with-appmode",e.appmodeOpen="notebook:open-with-appmode"}(g||(g={}));class w{constructor(e){this._commands=e}createNew(e){const c=new a.ToolbarButton({className:"appmodeOpen",tooltip:"Render with Appmode",iconClass:f,onClick:()=>{this._commands.execute(g.appmodeOpen)}});return e.toolbar.insertAfter("cellType","appmodeRender",c),c}}const b={id:"@jupyter-appmode/jupyterlab-preview:plugin",autoStart:!0,requires:[i.INotebookTracker],optional:[a.ICommandPalette,n.ILayoutRestorer,s.IMainMenu,o.ISettingRegistry],provides:m,activate:(e,c,t,n,o,s)=>{const i=new a.WidgetTracker({namespace:"appmode-preview"});function d(t){const n=c.currentWidget;return!1!==t.activate&&n&&e.shell.activateById(n.id),n}function l(){return null!==c.currentWidget&&c.currentWidget===e.shell.currentWidget}function p(e){return`${r.PageConfig.getBaseUrl()}apps/${e}`}n&&n.restore(i,{command:"docmanager:open",args:e=>({path:e.context.path,factory:u.name}),name:e=>e.context.path,when:e.serviceManager.ready});const u=new v(p,{name:"Appmode-preview",fileTypes:["notebook"],modelName:"notebook"});u.widgetCreated.connect(((e,c)=>{c.context.pathChanged.connect((()=>{i.save(c)})),i.add(c)}));const m=e=>{u.defaultRenderOnSave=e.get("renderOnSave").composite};s&&Promise.all([s.load(b.id),e.restored]).then((([e])=>{m(e),e.changed.connect(m)})).catch((e=>{console.error(e.message)})),e.docRegistry.addWidgetFactory(u);const{commands:f,docRegistry:h}=e;if(f.addCommand(g.appmodeRender,{label:"Render Notebook with Appmode",execute:async e=>{const c=d(e);let t;c&&(t=c.context,await t.save(),f.execute("docmanager:open",{path:t.path,factory:"Appmode-preview",options:{mode:"split-right"}}))},isEnabled:l}),f.addCommand(g.appmodeOpen,{label:"Open with Appmode in New Browser Tab",execute:async e=>{const c=d(e);if(!c)return;await c.context.save();const t=p(c.context.path);window.open(t)},isEnabled:l}),t){const e="Notebook Operations";[g.appmodeRender,g.appmodeOpen].forEach((c=>{t.addItem({command:c,category:e})}))}o&&o.viewMenu.addGroup([{command:g.appmodeRender},{command:g.appmodeOpen}],1e3);const y=new w(f);return h.addWidgetExtension("Notebook",y),i}},y=b},646:(e,c,t)=>{t.d(c,{A:()=>d});var n=t(601),a=t.n(n),o=t(314),r=t.n(o),s=t(65),i=r()(a());i.i(s.A),i.push([e.id,".jp-AppmodeIcon {\n  background-image: var(--jp-icon-appmode);\n}\n\n.jp-AppmodePreview-renderOnSave {\n  align-items: center;\n}\n",""]);const d=i},65:(e,c,t)=>{t.d(c,{A:()=>u});var n=t(601),a=t.n(n),o=t(314),r=t.n(o),s=t(417),i=t.n(s),d=new URL(t(312),t.b),l=r()(a()),p=i()(d);l.push([e.id,`[data-jp-theme-light="true"] {\n  --jp-icon-appmode: url(${p});\n}\n\n[data-jp-theme-light="false"] {\n  --jp-icon-appmode: url(${p});\n}\n`,""]);const u=l},314:e=>{e.exports=function(e){var c=[];return c.toString=function(){return this.map((function(c){var t="",n=void 0!==c[5];return c[4]&&(t+="@supports (".concat(c[4],") {")),c[2]&&(t+="@media ".concat(c[2]," {")),n&&(t+="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {")),t+=e(c),n&&(t+="}"),c[2]&&(t+="}"),c[4]&&(t+="}"),t})).join("")},c.i=function(e,t,n,a,o){"string"==typeof e&&(e=[[null,e,void 0]]);var r={};if(n)for(var s=0;s<this.length;s++){var i=this[s][0];null!=i&&(r[i]=!0)}for(var d=0;d<e.length;d++){var l=[].concat(e[d]);n&&r[l[0]]||(void 0!==o&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=o),t&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=t):l[2]=t),a&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=a):l[4]="".concat(a)),c.push(l))}},c}},417:e=>{e.exports=function(e,c){return c||(c={}),e?(e=String(e.__esModule?e.default:e),/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),c.hash&&(e+=c.hash),/["'() \t\n]|(%20)/.test(e)||c.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e):e}},601:e=>{e.exports=function(e){return e[1]}},665:(e,c,t)=>{var n=t(72),a=t.n(n),o=t(206),r=t.n(o),s=t(659),i=t.n(s),d=t(56),l=t.n(d),p=t(540),u=t.n(p),m=t(113),f=t.n(m),h=t(646),v={};v.styleTagTransform=f(),v.setAttributes=l(),v.insert=i().bind(null,"head"),v.domAPI=r(),v.insertStyleElement=u(),a()(h.A,v),h.A&&h.A.locals&&h.A.locals},72:e=>{var c=[];function t(e){for(var t=-1,n=0;n<c.length;n++)if(c[n].identifier===e){t=n;break}return t}function n(e,n){for(var o={},r=[],s=0;s<e.length;s++){var i=e[s],d=n.base?i[0]+n.base:i[0],l=o[d]||0,p="".concat(d," ").concat(l);o[d]=l+1;var u=t(p),m={css:i[1],media:i[2],sourceMap:i[3],supports:i[4],layer:i[5]};if(-1!==u)c[u].references++,c[u].updater(m);else{var f=a(m,n);n.byIndex=s,c.splice(s,0,{identifier:p,updater:f,references:1})}r.push(p)}return r}function a(e,c){var t=c.domAPI(c);return t.update(e),function(c){if(c){if(c.css===e.css&&c.media===e.media&&c.sourceMap===e.sourceMap&&c.supports===e.supports&&c.layer===e.layer)return;t.update(e=c)}else t.remove()}}e.exports=function(e,a){var o=n(e=e||[],a=a||{});return function(e){e=e||[];for(var r=0;r<o.length;r++){var s=t(o[r]);c[s].references--}for(var i=n(e,a),d=0;d<o.length;d++){var l=t(o[d]);0===c[l].references&&(c[l].updater(),c.splice(l,1))}o=i}}},659:e=>{var c={};e.exports=function(e,t){var n=function(e){if(void 0===c[e]){var t=document.querySelector(e);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(e){t=null}c[e]=t}return c[e]}(e);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(t)}},540:e=>{e.exports=function(e){var c=document.createElement("style");return e.setAttributes(c,e.attributes),e.insert(c,e.options),c}},56:(e,c,t)=>{e.exports=function(e){var c=t.nc;c&&e.setAttribute("nonce",c)}},206:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var c=e.insertStyleElement(e);return{update:function(t){!function(e,c,t){var n="";t.supports&&(n+="@supports (".concat(t.supports,") {")),t.media&&(n+="@media ".concat(t.media," {"));var a=void 0!==t.layer;a&&(n+="@layer".concat(t.layer.length>0?" ".concat(t.layer):""," {")),n+=t.css,a&&(n+="}"),t.media&&(n+="}"),t.supports&&(n+="}");var o=t.sourceMap;o&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),c.styleTagTransform(n,e,c.options)}(c,e,t)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(c)}}}},113:e=>{e.exports=function(e,c){if(c.styleSheet)c.styleSheet.cssText=e;else{for(;c.firstChild;)c.removeChild(c.firstChild);c.appendChild(document.createTextNode(e))}}},312:e=>{e.exports="data:image/svg+xml,%3c%3fxml version='1.0' encoding='utf-8'%3f%3e%3csvg width='120px' height='120px' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100' preserveAspectRatio='xMidYMid' class='uil-gears'%3e%3crect x='0' y='0' width='100' height='100' fill='none' class='bk'%3e%3c/rect%3e%3cg transform='translate(-20%2c-20)'%3e%3cpath d='M79.9%2c52.6C80%2c51.8%2c80%2c50.9%2c80%2c50s0-1.8-0.1-2.6l-5.1-0.4c-0.3-2.4-0.9-4.6-1.8-6.7l4.2-2.9c-0.7-1.6-1.6-3.1-2.6-4.5 L70%2c35c-1.4-1.9-3.1-3.5-4.9-4.9l2.2-4.6c-1.4-1-2.9-1.9-4.5-2.6L59.8%2c27c-2.1-0.9-4.4-1.5-6.7-1.8l-0.4-5.1C51.8%2c20%2c50.9%2c20%2c50%2c20 s-1.8%2c0-2.6%2c0.1l-0.4%2c5.1c-2.4%2c0.3-4.6%2c0.9-6.7%2c1.8l-2.9-4.1c-1.6%2c0.7-3.1%2c1.6-4.5%2c2.6l2.1%2c4.6c-1.9%2c1.4-3.5%2c3.1-5%2c4.9l-4.5-2.1 c-1%2c1.4-1.9%2c2.9-2.6%2c4.5l4.1%2c2.9c-0.9%2c2.1-1.5%2c4.4-1.8%2c6.8l-5%2c0.4C20%2c48.2%2c20%2c49.1%2c20%2c50s0%2c1.8%2c0.1%2c2.6l5%2c0.4 c0.3%2c2.4%2c0.9%2c4.7%2c1.8%2c6.8l-4.1%2c2.9c0.7%2c1.6%2c1.6%2c3.1%2c2.6%2c4.5l4.5-2.1c1.4%2c1.9%2c3.1%2c3.5%2c5%2c4.9l-2.1%2c4.6c1.4%2c1%2c2.9%2c1.9%2c4.5%2c2.6l2.9-4.1 c2.1%2c0.9%2c4.4%2c1.5%2c6.7%2c1.8l0.4%2c5.1C48.2%2c80%2c49.1%2c80%2c50%2c80s1.8%2c0%2c2.6-0.1l0.4-5.1c2.3-0.3%2c4.6-0.9%2c6.7-1.8l2.9%2c4.2 c1.6-0.7%2c3.1-1.6%2c4.5-2.6L65%2c69.9c1.9-1.4%2c3.5-3%2c4.9-4.9l4.6%2c2.2c1-1.4%2c1.9-2.9%2c2.6-4.5L73%2c59.8c0.9-2.1%2c1.5-4.4%2c1.8-6.7L79.9%2c52.6 z M50%2c65c-8.3%2c0-15-6.7-15-15c0-8.3%2c6.7-15%2c15-15s15%2c6.7%2c15%2c15C65%2c58.3%2c58.3%2c65%2c50%2c65z' fill='%238f7f59'%3e%3canimateTransform attributeName='transform' type='rotate' from='90 50 50' to='0 50 50' dur='1s' repeatCount='indefinite'%3e%3c/animateTransform%3e%3c/path%3e%3c/g%3e%3cg transform='translate(20%2c20) rotate(15 50 50)'%3e%3cpath d='M79.9%2c52.6C80%2c51.8%2c80%2c50.9%2c80%2c50s0-1.8-0.1-2.6l-5.1-0.4c-0.3-2.4-0.9-4.6-1.8-6.7l4.2-2.9c-0.7-1.6-1.6-3.1-2.6-4.5 L70%2c35c-1.4-1.9-3.1-3.5-4.9-4.9l2.2-4.6c-1.4-1-2.9-1.9-4.5-2.6L59.8%2c27c-2.1-0.9-4.4-1.5-6.7-1.8l-0.4-5.1C51.8%2c20%2c50.9%2c20%2c50%2c20 s-1.8%2c0-2.6%2c0.1l-0.4%2c5.1c-2.4%2c0.3-4.6%2c0.9-6.7%2c1.8l-2.9-4.1c-1.6%2c0.7-3.1%2c1.6-4.5%2c2.6l2.1%2c4.6c-1.9%2c1.4-3.5%2c3.1-5%2c4.9l-4.5-2.1 c-1%2c1.4-1.9%2c2.9-2.6%2c4.5l4.1%2c2.9c-0.9%2c2.1-1.5%2c4.4-1.8%2c6.8l-5%2c0.4C20%2c48.2%2c20%2c49.1%2c20%2c50s0%2c1.8%2c0.1%2c2.6l5%2c0.4 c0.3%2c2.4%2c0.9%2c4.7%2c1.8%2c6.8l-4.1%2c2.9c0.7%2c1.6%2c1.6%2c3.1%2c2.6%2c4.5l4.5-2.1c1.4%2c1.9%2c3.1%2c3.5%2c5%2c4.9l-2.1%2c4.6c1.4%2c1%2c2.9%2c1.9%2c4.5%2c2.6l2.9-4.1 c2.1%2c0.9%2c4.4%2c1.5%2c6.7%2c1.8l0.4%2c5.1C48.2%2c80%2c49.1%2c80%2c50%2c80s1.8%2c0%2c2.6-0.1l0.4-5.1c2.3-0.3%2c4.6-0.9%2c6.7-1.8l2.9%2c4.2 c1.6-0.7%2c3.1-1.6%2c4.5-2.6L65%2c69.9c1.9-1.4%2c3.5-3%2c4.9-4.9l4.6%2c2.2c1-1.4%2c1.9-2.9%2c2.6-4.5L73%2c59.8c0.9-2.1%2c1.5-4.4%2c1.8-6.7L79.9%2c52.6 z M50%2c65c-8.3%2c0-15-6.7-15-15c0-8.3%2c6.7-15%2c15-15s15%2c6.7%2c15%2c15C65%2c58.3%2c58.3%2c65%2c50%2c65z' fill='%239f9fab'%3e%3canimateTransform attributeName='transform' type='rotate' from='0 50 50' to='90 50 50' dur='1s' repeatCount='indefinite'%3e%3c/animateTransform%3e%3c/path%3e%3c/g%3e%3c/svg%3e"}}]);