[tool.poetry]
name = "odp-sdk-python-ingest"
version = "0.4.36"
description = "ODP ingest SDK"
authors = ["Thomas Li Fredriksen <thomas.fredriksen@oceandata.earth>"]
readme = "README.md"
packages = [
    {include="odp"}
]

[tool.poetry.dependencies]
python = ">=3.10, <3.13"
prefect = "^2.17.1"
click = "^8.1.3"
python-dotenv = "^1.0.0"
msal = "^1.19.0"
msal-extensions = "^1.0.0"
pykube-ng = "^22.9.0"
azure-common = "^1.1.28"
azure-identity = "^1.11.0"
azure-keyvault = "^4.2.0"
azure-keyvault-secrets = "^4.6.0"
azure-storage-common = "^2.1.0"
inflection = "^0.5.1"
docker = "^6.1.2"
slugify = "^0.0.1"
pydantic = "^2.4.2"
decorator = "^5.1.1"
prefect-dask = "^0.2.0"
azure-storage-blob = "^12.13.1"
psycopg2-binary = "^2.9.3"
jinja2 = "3.0.3"
prefect-azure = {extras = ["blob"], version = "^0.2.2"}
prefect-kv = "^0.1.0"
cognite-sdk = ">=7.3.1,<8.0.0"
fsspec = "^2023.4.0"
dask-kubernetes = "~2022.10.1"
dask = "~2022.11.0"
requests = "^2.28.1"
cognite-cdffs = "^0.3"
prometheus-client = "^0.16.0"
mkdocstrings = "^0.22.0"

[tool.poetry.dev-dependencies]
pytest = "^7.1.3"
poethepoet = "^0.19.0"

[tool.poetry.group.dev.dependencies]
mkdocs = "^1.4.1"
mkdocs-material = ">=8.5.7,<10.0.0"
mkdocstrings = {extras = ["python"], version = "^0.22.0"}
mkdocs-gen-files = "^0.4.0"
flake8-pyproject = "^1.1.0.post0"
types-requests = "^2.28.11.2"
mypy = "^0.982"
coverage = "^6.5.0"

[build-system]
requires = ["poetry-core>=1.0.0"]
build-backend = "poetry.core.masonry.api"

[tool.poe.tasks]
test = "pytest --cov=poethepoet"
pipeline = "python -m odp.compute.cli"
pipelines = "python -m odp.compute.cli"

[tool.pytest.ini_options]
log_cli = "true"
testpaths = [
    "tests"
]

[tool.flake8]
ignore = ["E203", "E731", "W503"]
per-file-ignores = ["*/__init__.py:F401"]
max-line-length = 120
count = true

[tool.isort]
line_length=120                # corresponds to -w  flag
multi_line_output=3            # corresponds to -m  flag
include_trailing_comma=true    # corresponds to -tc flag
