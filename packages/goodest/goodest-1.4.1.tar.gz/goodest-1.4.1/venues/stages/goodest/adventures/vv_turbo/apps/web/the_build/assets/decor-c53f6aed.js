import{l as P,b as I,d as N,e as E,_ as C,s as G,r as n,o as c,f as T,w as i,g as s,a as t,h as d,T as $,c as u,F as j,i as V,n as f,j as R,t as k,p as Y,k as L}from"./index-a0b775e5.js";import{f as z,r as B}from"./decor-96894bcb.js";import{i as D,s as U}from"./decor-ebc19d4a.js";import{s as q}from"./decor-8e219cfa.js";import{c as F}from"./scenery-f58f903f.js";const K=async({freight:e})=>(console.log("starting search goods",e),await P({path:"guests",envelope:{label:"search goods",freight:e}}));async function M(){await I({field_title:"scan filter",field:N(()=>import("./field-e2ebd0ad.js"),["assets/field-e2ebd0ad.js","assets/index-a0b775e5.js","assets/index-0adfbe82.css"])})}async function W(){await I({field_title:"scan sort",field:N(()=>import("./field-5f91724e.js"),["assets/field-5f91724e.js","assets/index-a0b775e5.js","assets/index-0adfbe82.css"])})}const H={_get:E,furnish_string:z,round_quantity:B,is_kind:D,async input_changed({search_string:e}){console.log("the search string changed:",e),this.search_string=e,this.previous_search_string!==this.search_string?(this.next=!1,this.prev=!1):(this.next=!1,this.prev=!1,this.amount_after>=1&&(this.next=!0),this.amount_before>=1&&(this.prev=!0))},async search_next(){console.log("next",this.limits),this.before=!1,this.after=this.limits.end,this.search()},async search_prev(){this.before=this.limits.start,this.after=!1,console.log("prev"),this.search()},async search(){this.searching=!0,this.next=!1;let e={string:this.search_string,include:{food:!0,supp:!0},limit:25};this.before?e.before=this.before:this.after&&(e.after=this.after),this.previous_search_string=this.search_string;try{const{status:o,parsed:h,proceeds:m}=await K({freight:{filters:e}});if(o===200){const r=m.freight,l=r.stats;this.treasures=r.treasures,this.limits=r.limits,this.amount_after=l.amounts.after,this.amount_before=l.amounts.before,this.amount_found=l.amounts.returned,this.next=!1,this.prev=!1,this.amount_after>=1&&(this.next=!0),this.amount_before>=1&&(this.prev=!0),this.searching=!1;return}}catch(o){console.error(o)}this.treasures=[],this.count=0,this.searching=!1,console.error("The search could not be completed.")},async open_filter_by(){await M()},async open_sort_by(){await W()},ENERGY_PER_G(e){try{return this.round_quantity(e.ENERGY[0]/E(e,["PACKAGE MASS","G"],"?"))+" "+e.ENERGY[1]+" PER G"}catch{console.warn("COULDN'T FIND ENERGY PER GRAM")}return"? KCAL PER G"},FILTERED_NUTRIENTS(e){}},J={props:["open_filter_by","open_sort_by","search","input_changed"],components:{s_button:G,s_input:q},data(){return{search_string:""}},watch:{search_string(e){this.input_changed({search_string:e})}},methods:{send_search(){console.log("send search",this.search_string),this.search({search_string:this.search_string})}}},Q={style:{display:"flex",justifyContent:"center",alignItems:"center",paddingBottom:"5px"}},X=t("div",{style:{width:"10px"}},null,-1),Z={style:{display:"flex",justifyContent:"center",alignItems:"center"}},O=t("div",{style:{width:"10px"}},null,-1);function ee(e,o,h,m,r,l){const g=n("s_input"),_=n("s_button"),y=n("s_panel"),b=n("lounge");return c(),T(b,null,{default:i(({palette:x})=>[s(y,{tabindex:"0",role:"search",style:{padding:"5px",margin:"2px"}},{default:i(()=>[t("section",Q,[s(g,{modelValue:r.search_string,"onUpdate:modelValue":o[0]||(o[0]=p=>r.search_string=p),style:{width:"100%",maxWidth:"500px"},styles:{input:{}}},null,8,["modelValue"]),X,s(_,{clicked:l.send_search,style:{fontSize:"1.4rem"},boundaries:"4px 20px 7px",styles:{inside:{}}},{default:i(()=>[d("search")]),_:1},8,["clicked"])]),t("section",Z,[s(_,{clicked:h.open_filter_by,styles:{inside:{}}},{default:i(()=>[d("filter")]),_:1},8,["clicked"]),O,s(_,{clicked:h.open_sort_by,styles:{inside:{}}},{default:i(()=>[d("sort")]),_:1},8,["clicked"])])]),_:1})]),_:1})}const te=C(J,[["render",ee]]),se={components:{change_indicator:F,s_food_or_supp_summary:U,s_button:G,search_controls:te},methods:H,data(){return{searching:!0,search_string:"",previous_search_string:"",next:!1,prev:!1,counts:{returned:"_",unlimited:"_"},amount_after:0,amount_before:0,message:"",treasures:[],count:"0"}},mounted(){this.search()}};const ne=se,a=e=>(Y("data-v-8f0cc68f"),e=e(),L(),e),ie=a(()=>t("div",{style:{height:"5px"}},null,-1)),oe={key:0},re={style:{display:"flex",justifyContent:"space-between",width:"100%",boxSizing:"border-box",padding:"5px 10px 5px 0"}},ae=a(()=>t("div",{style:{height:"5px"}},null,-1)),le={key:0},ce=a(()=>t("p",null,"The search did not produce any returns.",-1)),_e=[ce],de=a(()=>t("div",{style:{height:"5px"}},null,-1)),he={style:{display:"flex",justifyContent:"space-between",alignItems:"center",position:"relative",height:"40px",paddingTop:"3px",width:"100%",borderRadius:"5px"}},pe=a(()=>t("div",{style:{width:"10px"}},null,-1)),ue=a(()=>t("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"50%"}},null,-1)),fe=a(()=>t("div",{style:{width:"10px"}},null,-1));function me(e,o,h,m,r,l){const g=n("search_controls"),_=n("s_food_or_supp_summary"),y=n("s_line"),b=n("change_indicator"),x=n("s_panel"),p=n("s_button"),S=n("lounge");return c(),T(S,null,{default:i(({palette:v,terrain:w})=>[t("main",{"shelves-region":"",style:f({height:"100%",boxSizing:"border-box",display:"flex",flexDirection:"column",fontSize:w.width<w.mobile_nav_width?"1.5em":"1em"})},[s(g,{open_filter_by:e.open_filter_by,open_sort_by:e.open_sort_by,search:e.search,input_changed:e.input_changed},null,8,["open_filter_by","open_sort_by","search","input_changed"]),ie,s(x,{board_physics:{overflowY:"scroll",height:"100%"},style:{position:"relative",height:"100%",overflow:"hidden",margin:"0px 2px 2px 2px"}},{default:i(()=>[s($,{name:"fade"},{default:i(()=>[e.searching?R("",!0):(c(),u("div",oe,[(c(!0),u(j,null,V(e.treasures,A=>(c(),u("div",{style:f({position:"relative",color:v[2],width:"100%"})},[t("div",re,[s(_,{treasure:A,style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"}},null,8,["treasure"])]),ae,s(y)],4))),256)),!e.searching&&Array.isArray(e.treasures)&&e.treasures.length===0?(c(),u("div",le,_e)):R("",!0)]))]),_:2},1024),s(b,{show:e.searching},null,8,["show"])]),_:2},1024),de,s(x,{style:{padding:"2px 16px"}},{default:i(()=>[t("div",he,[t("div",{style:f({display:"flex",justifyContent:"left",alignItems:"center",width:"25%",color:v[2],textAlign:"left"})},[s(p,{ref:"button",boundaries:"3px 12px 3px",pressable:e.prev,clicked:e.search_prev,styles:{inside:{}}},{default:i(()=>[d("previous")]),_:1},8,["pressable","clicked"]),pe,t("p",null,k(e.amount_before)+" before",1)],4),ue,t("div",{style:f({display:"flex",justifyContent:"right",alignItems:"center",width:"25%",color:v[2],textAlign:"right"})},[t("p",null,k(e.amount_after)+" after ",1),fe,s(p,{ref:"button",boundaries:"3px 12px 3px",pressable:e.next,clicked:e.search_next,styles:{inside:{}}},{default:i(()=>[d("next")]),_:1},8,["pressable","clicked"])],4)])]),_:2},1024)],4)]),_:1})}const we=C(ne,[["render",me],["__scopeId","data-v-8f0cc68f"]]);export{we as default};
