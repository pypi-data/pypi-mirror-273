.\" Man page generated from reStructuredText.
.
.
.nr rst2man-indent-level 0
.
.de1 rstReportMargin
\\$1 \\n[an-margin]
level \\n[rst2man-indent-level]
level margin: \\n[rst2man-indent\\n[rst2man-indent-level]]
-
\\n[rst2man-indent0]
\\n[rst2man-indent1]
\\n[rst2man-indent2]
..
.de1 INDENT
.\" .rstReportMargin pre:
. RS \\$1
. nr rst2man-indent\\n[rst2man-indent-level] \\n[an-margin]
. nr rst2man-indent-level +1
.\" .rstReportMargin post:
..
.de UNINDENT
. RE
.\" indent \\n[an-margin]
.\" old: \\n[rst2man-indent\\n[rst2man-indent-level]]
.nr rst2man-indent-level -1
.\" new: \\n[rst2man-indent\\n[rst2man-indent-level]]
.in \\n[rst2man-indent\\n[rst2man-indent-level]]u
..
.TH "KIWI::SYSTEM::STACKBUILD" "8" "May 13, 2024" "1.0.10" "KIWI - Stack Build Plugin"
.SH NAME
kiwi::system::stackbuild \- Stack Build Plugin
.SH SYNOPSIS
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
kiwi\-ng system stackbuild \-h | \-\-help
kiwi\-ng system stackbuild \-\-stash=<name>... \-\-description=<directory> \-\-target\-dir=<directory>
    [\-\-from\-registry=<URI>]
    [\-\- <kiwi_build_command_args>...]
kiwi\-ng system stackbuild \-\-stash=<name>... \-\-target\-dir=<directory>
    [\-\-from\-registry=<URI>]
    [\-\- <kiwi_create_command_args>...]
kiwi\-ng system stackbuild help
.ft P
.fi
.UNINDENT
.UNINDENT
.SH DESCRIPTION
.sp
This [KIWI](\X'tty: link https://osinside.github.io/kiwi/'\fI\%https://osinside.github.io/kiwi/\fP\X'tty: link') plugin allows to store
and reuse KIWI built root\-trees as OCI containers. The idea is using OCI images
as portable format to store and distribute a root\-tree, so they can be pushed
and pulled from OCI registries.
.sp
This plugin allows the user to operate in two modes
.INDENT 0.0
.IP 1. 3
Rebuild an image from a stash
.sp
In this mode \fBstackbuild\fP takes a stash, makes it available to the
local registry and builds the image using the stash rootfs and
in stash stored image description.
.INDENT 3.0
.INDENT 3.5
.sp
.nf
.ft C
$ kiwi\-ng system stackbuild \-\-stash NAME \e
    \-\-target\-dir /target/rebuild
.ft P
.fi
.UNINDENT
.UNINDENT
.IP 2. 3
Build an image based on a stash
.sp
In this mode \fBstackbuild\fP takes a stash, makes it available to the
local registry and uses the stash rootfs as the base for an image
build of another image description.
.INDENT 3.0
.INDENT 3.5
.sp
.nf
.ft C
$ kiwi\-ng system stackbuild \-\-stash NAME \e
    \-\-description=/some/image\-description \-\-target\-dir /target/rebuild
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
\fBNOTE:\fP
.INDENT 3.0
.INDENT 3.5
The stackbuild plugin does not perform any consistency check
if the used stash rootfs is compatible with the provided image
description. With that in mind there is nothing which would
prevent you from using a Leap stash and try to build a Fedora
image on top of it. That an attempt like this will not produce
anything useful should be clear to the user and is in the
users responsibility to prevent combining apples with pears
.UNINDENT
.UNINDENT
.UNINDENT
.SH OPTIONS
.INDENT 0.0
.TP
.BI \-\-stash\fB= <name>
Name of the stash. See \fBsystem stash \-\-list\fP for available stashes.
Multiple stashes will be stacked together in the given order
.TP
.BI \-\-from\-registry\fB= <URI>
Pull given stash container name from the provided
registry URI
.TP
.BI \-\-description\fB= <directory>
Path to the XML description. This is a directory containing at least
one _config.xml_ or _*.kiwi_ XML file.
.TP
.BI \-\-target\-dir\fB= <directory>
Path to store the build results.
.UNINDENT
.sp
\-\- <kiwi_build_command_args>...
.INDENT 0.0
.INDENT 3.5
List of command parameters as supported by the kiwi\-ng
build command. The information given here is passed
along to the \fBkiwi\-ng system build\fP command.
.UNINDENT
.UNINDENT
.sp
\-\- <kiwi_create_command_args>...
.INDENT 0.0
.INDENT 3.5
List of command parameters as supported by the kiwi\-ng
build command. The information given here is passed
along to the \fBkiwi\-ng system create\fP command.
.UNINDENT
.UNINDENT
.SH EXAMPLE
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
$ kiwi\-ng system stackbuild \-\-stash NAME \-\-target\-dir /target/rebuild
.ft P
.fi
.UNINDENT
.UNINDENT
.SH AUTHOR
Marcus Schäfer
.SH COPYRIGHT
2021, Marcus Schäfer
.\" Generated by docutils manpage writer.
.
