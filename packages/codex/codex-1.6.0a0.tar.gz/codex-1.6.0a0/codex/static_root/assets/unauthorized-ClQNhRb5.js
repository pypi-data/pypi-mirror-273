import{x as $,G as O,as as G,cm as de,r as ce,X as me,h as H,y as fe,K as W,cn as ge,L as t,ap as J,M as K,c6 as T,c0 as he,ah as A,co as ve,c8 as ye,aE as be,N as p,k as we,m as c,bg as ke,O as q,_ as M,Q as V,R as d,P as g,T as r,aj as Y,ad as _,ai as P,aI as Ve,aJ as _e,ak as Z,bb as R,c7 as pe,aD as z,cp as Se,aA as Ce,cq as Le,E as ee,aV as te,cr as Pe,F as Ae,I as Me,aw as De,ax as Ie,aY as ae,bR as xe,C as Ee,ao as Be,au as Ue,bO as Fe,bq as Re,ag as Ne,aK as Te}from"./admin-drawer-panel-mtdde7vY.js";import{C as ze}from"./change-password-dialog-C8YONrId.js";import{S as $e,V as N,a as Oe}from"./VTextField-DI9HAmWh.js";import{a as We,c as Ke,u as qe,V as Q,d as X}from"./VSelectionControl-DJAPiluk.js";import{V as je}from"./VDialog-yDKzaGEj.js";import{d as Ge,e as He}from"./main-BnzL_Byv.js";const Je=$({indeterminate:Boolean,inset:Boolean,flat:Boolean,loading:{type:[Boolean,String],default:!1},...We(),...Ke()},"VSwitch"),Qe=O()({name:"VSwitch",inheritAttrs:!1,props:Je(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:indeterminate":e=>!0},setup(e,s){let{attrs:l,slots:a}=s;const o=G(e,"indeterminate"),i=G(e,"modelValue"),{loaderClasses:u}=de(e),{isFocused:n,focus:m,blur:S}=qe(e),b=ce(),C=me&&window.matchMedia("(forced-colors: active)").matches,D=H(()=>typeof e.loading=="string"&&e.loading!==""?e.loading:e.color),I=fe(),x=H(()=>e.id||`switch-${I}`);function w(){o.value&&(o.value=!1)}function L(h){var v,y;h.stopPropagation(),h.preventDefault(),(y=(v=b.value)==null?void 0:v.input)==null||y.click()}return W(()=>{const[h,v]=ge(l),y=Q.filterProps(e),se=X.filterProps(e);return t(Q,J({class:["v-switch",{"v-switch--flat":e.flat},{"v-switch--inset":e.inset},{"v-switch--indeterminate":o.value},u.value,e.class]},h,y,{modelValue:i.value,"onUpdate:modelValue":E=>i.value=E,id:x.value,focused:n.value,style:e.style}),{...a,default:E=>{let{id:oe,messagesId:ne,isDisabled:ie,isReadonly:le,isValid:j}=E;const B={model:i,isValid:j};return t(X,J({ref:b},se,{modelValue:i.value,"onUpdate:modelValue":[k=>i.value=k,w],id:oe.value,"aria-describedby":ne.value,type:"checkbox","aria-checked":o.value?"mixed":void 0,disabled:ie.value,readonly:le.value,onFocus:m,onBlur:S},v),{...a,default:k=>{let{backgroundColorClasses:U,backgroundColorStyles:f}=k;return t("div",{class:["v-switch__track",C?void 0:U.value],style:f.value,onClick:L},[a["track-true"]&&t("div",{key:"prepend",class:"v-switch__track-true"},[a["track-true"](B)]),a["track-false"]&&t("div",{key:"append",class:"v-switch__track-false"},[a["track-false"](B)])])},input:k=>{let{inputNode:U,icon:f,backgroundColorClasses:re,backgroundColorStyles:ue}=k;return t(K,null,[U,t("div",{class:["v-switch__thumb",{"v-switch__thumb--filled":f||e.loading},e.inset||C?void 0:re.value],style:e.inset?void 0:ue.value},[a.thumb?t(T,{defaults:{VIcon:{icon:f,size:"x-small"}}},{default:()=>[a.thumb({...B,icon:f})]}):t(he,null,{default:()=>[e.loading?t(ve,{name:"v-switch",active:!0,color:j.value===!1?void 0:D.value},{default:F=>a.loader?a.loader(F):t(ye,{active:F.isActive,color:F.color,indeterminate:!0,size:"16",width:"2"},null)}):f&&t(A,{key:String(f),icon:f,size:"x-small"},null)]})])])}})}})}),{}}}),Xe={name:"AuthLoginDialog",components:{SubmitFooter:$e},data(){return{rules:{username:[e=>!!e||"Username is required"],password:[e=>e?this.registerMode&&e.length<this.MIN_PASSWORD_LEN?`Password must be ${this.MIN_PASSWORD_LEN} characters long`:!0:"Password is required"],passwordConfirm:[e=>e===this.credentials.password||"Passwords must match"]},formModel:{},credentials:{username:"",password:"",passwordConfirm:""},submitButtonEnabled:!1,registerMode:!1,mdiLogin:be}},computed:{...p(we,{formErrors:e=>e.form.errors,formSuccess:e=>e.form.success}),...p(c,{adminFlags:e=>e.adminFlags,MIN_PASSWORD_LEN:e=>e.MIN_PASSWORD_LEN}),...ke(c,["showLoginDialog"]),submitButtonLabel(){return this.registerMode?"Register":"Login"},loginLabel(){let e="Login";return this.adminFlags.registration&&(e+=" or Register"),e}},watch:{showLoginDialog(e){e&&(this.loadAdminFlags(),this.$refs.form&&this.$refs.form.reset())},credentials:{handler(){const e=this.$refs.form;e?e.validate().then(({valid:s})=>this.submitButtonEnabled=s).catch(console.error):this.submitButtonEnabled=!1},deep:!0}},mounted(){window.addEventListener("keyup",this._keyUpListener)},beforeUnmount(){window.removeEventListener("keyup",this._keyUpListener)},methods:{...q(c,["loadAdminFlags","login","register"]),doAuth(e){return this[e](this.credentials).then(()=>this.showLoginDialog=this.formErrors&&this.formErrors.length>0).catch(console.error)},submit(){this.$refs.form.validate().then(({valid:s})=>{if(!s)return;const l=this.registerMode?"register":"login";return this.doAuth(l)}).catch(console.error)},_keyUpListener(e){e.stopImmediatePropagation()}}};function Ye(e,s,l,a,o,i){const u=V("SubmitFooter");return d(),g(je,{modelValue:e.showLoginDialog,"onUpdate:modelValue":s[7]||(s[7]=n=>e.showLoginDialog=n),origin:"center-top",transition:"slide-y-transition","max-width":"20em"},{activator:r(({props:n})=>[t(Z,Ve(_e(n)),{default:r(()=>[t(Y,null,{default:r(()=>[t(A,null,{default:r(()=>[_(P(o.mdiLogin),1)]),_:1}),_(" "+P(i.loginLabel),1)]),_:1})]),_:2},1040)]),default:r(()=>[t(Oe,{id:"authDialog",ref:"form"},{default:r(()=>[t(N,{modelValue:o.credentials.username,"onUpdate:modelValue":s[0]||(s[0]=n=>o.credentials.username=n),autocomplete:"username",label:"Username",rules:o.rules.username,clearable:"",autofocus:"",onKeydown:s[1]||(s[1]=R(n=>e.$refs.password.focus(),["enter"]))},null,8,["modelValue","rules"]),t(N,{ref:"password",modelValue:o.credentials.password,"onUpdate:modelValue":s[2]||(s[2]=n=>o.credentials.password=n),autocomplete:o.registerMode?"new-password":"current-password",label:"Password",rules:o.rules.password,clearable:"",type:"password",onKeydown:s[3]||(s[3]=R(n=>{o.registerMode?e.$refs.passwordConfirm.focus():i.submit()},["enter"]))},null,8,["modelValue","autocomplete","rules"]),t(pe,null,{default:r(()=>[o.registerMode?(d(),g(N,{key:0,ref:"passwordConfirm",modelValue:o.credentials.passwordConfirm,"onUpdate:modelValue":s[4]||(s[4]=n=>o.credentials.passwordConfirm=n),autocomplete:"new-password",label:"Confirm Password",rules:o.rules.passwordConfirm,clearable:"",type:"password",onKeydown:R(i.submit,["enter"])},null,8,["modelValue","rules","onKeydown"])):z("",!0)]),_:1}),e.adminFlags.registration?(d(),g(Qe,{key:0,modelValue:o.registerMode,"onUpdate:modelValue":s[5]||(s[5]=n=>o.registerMode=n),label:"Register"},{default:r(()=>[_(" Register ")]),_:1},8,["modelValue"])):z("",!0),t(u,{verb:o.registerMode?"Register":"Login",table:"",disabled:!o.submitButtonEnabled,onSubmit:i.submit,onCancel:s[6]||(s[6]=n=>e.showLoginDialog=!1)},null,8,["verb","disabled","onSubmit"])]),_:1},512)]),_:1},8,["modelValue"])}const Ze=M(Xe,[["render",Ye],["__scopeId","data-v-c963c3d4"]]),et={name:"AuthLogoutItem",data:function(){return{mdiLogout:Se}},computed:{...p(c,{username:e=>e.user.username})},methods:{...q(c,["logout"])}};function tt(e,s,l,a,o,i){return d(),g(Z,{onClick:e.logout},{default:r(()=>[t(Y,null,{default:r(()=>[t(A,null,{default:r(()=>[_(P(e.mdiLogout),1)]),_:1}),_("Logout "+P(e.username),1)]),_:1})]),_:1},8,["onClick"])}const at=M(et,[["render",tt]]),st={name:"AuthMenu",components:{ChangePasswordDialog:ze,AuthLoginDialog:Ze,AuthLogoutItem:at},computed:{...p(c,{user:e=>e.user})},methods:{...q(c,["logout"])}};function ot(e,s,l,a,o,i){const u=V("AuthLogoutItem"),n=V("ChangePasswordDialog"),m=V("AuthLoginDialog");return d(),Ce(K,null,[e.user?(d(),g(u,{key:0})):z("",!0),e.user?(d(),g(n,{key:1,user:e.user},null,8,["user"])):(d(),g(m,{key:2}))],64)}const nt=M(st,[["render",ot]]),it=$({actionText:String,bgColor:String,color:String,icon:Le,image:String,justify:{type:String,default:"center"},headline:String,title:String,text:String,textWidth:{type:[Number,String],default:500},href:String,to:String,...ee(),...te(),...Pe({size:void 0}),...Ae()},"VEmptyState"),lt=O()({name:"VEmptyState",props:it(),emits:{"click:action":e=>!0},setup(e,s){let{emit:l,slots:a}=s;const{themeClasses:o}=Me(e),{backgroundColorClasses:i,backgroundColorStyles:u}=De(Ie(e,"bgColor")),{dimensionStyles:n}=ae(e),{displayClasses:m}=Ge();function S(b){l("click:action",b)}return W(()=>{var L,h,v;const b=!!(a.actions||e.actionText),C=!!(a.headline||e.headline),D=!!(a.title||e.title),I=!!(a.text||e.text),x=!!(a.media||e.image||e.icon),w=e.size||(e.image?200:96);return t("div",{class:["v-empty-state",{[`v-empty-state--${e.justify}`]:!0},o.value,i.value,m.value,e.class],style:[u.value,n.value,e.style]},[x&&t("div",{key:"media",class:"v-empty-state__media"},[a.media?t(T,{key:"media-defaults",defaults:{VImg:{src:e.image,height:w},VIcon:{size:w,icon:e.icon}}},{default:()=>[a.media()]}):t(K,null,[e.image?t(xe,{key:"image",src:e.image,height:w},null):e.icon?t(A,{key:"icon",color:e.color,size:w,icon:e.icon},null):void 0])]),C&&t("div",{key:"headline",class:"v-empty-state__headline"},[((L=a.headline)==null?void 0:L.call(a))??e.headline]),D&&t("div",{key:"title",class:"v-empty-state__title"},[((h=a.title)==null?void 0:h.call(a))??e.title]),I&&t("div",{key:"text",class:"v-empty-state__text",style:{maxWidth:Ee(e.textWidth)}},[((v=a.text)==null?void 0:v.call(a))??e.text]),a.default&&t("div",{key:"content",class:"v-empty-state__content"},[a.default()]),b&&t("div",{key:"actions",class:"v-empty-state__actions"},[t(T,{defaults:{VBtn:{class:"v-empty-state__action-btn",color:e.color,text:e.actionText}}},{default:()=>{var y;return[((y=a.actions)==null?void 0:y.call(a,{props:{onClick:S}}))??t(Be,{onClick:S},null)]}})])])}),{}}}),rt=$({scrollable:Boolean,...ee(),...te(),...Ue({tag:"main"})},"VMain"),ut=O()({name:"VMain",props:rt(),setup(e,s){let{slots:l}=s;const{dimensionStyles:a}=ae(e),{mainStyles:o,layoutIsReady:i}=He(),{ssrBootStyles:u}=Fe();return W(()=>t(e.tag,{class:["v-main",{"v-main--scrollable":e.scrollable},e.class],style:[o.value,u.value,a.value,e.style]},{default:()=>{var n,m;return[e.scrollable?t("div",{class:"v-main__scroller"},[(n=l.default)==null?void 0:n.call(l)]):(m=l.default)==null?void 0:m.call(l)]}})),i}}),dt={name:"UnauthorizedEmptyState",components:{AuthMenu:nt},props:{admin:{type:Boolean,default:!1}},data(){return{mdiLockOutline:Re}},computed:{...Ne(c,["isCodexViewable","isUserAdmin"]),...p(c,{registration:e=>e.adminFlags.registration}),text(){return this.registration?"":"Registration is disabled"}}},ct={class:"login"};function mt(e,s,l,a,o,i){const u=V("AuthMenu");return d(),g(ut,{id:"unauthorized"},{default:r(()=>[t(lt,{class:"empty",headline:"Unauthorized",text:i.text,icon:o.mdiLockOutline},{default:r(()=>[Te("div",ct,[t(u)])]),_:1},8,["text","icon"])]),_:1})}const wt=M(dt,[["render",mt],["__scopeId","data-v-c927ec7e"]]);export{nt as A,wt as U,ut as V,lt as a};
