import{x as ae,E as be,bP as Ye,G as me,ay as We,ax as F,K as ve,L as o,bQ as ge,_ as z,R as d,aA as T,bR as Ze,ae as te,aD as I,ai as V,bS as Qe,H as ye,bT as Le,bU as Xe,aG as De,N as ne,O as ue,aK as m,T as S,M as ke,aB as le,P as B,ad as L,ah as ce,Q as K,l as Je,aF as et,bw as tt,bV as at,ag as lt,m as st,aQ as rt,aR as it,aT as Ve,k as ot,aU as nt,ap as x,aP as ut,ao as de,b1 as dt,bb as ct,aL as mt,aM as vt,b9 as Se,bl as _e,ak as ft,bW as ht,bX as pt,bY as bt,h as v,bZ as Be,J as Ce,s as Pe,r as pe,U as gt,p as yt,a0 as Ae,b_ as kt,i as $e,b$ as St,an as _t,C as Z,aZ as Re,a_ as Ct,c0 as Tt,b0 as wt,c1 as Vt,c2 as Bt,aw as Ie,as as Pt}from"./admin-drawer-panel-BNRI3VNZ.js";import{C as Rt,u as Q,B as It}from"./main-BJYrxs0x.js";import{b as Mt,c as Nt,d as Et}from"./VSelect-DaalAg2L.js";import{c as Ft}from"./to-case-kUm8NPpW.js";import{P as Lt,a as Dt}from"./settings-drawer-B433DlG2.js";import{V as At}from"./VDialog-DhRhufg-.js";import{m as $t,a as Ot,u as jt,V as Me,b as Ut}from"./VSelectionControl-wVVkmChP.js";const zt=ae({...be(),...Ye({variant:"text"})},"VToolbarItems"),Fl=me()({name:"VToolbarItems",props:zt(),setup(e,t){let{slots:a}=t;return We({VBtn:{color:F(e,"color"),height:"inherit",variant:F(e,"variant")}}),ve(()=>{var s;return o("div",{class:["v-toolbar-items",e.class],style:e.style},[(s=a.default)==null?void 0:s.call(a)])}),{}}}),Gt={p:"publisher",i:"imprint",s:"series",v:"volume",a:"story-arc",f:"folder",c:"missing-cover"},qt=(e,t,a)=>{let s;if(e)s=`${ge(e)}/cover.webp?ts=${t}`,a&&(s+=`&group=${a}`);else{const i=Gt[a];s=window.CODEX.STATIC+"img/"+i+".svg"}return s},Ht={name:"BookCover",props:{group:{type:String,required:!0},childCount:{type:Number,default:1},finished:{type:Boolean},coverPk:{type:Number,default:0},coverMtime:{type:String,required:!0},multiGroup:{type:Boolean,required:!0}},data(){return{showPlaceholder:!1}},computed:{coverSrc(){return qt(this.coverPk,this.coverMtime,this.group)},childCountClasses(){return{childCount:!0,multiGroup:this.multiGroup}}},mounted:function(){this.delayPlaceholder()},methods:{delayPlaceholder:function(){setTimeout(()=>{this.showPlaceholder=!0},2e3)}}},Kt={class:"bookCover"};function xt(e,t,a,s,i,l){return d(),T("div",Kt,[o(Ze,{src:l.coverSrc,class:"coverImg"},null,8,["src"]),a.finished!==!0?(d(),T("div",{key:0,class:te({unreadFlag:!0,mixedreadFlag:a.finished===null})},null,2)):I("",!0),a.group!=="c"?(d(),T("span",{key:1,class:te(l.childCountClasses)},V(a.childCount),3)):I("",!0)])}const Yt=z(Ht,[["render",xt],["__scopeId","data-v-38b11a05"]]),Wt=["B","kB","MB","GB","TB","PB","EB","ZB","YB"],Zt=["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],Qt=["b","kbit","Mbit","Gbit","Tbit","Pbit","Ebit","Zbit","Ybit"],Xt=["b","kibit","Mibit","Gibit","Tibit","Pibit","Eibit","Zibit","Yibit"],Ne=(e,t,a)=>{let s=e;return typeof t=="string"||Array.isArray(t)?s=e.toLocaleString(t,a):(t===!0||a!==void 0)&&(s=e.toLocaleString(void 0,a)),s};function Jt(e,t){if(!Number.isFinite(e))throw new TypeError(`Expected a finite number, got ${typeof e}: ${e}`);t={bits:!1,binary:!1,space:!0,...t};const a=t.bits?t.binary?Xt:Qt:t.binary?Zt:Wt,s=t.space?" ":"";if(t.signed&&e===0)return` 0${s}${a[0]}`;const i=e<0,l=i?"-":t.signed?"+":"";i&&(e=-e);let n;if(t.minimumFractionDigits!==void 0&&(n={minimumFractionDigits:t.minimumFractionDigits}),t.maximumFractionDigits!==void 0&&(n={maximumFractionDigits:t.maximumFractionDigits,...n}),e<1){const P=Ne(e,t.locale,n);return l+P+s+a[0]}const r=Math.min(Math.floor(t.binary?Math.log(e)/Math.log(1024):Math.log10(e)/3),a.length-1);e/=(t.binary?1024:1e3)**r,n||(e=e.toPrecision(3));const c=Ne(Number(e),t.locale,n),f=a[r];return l+c+s+f}const ea=e=>{const t=e.pk,a=Qe();return e={...e,...a},delete e.pk,ye.get(`c/${t}`,{params:e})},ta=()=>ye.get("c/settings"),aa=e=>ye.put("c/settings",e),la=({pk:e,mtime:t})=>`${Le(e)}/download/comic-${e}.cbz?mtime=${t}`,Ll=({pk:e,page:t,mtime:a})=>`${Le(e)}/${t}/page.jpg?mtime=${a}`,Dl=({pk:e,page:t,mtime:a})=>`${ge(e)}/${t}/page.jpg?mtime=${a}`,sa=({pk:e,mtime:t})=>`/c/${e}/book.pdf?mtime=${t}`,Al={getPdfBookSource:sa,getReaderBasePath:ge,getReaderInfo:ea,getReaderSettings:ta,setReaderSettings:aa},ra=function(e){let t;return e?t=e.length===4&&!Number.isNaN(e)?" ("+e+")":" v"+e:t="",t},Oe=function({issueNumber:e,issueSuffix:t},a){let s;try{e==null&&!t&&(e=0);const i=Number.parseFloat(e),l=Math.floor(i);a===void 0&&(a=0),i===l?s=l.toString():(s=i.toString(),a+=s.split(".")[1].length+1),s=s.padStart(a,"0")}catch{s=""}return t&&(s+=t),s},ia=function({issueNumber:e,issueSuffix:t,issueCount:a},s){let i="#"+Oe({issueNumber:e,issueSuffix:t},s);return a&&(i+=` of ${a}`),i},oa=function({seriesName:e,volumeName:t,issueNumber:a,issueSuffix:s,issueCount:i},l){const n=ra(t),r=ia({issueNumber:a,issueSuffix:s,issueCount:i},l);return[e,n,r].filter(Boolean).join(" ")},Ee=Rt.browser.vuetifyNullCode,na=new Set(["",Ee,Ee.toString(),void 0]),ua=function(e){let t;return e===void 0?t=e:e instanceof Object?t={value:e.pk,title:e.name}:t={value:e,title:e.toString()},e.url&&(t.url=e.url),t},da=function(e,t){return e.title<t.title?-1:e.title>t.title?1:0},ca=function(e,t){return Number.parseFloat(e.title)-Number.parseFloat(t.title)},ma=function(e,t,a=!1){const s=e||[],i=t&&t.toLowerCase();let l=[];for(const r of s){if(!r||na.has(r.pk))continue;const c=ua(r);c&&(!i||c.title&&c.title.toLowerCase().includes(i))&&l.push(c)}const n=a?ca:da;return l.sort(n)},va={name:"MetadataTags",props:{label:{type:String,required:!0},values:{type:Array,default(){return[]}},filter:{type:String,required:!1,default:void 0}},data(){return{mdiFilter:Xe,mdiOpenInNew:De}},computed:{...ne(Q,{filterValues(e){const t=this.filter||this.label.toLowerCase();return e.settings.filters[t]},topGroup:e=>e.settings.topGroup}),model(){return ma(this.values)},chipClass(e){return{browseChip:this.filter&&e}}},methods:{...ue(Q,["setSettings"]),chipColor(e){return this.filterValues&&this.filterValues.includes(e)?this.$vuetify.theme.current.colors["primary-darken-1"]:""},onClick(e){if(!this.filter||!e)return;const t=["f","s"].includes(this.topGroup)?this.topGroup:"r",a=t==="s"&&this.filter==="storyArcs";if(!a){const n={filters:{[this.filter]:[e]}};this.setSettings(n)}const l={name:"browser",params:{group:t,pk:a?e:0,page:1}};this.$router.push(l)}}},fa={key:0,class:"tags"},ha={class:"chipGroupLabel"},pa=["href"];function ba(e,t,a,s,i,l){return l.model&&l.model.length>0?(d(),T("div",fa,[m("div",ha,V(a.label),1),o(Nt,{column:!0,multiple:"",value:l.model},{default:S(()=>[(d(!0),T(ke,null,le(l.model,n=>(d(),B(Mt,{key:`${a.label}/${n.value}`,color:l.chipColor(n.value),value:n.value,onClick:r=>l.onClick(n.value)},{default:S(()=>[n.url?(d(),T("a",{key:0,href:n.url,target:"_blank"},[L(V(n.title),1),o(ce,null,{default:S(()=>[L(V(i.mdiOpenInNew),1)]),_:1})],8,pa)):(d(),T("span",{key:1,class:te(l.chipClass)},V(n.title),3))]),_:2},1032,["color","value","onClick"]))),128))]),_:1},8,["value"])])):I("",!0)}const je=z(va,[["render",ba],["__scopeId","data-v-ea0e4633"]]),ga={name:"MetadataContributorsTable",components:{MetadataTags:je},props:{value:{type:Array,default:void 0}},computed:{contributorsDict(){const e={};if(!this.value)return e;for(const{role:s,person:i}of this.value){const l=Ft(s.name)+"s";e[l]||(e[l]=[]),e[l].push(i)}const t=Object.keys(e).sort((s,i)=>s.localeCompare(i)),a={};for(const s of t)a[s]=e[s].sort((i,l)=>i.name.localeCompare(l.name));return a}}},ya={key:0},ka=m("h3",null,"Contributors",-1);function Sa(e,t,a,s,i,l){const n=K("MetadataTags");return Object.keys(l.contributorsDict).length>0?(d(),T("div",ya,[ka,(d(!0),T(ke,null,le(Object.entries(l.contributorsDict),([r,c])=>(d(),B(n,{key:r,values:c,label:r,filter:"contributors"},null,8,["values","label"]))),128))])):I("",!0)}const _a=z(ga,[["render",Sa]]),Ca={name:"MetadataTextBox",props:{label:{type:String,required:!0},value:{type:[Object,String,Number,Boolean],default:void 0},link:{type:[Boolean,String],default:!1},group:{type:String,default:""},obj:{type:Object,default:void 0}},data(){return{mdiOpenInNew:De}},computed:{computedValue(){return this.value!=null&&this.value instanceof Object?this.value.name:this.value},linkValue(){return this.link===!0?this.computedValue:this.link?this.link:!1},highlight(){var e;return((e=this.obj)==null?void 0:e.group)===this.group},pathArray(){if(this.computedValue)return this.computedValue.split("/")},folderPath(){if(this.pathArray)return this.pathArray.slice(0,-1).join("/")},basePath(){if(this.pathArray)return this.pathArray.at(-1)},groupTo(){var i;const e=Q();if(this.group!=="f"&&!e.settings.show[this.group]||this.group==="f"&&!e.page.adminFlags.folderView)return;const a=(((i=this.obj)==null?void 0:i.group)==this.group?this.obj.ids:[this.value.pk]).join(",");if(!a)return;const s=this.$router.currentRoute.value.params;if(!(s.group===this.group&&s.pks===a))return{name:"browser",params:{group:this.group,pks:a}}}}},Ta={class:"textLabel"},wa={class:"textValue"},Va=["href"],Ba={key:3,class:"textContent"},Pa={key:4,id:"basePath"};function Ra(e,t,a,s,i,l){const n=K("router-link");return l.computedValue?(d(),T("div",{key:0,class:te(["text",{highlight:l.highlight}])},[m("div",Ta,V(a.label),1),m("div",wa,[l.groupTo&&a.group==="f"?(d(),B(n,{key:0,id:"folderPath",to:l.groupTo,title:"Browse Folder"},{default:S(()=>[L(V(l.folderPath)+"/ ",1)]),_:1},8,["to"])):l.groupTo?(d(),B(n,{key:1,class:"textContent",to:l.groupTo,title:`Browse ${a.label}`},{default:S(()=>[L(V(l.computedValue),1)]),_:1},8,["to","title"])):a.link?(d(),T("a",{key:2,href:l.linkValue,target:"_blank"},[L(V(l.computedValue)+" ",1),o(ce,{size:"small"},{default:S(()=>[L(V(i.mdiOpenInNew),1)]),_:1})],8,Va)):(d(),T("div",Ba,V(l.computedValue),1)),l.groupTo&&a.group==="f"?(d(),T("span",Pa,V(l.basePath),1)):I("",!0)])],2)):I("",!0)}const Ia=z(Ca,[["render",Ra],["__scopeId","data-v-e94baf62"]]),Ue=new Set("rtl","btt");Object.freeze(Ue);const Ma=({ids:e,page:t,readingDirection:a,pageCount:s},i)=>{if(e.length<1||i&&!s)return;const l=e[0];if(t)t=Number(t);else if(Ue.has(a)){const n=Number(s)-1;t=Math.max(n,0)}else t=0;return{name:"reader",params:{pk:l,page:t}}},Fe=Je("metadata",{state:()=>({md:void 0}),actions:{async loadMetadata({group:e,pks:t}){const a=Q();await It.getMetadata({group:e,pks:t},a.settings).then(s=>{const i={...s.data};return i.loaded=!0,this.md=i,!0}).catch(s=>{console.error(s),this.clearMetadata()})},clearMetadata(){this.md=void 0}}}),Na=1160,Ea=.05,Fa=250,La={name:"MetadataButton",components:{BookCover:Yt,CloseButton:et,MetadataContributorsTable:_a,MetadataTags:je,MetadataText:Ia,PlaceholderLoading:Lt},props:{group:{type:String,required:!0},book:{type:Object,required:!0},children:{type:Number,default:1},toolbar:{type:Boolean,default:!1}},data(){return{mdiDownload:tt,mdiTagOutline:at,dialog:!1,progress:0}},computed:{...lt(st,["isUserAdmin"]),...ne(Q,{twentyFourHourTime:e=>{var t;return(t=e.settings)==null?void 0:t.twentyFourHourTime},readingDirectionTitles:e=>e.choices.static.readingDirection,identifierTypes:e=>e.choices.static.identifierType,importMetadata:e=>{var t,a;return(a=(t=e.page)==null?void 0:t.adminFlags)==null?void 0:a.importMetadata}}),...ne(Fe,{md:e=>e.md}),...ne(Q,{q:e=>e.settings.q}),showContainer(){var e;return((e=this.md)==null?void 0:e.loaded)||!1},downloadFileName(){var t;const e=this.md;return e?(t=this.md)!=null&&t.filename?e.filename:oa({seriesName:e.series.name||"",volumeName:e.volume.name||"",issueNumber:e.issueNumber,issueSuffix:e.issueSuffix})+"."+this.fileType.toLowerCase():"Unknown.cbz"},buttonVariant(){return this.toolbar?"plain":"text"},downloadURL(){return this.book?la(this.book):""},isReadButtonShown(){return this.group==="c"&&this.$route.name!="reader"},isReadButtonEnabled(){return!!this.readerRoute},readButtonIcon(){return this.isReadButtonEnabled?rt:it},readerRoute(){var e;return(e=this.md)!=null&&e.ids?Ma(this.md,this.importMetadata):{}},formattedIssue(){if(!this.md)return"Unknown";if(!((this.md.issueNumber===null||this.md.issueNumber===void 0)&&!this.md.issueSuffix))return Oe(this.md)},readingDirectionText(){return this.md?this.readingDirectionTitles[this.md.readingDirection]:"Unknown"},pages(){let e="";if(!this.md)return e;if(this.md.page){const a=Ve.format(this.md.page);e+=`Read ${a} of `}const t=Ve.format(this.md.pageCount);return e+=`${t} pages`,this.md.progress>0&&(e+=` (${Math.round(this.md.progress)}%)`),e},size(){var e;return((e=this==null?void 0:this.md)==null?void 0:e.size)>0?Jt(this.md.size):0},fileType(){var e;return((e=this==null?void 0:this.md)==null?void 0:e.fileType)||"Unknown"},titledIdentifiers(){var t;const e=[];if(!((t=this==null?void 0:this.md)!=null&&t.identifiers))return e;for(const a of this.md.identifiers){const s=a.name.split(":"),i=s[0],l=s[1],n=this.identifierTypeTitle(i);let r="";n&&n!=="None"&&(r+=n+":"),r+=l,e.push({...a,name:r})}return e},multiGroup(){var e;return(e=this.md)!=null&&e.ids?this.md.ids.length>1:!1}},watch:{dialog(e){e?this.dialogOpened():this.clearMetadata()}},methods:{...ue(Fe,["clearMetadata","loadMetadata"]),...ue(ot,["downloadIOSPWAFix"]),...ue(Q,["identifierTypeTitle"]),dialogOpened(){const e=this.book.ids?this.book.ids:[this.book.pk],t={group:this.group,pks:e};this.loadMetadata(t),this.startProgress()},startProgress(){this.startTime=Date.now(),this.estimatedMS=Math.max(Ea,this.children/Na)*1e3,this.updateProgress()},updateProgress(){const e=Date.now()-this.startTime;this.progress=e/this.estimatedMS*100,!(this.progress>=100||this.md)&&setTimeout(()=>{this.updateProgress()},Fa)},formatDateTime(e){return nt(e,this.twentyFourHourTime)},download(){this.downloadIOSPWAFix(this.downloadURL,this.md.filename)}}},Da=e=>(mt("data-v-744b5228"),e=e(),vt(),e),Aa={id:"metadataHeader"},$a={id:"metadataBookCoverWrapper"},Oa={class:"inlineRow"},ja={class:"inlineRow"},Ua={class:"inlineRow"},za={key:1,class:"inlineRow"},Ga={id:"metadataBody"},qa={class:"mdSection"},Ha={class:"quintRow"},Ka={class:"mdSection"},xa={class:"quarterRow"},Ya={class:"lastSmallRow"},Wa={class:"halfRow mdSection"},Za={class:"mdSection"},Qa={class:"mdSection"},Xa={class:"mdSection"},Ja={class:"mdSection"},el={class:"mdSection"},tl={class:"mdSection inlineRow"},al={class:"inlineRow"},ll={id:"footerLinks"},sl={id:"bottomRightButtons"},rl={key:1,id:"placeholderContainer"},il=Da(()=>m("div",{id:"placeholderTitle"},"Tags Loading",-1));function ol(e,t,a,s,i,l){const n=K("CloseButton"),r=K("MetadataText"),c=K("BookCover"),f=K("MetadataTags"),P=K("MetadataContributorsTable"),k=K("PlaceholderLoading");return d(),B(At,{modelValue:i.dialog,"onUpdate:modelValue":t[5]||(t[5]=p=>i.dialog=p),fullscreen:"",transition:"dialog-bottom-transition"},{activator:S(({props:p})=>[o(de,x({"aria-label":"tags",class:"tagButton cardControlButton",variant:l.buttonVariant,icon:i.mdiTagOutline,title:"Tags"},p,{onClick:t[0]||(t[0]=ut(()=>{},["prevent"]))}),null,16,["variant","icon"])]),default:S(()=>[l.showContainer?(d(),T("div",{key:0,id:"metadataContainer",onKeyup:t[3]||(t[3]=ct(p=>i.dialog=!1,["esc"]))},[m("header",Aa,[o(n,{class:"closeButton",title:"Close Metadata (esc)",onClick:t[1]||(t[1]=p=>i.dialog=!1)}),e.q?(d(),B(r,{key:0,id:"search",value:e.q,label:"Search Query",highlight:!0},null,8,["value"])):I("",!0),m("div",$a,[o(c,{id:"bookCover","cover-pk":e.md.coverPk,"cover-mtime":e.md.coverMtime||"",group:a.group,"child-count":e.md.childCount,finished:e.md.finished,"multi-group":l.multiGroup},null,8,["cover-pk","cover-mtime","group","child-count","finished","multi-group"]),o(dt,{class:"bookCoverProgress","model-value":e.md.progress,rounded:"","background-color":"inherit",height:"2","aria-label":"% read"},null,8,["model-value"])]),m("div",Oa,[o(r,{id:"publisher",value:e.md.publisher,group:"p",label:"Publisher",obj:{ids:e.md.ids,group:e.md.group}},null,8,["value","obj"]),o(r,{id:"imprint",value:e.md.imprint,group:"i",label:"Imprint",obj:{ids:e.md.ids,group:e.md.group}},null,8,["value","obj"])]),m("div",ja,[o(r,{id:"series",value:e.md.series,label:"Series",group:"s",obj:{ids:e.md.ids,group:e.md.group}},null,8,["value","obj"])]),m("div",Ua,[o(r,{id:"volume",value:e.md.volume,label:"Volume",group:"v",obj:{ids:e.md.ids,group:e.md.group}},null,8,["value","obj"]),o(r,{value:e.md.seriesVolumeCount,label:"Volume Count"},null,8,["value"]),o(r,{id:"issue",value:l.formattedIssue,label:"Issue",group:"c",obj:{ids:e.md.ids,group:e.md.group}},null,8,["value","obj"]),o(r,{value:e.md.volumeIssueCount,label:"Issue Count"},null,8,["value"]),o(r,{value:e.md.name,label:"Title"},null,8,["value"])]),e.md.year||e.md.month||e.md.day?(d(),T("div",za,[o(r,{value:e.md.year,label:"Year",class:"datePicker",type:"number"},null,8,["value"]),o(r,{value:e.md.month,label:"Month",class:"datePicker"},null,8,["value"]),o(r,{value:e.md.day,label:"Day",class:"datePicker"},null,8,["value"])])):I("",!0)]),m("div",Ga,[m("section",qa,[m("div",Ha,[o(r,{value:l.pages,label:"Pages"},null,8,["value"]),o(r,{label:"Finished",value:(!!e.md.finished).toString()},null,8,["value"]),o(r,{label:"Reading Direction",value:l.readingDirectionText},null,8,["value"]),o(r,{value:(!!e.md.monochrome).toString(),label:"Monochrome"},null,8,["value"]),o(r,{value:e.md.original_format,label:"Original Format"},null,8,["value"])])]),m("section",Ka,[m("div",xa,[e.md.createdAt?(d(),B(r,{key:0,value:l.formatDateTime(e.md.createdAt),label:"Created at",class:"mtime"},null,8,["value"])):I("",!0),e.md.updatedAt?(d(),B(r,{key:1,value:l.formatDateTime(e.md.updatedAt),label:"Updated at",class:"mtime"},null,8,["value"])):I("",!0),o(r,{value:l.size,label:"Size"},null,8,["value"]),o(r,{value:l.fileType,label:"File Type"},null,8,["value"])]),m("div",Ya,[o(r,{group:"f",value:{pk:e.md.parentFolderId,name:e.md.path},label:"Path"},null,8,["value"])])]),m("section",Wa,[o(r,{value:e.md.country,label:"Country"},null,8,["value"]),o(r,{value:e.md.language,label:"Language"},null,8,["value"])]),m("section",Za,[o(f,{values:l.titledIdentifiers,label:"Identifiers"},null,8,["values"])]),m("section",Qa,[o(r,{value:e.md.summary,label:"Summary"},null,8,["value"]),o(r,{value:e.md.review,label:"Review"},null,8,["value"])]),m("section",Xa,[o(r,{value:e.md.communityRating,label:"Community Rating"},null,8,["value"]),o(r,{value:e.md.criticalRating,label:"Critical Rating"},null,8,["value"]),o(r,{value:e.md.ageRating,label:"Age Rating"},null,8,["value"])]),m("section",Ja,[o(f,{values:e.md.genres,label:"Genres",filter:"genres"},null,8,["values"]),o(f,{values:e.md.characters,label:"Characters",filter:"characters"},null,8,["values"]),o(f,{values:e.md.teams,label:"Teams",filter:"teams"},null,8,["values"]),o(f,{values:e.md.locations,label:"Locations",filter:"locations"},null,8,["values"]),o(f,{values:e.md.seriesGroups,label:"Series Groups",filter:"seriesGroups"},null,8,["values"]),o(f,{values:e.md.stories,label:"Stories",filter:"stories"},null,8,["values"]),o(f,{values:e.md.storyArcNumbers,label:"Story Arcs",filter:"storyArcs"},null,8,["values"]),o(f,{values:e.md.tags,label:"Tags",filter:"tags"},null,8,["values"])]),m("section",el,[o(P,{value:e.md.contributors},null,8,["value"])]),m("section",tl,[o(r,{value:e.md.notes,label:"Notes"},null,8,["value"])]),m("section",al,[o(r,{value:e.md.tagger,label:"Tagger"},null,8,["value"]),o(r,{value:e.md.scanInfo,label:"Scan"},null,8,["value"])])]),m("footer",ll,[a.group==="c"?(d(),B(de,{key:0,id:"downloadButton",title:"Download Comic Archive",onClick:l.download},{default:S(()=>[a.group==="c"?(d(),B(ce,{key:0},{default:S(()=>[L(V(i.mdiDownload),1)]),_:1})):I("",!0),L(" Download ")]),_:1},8,["onClick"])):I("",!0),l.isReadButtonShown?(d(),B(de,{key:1,to:l.readerRoute,title:"Read Comic",disabled:!l.isReadButtonEnabled},{default:S(()=>[o(ce,null,{default:S(()=>[L(V(l.readButtonIcon),1)]),_:1}),L(" Read ")]),_:1},8,["to","disabled"])):I("",!0),m("span",sl,[o(n,{class:"closeButton",title:"Close Metadata (esc)",onClick:t[2]||(t[2]=p=>i.dialog=!1)})])])],32)):(d(),T("div",rl,[o(n,{class:"closeButton",title:"Close Metadata (esc)",onClick:t[4]||(t[4]=p=>i.dialog=!1)}),il,o(k,{"model-value":i.progress,indeterminate:i.progress>=100,class:"placeholder"},null,8,["model-value","indeterminate"])]))]),_:1},8,["modelValue"])}const $l=z(La,[["render",ol],["__scopeId","data-v-744b5228"]]),nl={name:"ToolbarSelect",props:{selectLabel:{type:String,default:""},maxSelectLen:{type:Number,default:0}},computed:{style(){if(this.maxSelectLen){const e=this.$vuetify.display.xs?"max-width":"width",t=this.maxSelectLen*.7+"em";return`${e}: ${t}`}return""}}};function ul(e,t,a,s,i,l){return d(),B(Et,x(e.$attrs,{label:a.selectLabel,"aria-label":a.selectLabel,class:"toolbarSelect",density:"compact","full-width":"","menu-props":{maxHeight:void 0},"hide-details":"auto",style:l.style,variant:"plain"}),Se({item:S(({item:n,props:r})=>[o(ft,x(r,{density:"compact",variant:"plain",title:n.title,value:n.value}),null,16,["title","value"])]),_:2},[le(e.$slots,(n,r)=>({name:r,fn:S(c=>[_e(e.$slots,r,x({props:n},c),void 0,!0)])}))]),1040,["label","aria-label","style"])}const Ol=z(nl,[["render",ul],["__scopeId","data-v-e88da460"]]),jl=ht("v-spacer","div","VSpacer"),dl={name:"PaginationNavButton",props:{narrow:{type:Boolean,default:!0}},computed:{classes(){return{narrowButton:this.narrow}}}};function cl(e,t,a,s,i,l){return d(),B(de,{variant:"plain",density:"compact",class:te(["paginationNavButton",l.classes]),size:"medium"},Se({_:2},[le(e.$slots,(n,r)=>({name:r,fn:S(c=>[_e(e.$slots,r,x({props:n},c),void 0,!0)])}))]),1032,["class"])}const Ul=z(dl,[["render",cl],["__scopeId","data-v-0450dab6"]]),Te=Symbol.for("vuetify:v-slider");function ml(e,t,a){const s=a==="vertical",i=t.getBoundingClientRect(),l="touches"in e?e.touches[0]:e;return s?l.clientY-(i.top+i.height/2):l.clientX-(i.left+i.width/2)}function vl(e,t){return"touches"in e&&e.touches.length?e.touches[0][t]:"changedTouches"in e&&e.changedTouches.length?e.changedTouches[0][t]:e[t]}const fl=ae({disabled:{type:Boolean,default:null},error:Boolean,readonly:{type:Boolean,default:null},max:{type:[Number,String],default:100},min:{type:[Number,String],default:0},step:{type:[Number,String],default:0},thumbColor:String,thumbLabel:{type:[Boolean,String],default:void 0,validator:e=>typeof e=="boolean"||e==="always"},thumbSize:{type:[Number,String],default:20},showTicks:{type:[Boolean,String],default:!1,validator:e=>typeof e=="boolean"||e==="always"},ticks:{type:[Array,Object]},tickSize:{type:[Number,String],default:2},color:String,trackColor:String,trackFillColor:String,trackSize:{type:[Number,String],default:4},direction:{type:String,default:"horizontal",validator:e=>["vertical","horizontal"].includes(e)},reverse:Boolean,...pt(),...bt({elevation:2}),ripple:{type:Boolean,default:!0}},"Slider"),hl=e=>{const t=v(()=>parseFloat(e.min)),a=v(()=>parseFloat(e.max)),s=v(()=>+e.step>0?parseFloat(e.step):0),i=v(()=>Math.max(Be(s.value),Be(t.value)));function l(n){if(n=parseFloat(n),s.value<=0)return n;const r=Ae(n,t.value,a.value),c=t.value%s.value,f=Math.round((r-c)/s.value)*s.value+c;return parseFloat(Math.min(f,a.value).toFixed(i.value))}return{min:t,max:a,step:s,decimals:i,roundValue:l}},pl=e=>{let{props:t,steps:a,onSliderStart:s,onSliderMove:i,onSliderEnd:l,getActiveThumb:n}=e;const{isRtl:r}=Ce(),c=F(t,"reverse"),f=v(()=>t.direction==="vertical"),P=v(()=>f.value!==c.value),{min:k,max:p,step:D,decimals:G,roundValue:O}=a,Y=v(()=>parseInt(t.thumbSize,10)),q=v(()=>parseInt(t.tickSize,10)),j=v(()=>parseInt(t.trackSize,10)),A=v(()=>(p.value-k.value)/D.value),W=F(t,"disabled"),$=v(()=>t.error||t.disabled?void 0:t.thumbColor??t.color),b=v(()=>t.error||t.disabled?void 0:t.trackColor??t.color),M=v(()=>t.error||t.disabled?void 0:t.trackFillColor??t.color),_=Pe(!1),C=Pe(0),N=pe(),E=pe();function h(u){var we;const y=t.direction==="vertical",ze=y?"top":"left",Ge=y?"height":"width",qe=y?"clientY":"clientX",{[ze]:He,[Ge]:Ke}=(we=N.value)==null?void 0:we.$el.getBoundingClientRect(),xe=vl(u,qe);let he=Math.min(Math.max((xe-He-C.value)/Ke,0),1)||0;return(y?P.value:P.value!==r.value)&&(he=1-he),O(k.value+he*(p.value-k.value))}const U=u=>{l({value:h(u)}),_.value=!1,C.value=0},H=u=>{E.value=n(u),E.value&&(E.value.focus(),_.value=!0,E.value.contains(u.target)?C.value=ml(u,E.value,t.direction):(C.value=0,i({value:h(u)})),s({value:h(u)}))},R={passive:!0,capture:!0};function X(u){i({value:h(u)})}function se(u){u.stopPropagation(),u.preventDefault(),U(u),window.removeEventListener("mousemove",X,R),window.removeEventListener("mouseup",se)}function re(u){var y;U(u),window.removeEventListener("touchmove",X,R),(y=u.target)==null||y.removeEventListener("touchend",re)}function fe(u){var y;H(u),window.addEventListener("touchmove",X,R),(y=u.target)==null||y.addEventListener("touchend",re,{passive:!1})}function w(u){u.preventDefault(),H(u),window.addEventListener("mousemove",X,R),window.addEventListener("mouseup",se,{passive:!1})}const g=u=>{const y=(u-k.value)/(p.value-k.value)*100;return Ae(isNaN(y)?0:y,0,100)},J=F(t,"showTicks"),ee=v(()=>J.value?t.ticks?Array.isArray(t.ticks)?t.ticks.map(u=>({value:u,position:g(u),label:u.toString()})):Object.keys(t.ticks).map(u=>({value:parseFloat(u),position:g(parseFloat(u)),label:t.ticks[u]})):A.value!==1/0?gt(A.value+1).map(u=>{const y=k.value+u*D.value;return{value:y,position:g(y)}}):[]:[]),ie=v(()=>ee.value.some(u=>{let{label:y}=u;return!!y})),oe={activeThumbRef:E,color:F(t,"color"),decimals:G,disabled:W,direction:F(t,"direction"),elevation:F(t,"elevation"),hasLabels:ie,isReversed:c,indexFromEnd:P,min:k,max:p,mousePressed:_,numTicks:A,onSliderMousedown:w,onSliderTouchstart:fe,parsedTicks:ee,parseMouseMove:h,position:g,readonly:F(t,"readonly"),rounded:F(t,"rounded"),roundValue:O,showTicks:J,startOffset:C,step:D,thumbSize:Y,thumbColor:$,thumbLabel:F(t,"thumbLabel"),ticks:F(t,"ticks"),tickSize:q,trackColor:b,trackContainerRef:N,trackFillColor:M,trackSize:j,vertical:f};return yt(Te,oe),oe},bl=ae({focused:Boolean,max:{type:Number,required:!0},min:{type:Number,required:!0},modelValue:{type:Number,required:!0},position:{type:Number,required:!0},ripple:{type:[Boolean,Object],default:!0},...be()},"VSliderThumb"),gl=me()({name:"VSliderThumb",directives:{Ripple:kt},props:bl(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:a,emit:s}=t;const i=$e(Te),{isRtl:l,rtlClasses:n}=Ce();if(!i)throw new Error("[Vuetify] v-slider-thumb must be used inside v-slider or v-range-slider");const{thumbColor:r,step:c,disabled:f,thumbSize:P,thumbLabel:k,direction:p,isReversed:D,vertical:G,readonly:O,elevation:Y,mousePressed:q,decimals:j,indexFromEnd:A}=i,W=v(()=>f.value?void 0:Y.value),{elevationClasses:$}=St(W),{textColorClasses:b,textColorStyles:M}=_t(r),{pageup:_,pagedown:C,end:N,home:E,left:h,right:U,down:H,up:R}=Vt,X=[_,C,N,E,h,U,H,R],se=v(()=>c.value?[1,2,3]:[1,5,10]);function re(w,g){if(!X.includes(w.key))return;w.preventDefault();const J=c.value||.1,ee=(e.max-e.min)/J;if([h,U,H,R].includes(w.key)){const oe=(G.value?[l.value?h:U,D.value?H:R]:A.value!==l.value?[h,R]:[U,R]).includes(w.key)?1:-1,u=w.shiftKey?2:w.ctrlKey?1:0;g=g+oe*J*se.value[u]}else if(w.key===E)g=e.min;else if(w.key===N)g=e.max;else{const ie=w.key===C?1:-1;g=g-ie*J*(ee>100?ee/10:10)}return Math.max(e.min,Math.min(e.max,g))}function fe(w){const g=re(w,e.modelValue);g!=null&&s("update:modelValue",g)}return ve(()=>{const w=Z(A.value?100-e.position:e.position,"%");return o("div",{class:["v-slider-thumb",{"v-slider-thumb--focused":e.focused,"v-slider-thumb--pressed":e.focused&&q.value},e.class,n.value],style:[{"--v-slider-thumb-position":w,"--v-slider-thumb-size":Z(P.value)},e.style],role:"slider",tabindex:f.value?-1:0,"aria-valuemin":e.min,"aria-valuemax":e.max,"aria-valuenow":e.modelValue,"aria-readonly":!!O.value,"aria-orientation":p.value,onKeydown:O.value?void 0:fe},[o("div",{class:["v-slider-thumb__surface",b.value,$.value],style:{...M.value}},null),Re(o("div",{class:["v-slider-thumb__ripple",b.value],style:M.value},null),[[Ct("ripple"),e.ripple,null,{circle:!0,center:!0}]]),o(Tt,{origin:"bottom center"},{default:()=>{var g;return[Re(o("div",{class:"v-slider-thumb__label-container"},[o("div",{class:["v-slider-thumb__label"]},[o("div",null,[((g=a["thumb-label"])==null?void 0:g.call(a,{modelValue:e.modelValue}))??e.modelValue.toFixed(c.value?j.value:1)])])]),[[wt,k.value&&e.focused||k.value==="always"]])]}})])}),{}}}),yl=ae({start:{type:Number,required:!0},stop:{type:Number,required:!0},...be()},"VSliderTrack"),kl=me()({name:"VSliderTrack",props:yl(),emits:{},setup(e,t){let{slots:a}=t;const s=$e(Te);if(!s)throw new Error("[Vuetify] v-slider-track must be inside v-slider or v-range-slider");const{color:i,parsedTicks:l,rounded:n,showTicks:r,tickSize:c,trackColor:f,trackFillColor:P,trackSize:k,vertical:p,min:D,max:G,indexFromEnd:O}=s,{roundedClasses:Y}=Bt(n),{backgroundColorClasses:q,backgroundColorStyles:j}=Ie(P),{backgroundColorClasses:A,backgroundColorStyles:W}=Ie(f),$=v(()=>`inset-${p.value?"block":"inline"}-${O.value?"end":"start"}`),b=v(()=>p.value?"height":"width"),M=v(()=>({[$.value]:"0%",[b.value]:"100%"})),_=v(()=>e.stop-e.start),C=v(()=>({[$.value]:Z(e.start,"%"),[b.value]:Z(_.value,"%")})),N=v(()=>r.value?(p.value?l.value.slice().reverse():l.value).map((h,U)=>{var R;const H=h.value!==D.value&&h.value!==G.value?Z(h.position,"%"):void 0;return o("div",{key:h.value,class:["v-slider-track__tick",{"v-slider-track__tick--filled":h.position>=e.start&&h.position<=e.stop,"v-slider-track__tick--first":h.value===D.value,"v-slider-track__tick--last":h.value===G.value}],style:{[$.value]:H}},[(h.label||a["tick-label"])&&o("div",{class:"v-slider-track__tick-label"},[((R=a["tick-label"])==null?void 0:R.call(a,{tick:h,index:U}))??h.label])])}):[]);return ve(()=>o("div",{class:["v-slider-track",Y.value,e.class],style:[{"--v-slider-track-size":Z(k.value),"--v-slider-tick-size":Z(c.value)},e.style]},[o("div",{class:["v-slider-track__background",A.value,{"v-slider-track__background--opacity":!!i.value||!P.value}],style:{...M.value,...W.value}},null),o("div",{class:["v-slider-track__fill",q.value],style:{...C.value,...j.value}},null),r.value&&o("div",{class:["v-slider-track__ticks",{"v-slider-track__ticks--always-show":r.value==="always"}]},[N.value])])),{}}}),Sl=ae({...$t(),...fl(),...Ot(),modelValue:{type:[Number,String],default:0}},"VSlider"),_l=me()({name:"VSlider",props:Sl(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,start:e=>!0,end:e=>!0},setup(e,t){let{slots:a,emit:s}=t;const i=pe(),{rtlClasses:l}=Ce(),n=hl(e),r=Pt(e,"modelValue",void 0,b=>n.roundValue(b??n.min.value)),{min:c,max:f,mousePressed:P,roundValue:k,onSliderMousedown:p,onSliderTouchstart:D,trackContainerRef:G,position:O,hasLabels:Y,readonly:q}=pl({props:e,steps:n,onSliderStart:()=>{s("start",r.value)},onSliderEnd:b=>{let{value:M}=b;const _=k(M);r.value=_,s("end",_)},onSliderMove:b=>{let{value:M}=b;return r.value=k(M)},getActiveThumb:()=>{var b;return(b=i.value)==null?void 0:b.$el}}),{isFocused:j,focus:A,blur:W}=jt(e),$=v(()=>O(r.value));return ve(()=>{const b=Me.filterProps(e),M=!!(e.label||a.label||a.prepend);return o(Me,x({class:["v-slider",{"v-slider--has-labels":!!a["tick-label"]||Y.value,"v-slider--focused":j.value,"v-slider--pressed":P.value,"v-slider--disabled":e.disabled},l.value,e.class],style:e.style},b,{focused:j.value}),{...a,prepend:M?_=>{var C,N;return o(ke,null,[((C=a.label)==null?void 0:C.call(a,_))??(e.label?o(Ut,{id:_.id.value,class:"v-slider__label",text:e.label},null):void 0),(N=a.prepend)==null?void 0:N.call(a,_)])}:void 0,default:_=>{let{id:C,messagesId:N}=_;return o("div",{class:"v-slider__container",onMousedown:q.value?void 0:p,onTouchstartPassive:q.value?void 0:D},[o("input",{id:C.value,name:e.name||C.value,disabled:!!e.disabled,readonly:!!e.readonly,tabindex:"-1",value:r.value},null),o(kl,{ref:G,start:0,stop:$.value},{"tick-label":a["tick-label"]}),o(gl,{ref:i,"aria-describedby":N.value,focused:j.value,min:c.value,max:f.value,modelValue:r.value,"onUpdate:modelValue":E=>r.value=E,position:$.value,elevation:e.elevation,onFocus:A,onBlur:W,ripple:e.ripple},{"thumb-label":a["thumb-label"]})])}})}),{}}}),Cl={name:"PaginationSlider",props:{min:{type:Number,default:0}}};function Tl(e,t,a,s,i,l){return d(),B(_l,x({"thumb-size":"36",class:"paginationSlider",density:"compact","hide-details":"auto",min:a.min,rounded:!0,"show-ticks":"always",step:1,"thumb-label":"always"},e.$attrs),{"tick-label":S(({index:n})=>[L(V(n+a.min),1)]),_:1},16,["min"])}const zl=z(Cl,[["render",Tl],["__scopeId","data-v-01b67afd"]]),wl={name:"PaginationToolbar"};function Vl(e,t,a,s,i,l){return d(),B(Dt,{class:"paginationToolbar codexToolbar",density:"compact",transform:"center bottom"},Se({_:2},[le(e.$slots,(n,r)=>({name:r,fn:S(c=>[_e(e.$slots,r,x({props:n},c),void 0,!0)])}))]),1024)}const Gl=z(wl,[["render",Vl],["__scopeId","data-v-cfa8cce0"]]);export{Al as A,Yt as B,$l as M,na as N,Ul as P,Ol as T,Fl as V,ia as a,Ma as b,jl as c,zl as d,Gl as e,ra as f,oa as g,Dl as h,la as i,Ll as j,Jt as p,ma as t};
